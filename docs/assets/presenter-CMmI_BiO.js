import{c as K,o as E,u as se,r as m,j as e}from"./index-CAu-Gcxv.js";import{u as w}from"./useQuery-BdTYb31b.js";import{C as f,a as T,b as F,c as k}from"./card-Cbqq-5Kp.js";import{B as c}from"./button-BqWikLMA.js";import{B as G}from"./badge-DAd8Fb7c.js";import{P}from"./play-sWdKX9mt.js";import{T as u}from"./trophy-DwBq0seQ.js";import{S as z}from"./star-bKFapQkS.js";import{P as ae}from"./pause-DHyjdmMW.js";/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const le=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],M=K("chevron-right",le);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const re=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],R=K("rotate-ccw",re),ne={title:"Test Event",description:"A test event for API testing"},ie=[],ce=[],D=({value:C,className:h})=>e.jsx("div",{className:`w-full bg-gray-200 rounded-full h-2 ${h}`,children:e.jsx("div",{className:"bg-champagne-400 h-2 rounded-full transition-all duration-300",style:{width:`${Math.min(100,Math.max(0,C))}%`}})});function fe(){const[,C]=E("/presenter/:id"),[,h]=E("/demo/:id"),[,B]=se(),x=C?.id||h?.id,t=!!h;if(h!==null&&!h.id)return B("/"),null;const[d,A]=m.useState(0),[_,S]=m.useState(!1),[n,g]=m.useState("waiting"),[i,p]=m.useState(30),[j,o]=m.useState(!1),[N,O]=m.useState(!0),{data:U}=w({queryKey:["/api/events",x],enabled:!!x&&!t}),{data:H}=w({queryKey:["/api/events",x,"questions"],enabled:!!x&&!t}),{data:J}=w({queryKey:["/api/events",x,"participants"],enabled:!!x&&!t}),{data:V}=w({queryKey:["/api/events",x,"teams"],enabled:!!x&&!t}),{data:W}=w({queryKey:["/api/events",x,"fun-facts"],enabled:!!x&&!t}),v=t?ne:U,l=t?ie:H,$=t?[]:J,X=t?[]:V,y=t?ce:W,b=v?.allowParticipants??!1,s=l?.[d],Y=l?(d+1)/l.length*100:0,Z=i/30*100;m.useEffect(()=>{let r;return j&&i>0&&(r=setInterval(()=>{p(a=>a<=1?(o(!1),N&&n==="question"&&setTimeout(()=>L(),500),0):a-1)},1e3)),()=>clearInterval(r)},[j,i,N,n]);const ee=[{name:"SaraTeam",score:450,rank:1},{name:"JohnTeam",score:380,rank:2},{name:"Individual Players",score:320,rank:3}],I=()=>{l&&d<l.length-1?(A(d+1),S(!1),g("question"),p(30),o(!0)):(g("leaderboard"),o(!1))},L=()=>{S(!0),g("answer"),o(!1)},q=()=>{g("leaderboard")},Q=()=>{A(0),S(!1),g("waiting"),p(30),o(!1)},te=()=>{g("question"),p(30),o(!0)};return v?e.jsxs("div",{className:"h-screen flex flex-col bg-gradient-to-br from-wine-900 to-champagne-900 text-white overflow-hidden",children:[e.jsxs("div",{className:"flex-shrink-0 p-4 lg:p-6 border-b border-white/20",children:[e.jsxs("div",{className:"flex items-start justify-between flex-wrap gap-4",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[t&&e.jsx("div",{className:"flex items-center gap-3 mb-2",children:e.jsx(G,{variant:"outline",className:"bg-champagne-500/20 border-champagne-400 text-champagne-200",children:"✨ DEMO"})}),e.jsx("h1",{className:"text-xl sm:text-2xl lg:text-4xl xl:text-5xl font-bold text-champagne-200 truncate","data-testid":"text-event-title",children:v.title}),e.jsx("p",{className:"text-xs sm:text-sm lg:text-xl text-white/80 truncate","data-testid":"text-event-description",children:t?"TriviaSpark Preview • Shareable Demo • No Login Required":v.description})]}),e.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-4 lg:space-x-6 text-right flex-shrink-0",children:[b&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg sm:text-xl lg:text-2xl font-bold text-champagne-300",children:$?.length||0}),e.jsx("div",{className:"text-xs sm:text-sm text-white/60",children:"Participants"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg sm:text-xl lg:text-2xl font-bold text-champagne-300",children:X?.length||0}),e.jsx("div",{className:"text-xs sm:text-sm text-white/60",children:"Teams"})]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg sm:text-xl lg:text-2xl font-bold text-champagne-300",children:l?.length||0}),e.jsx("div",{className:"text-xs sm:text-sm text-white/60",children:"Questions"})]})]})]}),e.jsxs("div",{className:"mt-3 lg:mt-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2 flex-wrap gap-2",children:[e.jsx("span",{className:"text-xs sm:text-sm text-white/60",children:"Progress"}),e.jsxs("span",{className:"text-xs sm:text-sm text-champagne-300",children:["Question ",d+1," of ",l?.length||0]})]}),e.jsx(D,{value:Y,className:"h-2 bg-white/20","data-testid":"progress-game"})]})]}),e.jsxs("div",{className:"flex-1 flex items-center justify-center p-4 lg:p-6 pb-20 lg:pb-24 overflow-hidden",children:[n==="waiting"&&e.jsxs("div",{className:"text-center w-full max-w-4xl","data-testid":"view-waiting",children:[e.jsx("div",{className:"w-20 h-20 lg:w-32 lg:h-32 wine-gradient rounded-full flex items-center justify-center mx-auto mb-6 lg:mb-8",children:t?e.jsx(P,{className:"h-10 w-10 lg:h-16 lg:w-16 text-white"}):e.jsx(u,{className:"h-10 w-10 lg:h-16 lg:w-16 text-white"})}),e.jsx("h2",{className:"text-4xl lg:text-6xl xl:text-7xl font-bold mb-3 lg:mb-4 text-champagne-200",children:t?"TriviaSpark Demo":"Welcome to Trivia!"}),e.jsx("p",{className:"text-lg lg:text-2xl xl:text-3xl text-white/80 mb-6 lg:mb-8",children:t?"Experience our interactive trivia platform":"Get ready for an amazing experience"}),e.jsx("div",{className:"text-base lg:text-lg text-champagne-300",children:t?"This is a shareable demo - no login required!":b?`${$?.length||0} participants ready to play`:"Content-focused trivia experience"})]}),n==="question"&&s&&e.jsx("div",{className:"w-full max-w-7xl h-full flex flex-col","data-testid":"view-question",children:e.jsxs(f,{className:"bg-white/10 backdrop-blur-sm border-white/20 text-white flex-1 flex flex-col relative overflow-hidden",children:[s.backgroundImageUrl&&e.jsx("div",{className:"absolute inset-0 bg-cover bg-center",style:{backgroundImage:`url(${s.backgroundImageUrl})`},children:e.jsx("div",{className:"absolute inset-0 bg-black/75"})}),e.jsx(T,{className:"relative z-10",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(F,{className:"text-xl lg:text-3xl text-white drop-shadow-lg",children:["Question ",d+1]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:`text-4xl font-bold ${i<=10?"text-red-400 animate-pulse":i<=20?"text-yellow-400":"text-green-400"}`,"data-testid":"text-timer",children:[i,"s"]}),e.jsx("div",{className:"w-24",children:e.jsx(D,{value:Z,className:`h-2 ${i<=10?"bg-red-200":i<=20?"bg-yellow-200":"bg-green-200"}`})})]}),e.jsx(G,{variant:"secondary",className:"bg-champagne-200 text-champagne-900 text-lg px-4 py-2",children:s.difficulty})]})]})}),e.jsx(k,{className:"flex-1 flex flex-col justify-center relative z-10",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"bg-black/80 backdrop-blur-sm rounded-xl p-4 lg:p-6 mb-4 lg:mb-8 border border-white/20",children:e.jsx("h3",{className:`font-bold leading-tight text-white ${s.question.length>120?"text-lg lg:text-2xl xl:text-3xl":s.question.length>80?"text-xl lg:text-3xl xl:text-4xl":"text-2xl lg:text-4xl xl:text-5xl"}`,"data-testid":"text-current-question",children:s.question})}),s.options&&e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-3 lg:gap-6 max-w-6xl mx-auto",children:s.options.map((r,a)=>e.jsx("div",{className:`p-3 lg:p-6 rounded-lg border-2 ${_&&r===s.correctAnswer?"bg-green-600 border-green-400 text-white shadow-lg":"bg-gray-800 border-gray-600 hover:bg-gray-700 text-white"} transition-all duration-300`,"data-testid":`option-${a}`,children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-champagne-200 text-champagne-900 font-bold flex items-center justify-center mr-4",children:String.fromCharCode(65+a)}),e.jsx("span",{className:"text-base lg:text-xl font-medium text-white",children:r})]})},a))})]})})]})}),n==="answer"&&s&&e.jsxs("div",{className:"w-full max-w-7xl h-full flex flex-col space-y-4 lg:space-y-8","data-testid":"view-answer",children:[e.jsx(f,{className:"bg-white/10 backdrop-blur-sm border-white/20 text-white",children:e.jsxs(k,{className:"py-6 lg:py-8 h-full flex flex-col justify-center",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 lg:gap-8 h-full",children:[e.jsxs("div",{className:"flex flex-col items-center justify-center text-center",children:[e.jsx("div",{className:"w-16 h-16 lg:w-20 lg:h-20 bg-green-500 rounded-full flex items-center justify-center mb-3 lg:mb-4",children:e.jsx(z,{className:"h-8 w-8 lg:h-10 lg:w-10 text-white"})}),e.jsx("h3",{className:"text-xl lg:text-2xl xl:text-3xl font-bold text-green-300",children:"Correct Answer"})]}),e.jsx("div",{className:"flex items-center justify-center text-center",children:e.jsx("p",{className:"text-xl lg:text-3xl xl:text-4xl font-bold text-white","data-testid":"text-correct-answer",children:s.correctAnswer})})]}),s.explanation&&e.jsx("div",{className:"mt-4 lg:mt-6 text-center",children:e.jsx("p",{className:"text-sm lg:text-lg text-white/80 max-w-4xl mx-auto leading-relaxed",children:s.explanation})})]})}),y&&y.length>0&&e.jsx(f,{className:"bg-champagne-600/20 backdrop-blur-sm border-champagne-400/30 text-white flex-1",children:e.jsxs(k,{className:"text-center py-4 lg:py-8 h-full flex flex-col justify-center",children:[e.jsx("div",{className:"w-12 h-12 lg:w-16 lg:h-16 bg-champagne-500 rounded-full flex items-center justify-center mx-auto mb-2 lg:mb-4",children:e.jsx(z,{className:"h-6 w-6 lg:h-8 lg:w-8 text-champagne-900"})}),e.jsx("h4",{className:"text-lg lg:text-2xl font-bold mb-2 lg:mb-4 text-champagne-200",children:"Fun Fact!"}),(()=>{const r=y[d%y.length];return e.jsxs("div",{children:[e.jsx("h5",{className:"text-base lg:text-xl font-semibold mb-2 lg:mb-3 text-champagne-100",children:r.title}),e.jsx("p",{className:"text-sm lg:text-lg text-white/90 max-w-5xl mx-auto leading-relaxed",children:r.content})]})})()]})})]}),n==="leaderboard"&&b&&e.jsx("div",{className:"w-full max-w-5xl h-full flex flex-col","data-testid":"view-leaderboard",children:e.jsxs(f,{className:"bg-white/10 backdrop-blur-sm border-white/20 text-white flex-1 flex flex-col",children:[e.jsx(T,{className:"flex-shrink-0",children:e.jsxs(F,{className:"text-2xl lg:text-4xl text-center flex items-center justify-center",children:[e.jsx(u,{className:"mr-2 lg:mr-4 h-6 w-6 lg:h-10 lg:w-10 text-yellow-400"}),"Leaderboard"]})}),e.jsx(k,{className:"flex-1 flex flex-col justify-center",children:e.jsx("div",{className:"space-y-3 lg:space-y-4",children:ee.map((r,a)=>e.jsxs("div",{className:`flex items-center justify-between p-4 lg:p-6 rounded-lg ${a===0?"bg-yellow-500/20 border-2 border-yellow-400":a===1?"bg-gray-300/20 border-2 border-gray-400":a===2?"bg-amber-600/20 border-2 border-amber-600":"bg-white/5 border border-white/20"}`,"data-testid":`leaderboard-entry-${a}`,children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`w-10 h-10 lg:w-12 lg:h-12 rounded-full flex items-center justify-center font-bold text-lg lg:text-xl mr-3 lg:mr-4 ${a===0?"bg-yellow-400 text-yellow-900":a===1?"bg-gray-400 text-gray-900":a===2?"bg-amber-600 text-amber-100":"bg-white/20 text-white"}`,children:r.rank}),e.jsx("span",{className:"text-lg lg:text-2xl font-semibold",children:r.name})]}),e.jsx("span",{className:"text-xl lg:text-3xl font-bold text-champagne-300",children:r.score})]},r.name))})})]})}),n==="leaderboard"&&!b&&e.jsx("div",{className:"w-full max-w-4xl text-center","data-testid":"view-game-complete",children:e.jsx(f,{className:"bg-white/10 backdrop-blur-sm border-white/20 text-white",children:e.jsxs(T,{children:[e.jsxs(F,{className:"text-3xl lg:text-5xl text-center flex items-center justify-center",children:[e.jsx(u,{className:"mr-2 lg:mr-4 h-8 w-8 lg:h-12 lg:w-12 text-yellow-400"}),"Game Complete!"]}),e.jsx("div",{className:"text-lg lg:text-xl text-champagne-300 mt-4",children:"Thanks for playing! Great job on completing the trivia questions."})]})})})]}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-black/90 backdrop-blur-sm border-t border-white/20 p-2 lg:p-4",children:e.jsxs("div",{className:"max-w-7xl mx-auto flex items-center justify-center space-x-2 lg:space-x-4",children:[n==="waiting"&&e.jsx(e.Fragment,{children:e.jsxs(c,{onClick:te,className:"bg-green-600 hover:bg-green-700 text-white px-4 lg:px-8 py-2 lg:py-4 text-base lg:text-lg font-semibold","data-testid":"button-start-game",children:[e.jsx(P,{className:"mr-2 h-5 w-5"}),t?"Start Demo":"Start Game"]})}),n==="question"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:`text-2xl font-bold ${i<=10?"text-red-400":i<=20?"text-yellow-400":"text-white"}`,children:["Time: ",i,"s"]}),e.jsx(c,{onClick:()=>o(!j),className:"bg-gray-800 border-gray-600 text-white hover:bg-gray-700 border","data-testid":"button-toggle-timer",children:j?e.jsx(ae,{className:"h-4 w-4"}):e.jsx(P,{className:"h-4 w-4"})})]}),e.jsx(c,{onClick:L,className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 text-lg","data-testid":"button-show-answer",children:"Show Answer"}),b&&e.jsxs(c,{onClick:q,className:"bg-wine-700 hover:bg-wine-600 text-white border border-wine-500 px-6 py-3","data-testid":"button-show-leaderboard",children:[e.jsx(u,{className:"mr-2 h-4 w-4"}),"Show Leaderboard"]})]}),n==="answer"&&e.jsxs(e.Fragment,{children:[e.jsxs(c,{onClick:I,className:"bg-green-600 hover:bg-green-700 text-white px-8 py-4 text-lg font-semibold",disabled:!l||d>=l.length-1,"data-testid":"button-next-question",children:[e.jsx(M,{className:"mr-2 h-5 w-5"}),l&&d>=l.length-1?"Finish Game":"Next Question"]}),b&&e.jsxs(c,{onClick:q,className:"bg-wine-700 hover:bg-wine-600 text-white border border-wine-500 px-6 py-3","data-testid":"button-show-leaderboard-from-answer",children:[e.jsx(u,{className:"mr-2 h-4 w-4"}),"Show Leaderboard"]}),e.jsx(c,{onClick:()=>O(!N),size:"sm",className:"bg-champagne-700 hover:bg-champagne-600 text-white border border-champagne-500","data-testid":"button-toggle-auto",children:N?"Auto: ON":"Auto: OFF"})]}),n==="leaderboard"&&e.jsx(e.Fragment,{children:l&&d<l.length-1?e.jsxs(c,{onClick:I,className:"bg-blue-600 hover:bg-blue-700 text-white px-8 py-4 text-lg font-semibold border border-blue-500","data-testid":"button-continue-from-leaderboard",children:[e.jsx(M,{className:"mr-2 h-5 w-5"}),"Continue Game"]}):e.jsxs(c,{onClick:Q,className:"bg-wine-600 hover:bg-wine-700 text-white px-8 py-4 text-lg font-semibold border border-wine-500","data-testid":"button-restart-game",children:[e.jsx(R,{className:"mr-2 h-5 w-5"}),"Game Complete"]})}),e.jsxs("div",{className:"flex items-center space-x-2 ml-8",children:[e.jsx(c,{onClick:Q,size:"sm",className:"bg-red-700 hover:bg-red-600 text-white border border-red-500","data-testid":"button-reset",children:e.jsx(R,{className:"h-4 w-4"})}),e.jsx(c,{onClick:q,size:"sm",className:"bg-yellow-700 hover:bg-yellow-600 text-white border border-yellow-500","data-testid":"button-leaderboard",children:e.jsx(u,{className:"h-4 w-4"})})]})]})})]}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-wine-900 to-champagne-900 flex items-center justify-center",children:e.jsxs("div",{className:"text-white text-center",children:[e.jsx("h1",{className:"text-4xl font-bold mb-4",children:"Event Not Found"}),e.jsx("p",{className:"text-xl",children:"The presenter view could not be loaded."})]})})}export{fe as default};
