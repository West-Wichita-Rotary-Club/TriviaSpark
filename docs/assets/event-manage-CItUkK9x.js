import{c as me,a as Re,r as h,j as e,d as Et,e as Pt,P as ue,f as Tt,h as V,i as K,k as he,l as Rt,D as At,m as Mt,n as Q,X as Ot,o as Lt,u as _t,b as qt,p as Ee,q as zt,s as Ut}from"./index-CAu-Gcxv.js";import{u as X}from"./useQuery-BdTYb31b.js";import{u as J}from"./useMutation-Cc-Xq6IV.js";import{u as $t}from"./index.esm-DB8Cb__P.js";import{B as v}from"./button-BqWikLMA.js";import{L as r,I as p}from"./label-DmYaV6o9.js";import{T as D}from"./textarea-o1QTDC3a.js";import{C as f,a as N,b,c as y}from"./card-Cbqq-5Kp.js";import{B as M}from"./badge-DAd8Fb7c.js";import{U as Gt,S as Qt,P as Pe}from"./upload-wc-VyvwM.js";import{S as q}from"./sparkles-ZDZtLEnV.js";import{M as Ae}from"./mail-DOp8HEft.js";import{B as Me}from"./building-2-DAa2WNkU.js";import{C as Bt}from"./circle-alert-Cj7zgJrH.js";import{T as Oe}from"./trophy-DwBq0seQ.js";import{F as Le,T as Wt,a as Jt,b as L,c as _}from"./tabs-DooxgNMe.js";import{C as _e}from"./clock-CoIHouLg.js";import{U as de}from"./users-g7wC_f2u.js";import{h as Kt,R as Vt,u as Yt,F as Ht,S as ie,a as ne,b as re,c as oe,d as I}from"./select-DbQ1mIui.js";import{u as le}from"./index-vwNzuezL.js";import{B as A}from"./brain-S63MUrZ5.js";import{A as Xt}from"./arrow-left-kjpVZwKQ.js";import{S as ce,a as Te}from"./square-pen-gA21rsaK.js";import{T as Zt}from"./trash-2-6sREbtaE.js";import{C as es}from"./calendar-wL5beWtW.js";import{M as ts}from"./map-pin-E7KYTfTt.js";import"./index-C8gT3nWd.js";/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ss=[["circle",{cx:"16",cy:"4",r:"1",key:"1grugj"}],["path",{d:"m18 19 1-7-6 1",key:"r0i19z"}],["path",{d:"m5 8 3-3 5.5 3-2.36 3.5",key:"9ptxx2"}],["path",{d:"M4.24 14.5a5 5 0 0 0 6.88 6",key:"10kmtu"}],["path",{d:"M13.76 17.5a5 5 0 0 0-6.88-6",key:"2qq6rc"}]],as=me("accessibility",ss);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const is=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],qe=me("palette",is);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ns=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],rs=me("share-2",ns);function os({event:t,onUpdate:a,isLoading:c}){const{toast:i}=Re(),[o,d]=h.useState(!1),j=async l=>{d(!0);try{const m=await fetch(`/api/events/${t.id}/generate-copy`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:l}),credentials:"include"});if(!m.ok)throw new Error("Failed to generate copy");const k=await m.json();a({[l==="promotional"?"eventCopy":l==="welcome"?"welcomeMessage":l==="thankyou"?"thankYouMessage":"eventRules"]:k.copy}),i({title:"AI Copy Generated",description:`Generated ${l} content successfully!`})}catch{i({title:"Generation Failed",description:"Failed to generate AI copy. Please try again.",variant:"destructive"})}finally{d(!1)}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(f,{children:[e.jsx(N,{children:e.jsxs(b,{className:"flex items-center gap-2",children:[e.jsx(Gt,{className:"w-5 h-5"}),"Visual Branding"]})}),e.jsx(y,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(r,{htmlFor:"logoUrl",children:"Event Logo URL"}),e.jsx(p,{id:"logoUrl",placeholder:"https://example.com/logo.png",value:t.logoUrl||"",onChange:l=>a({logoUrl:l.target.value}),"data-testid":"input-logo-url"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Upload your event logo for branding"})]}),e.jsxs("div",{children:[e.jsx(r,{htmlFor:"backgroundImageUrl",children:"Background Image URL"}),e.jsx(p,{id:"backgroundImageUrl",placeholder:"https://example.com/background.jpg",value:t.backgroundImageUrl||"",onChange:l=>a({backgroundImageUrl:l.target.value}),"data-testid":"input-background-url"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Background image for event screens"})]})]})})]}),e.jsxs(f,{children:[e.jsx(N,{children:e.jsxs(b,{className:"flex items-center gap-2",children:[e.jsx(qe,{className:"w-5 h-5"}),"Color Theme"]})}),e.jsxs(y,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(r,{htmlFor:"primaryColor",children:"Primary Color"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(p,{id:"primaryColor",type:"color",value:t.primaryColor||"#7C2D12",onChange:l=>a({primaryColor:l.target.value}),className:"w-16 h-10 border rounded cursor-pointer","data-testid":"input-primary-color"}),e.jsx(p,{placeholder:"#7C2D12",value:t.primaryColor||"#7C2D12",onChange:l=>a({primaryColor:l.target.value}),className:"flex-1"})]})]}),e.jsxs("div",{children:[e.jsx(r,{htmlFor:"secondaryColor",children:"Secondary Color"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(p,{id:"secondaryColor",type:"color",value:t.secondaryColor||"#FEF3C7",onChange:l=>a({secondaryColor:l.target.value}),className:"w-16 h-10 border rounded cursor-pointer","data-testid":"input-secondary-color"}),e.jsx(p,{placeholder:"#FEF3C7",value:t.secondaryColor||"#FEF3C7",onChange:l=>a({secondaryColor:l.target.value}),className:"flex-1"})]})]}),e.jsxs("div",{children:[e.jsx(r,{htmlFor:"fontFamily",children:"Font Family"}),e.jsx(p,{id:"fontFamily",placeholder:"Inter",value:t.fontFamily||"Inter",onChange:l=>a({fontFamily:l.target.value}),"data-testid":"input-font-family"})]})]}),e.jsx("div",{className:"p-4 border rounded-lg",style:{backgroundColor:t.secondaryColor||"#FEF3C7",fontFamily:t.fontFamily||"Inter"},children:e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-xl font-bold mb-2",style:{color:t.primaryColor||"#7C2D12"},children:t.title||"Your Event Title"}),e.jsx(M,{style:{backgroundColor:t.primaryColor||"#7C2D12",color:"white"},children:"Theme Preview"})]})})]})]}),e.jsxs(f,{children:[e.jsx(N,{children:e.jsxs(b,{className:"flex items-center gap-2",children:[e.jsx(q,{className:"w-5 h-5"}),"AI-Generated Content"]})}),e.jsxs(y,{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(r,{htmlFor:"eventCopy",children:"Promotional Event Copy"}),e.jsxs(v,{type:"button",variant:"outline",size:"sm",onClick:()=>j("promotional"),disabled:o,"data-testid":"button-generate-promotional",children:[e.jsx(q,{className:"w-3 h-3 mr-1"}),o?"Generating...":"Generate"]})]}),e.jsx(D,{id:"eventCopy",placeholder:"AI will generate engaging promotional copy for your event...",value:t.eventCopy||"",onChange:l=>a({eventCopy:l.target.value}),rows:4,"data-testid":"textarea-event-copy"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(r,{htmlFor:"welcomeMessage",children:"Welcome Message"}),e.jsxs(v,{type:"button",variant:"outline",size:"sm",onClick:()=>j("welcome"),disabled:o,"data-testid":"button-generate-welcome",children:[e.jsx(q,{className:"w-3 h-3 mr-1"}),"Generate"]})]}),e.jsx(D,{id:"welcomeMessage",placeholder:"Welcome message shown to participants when they join...",value:t.welcomeMessage||"",onChange:l=>a({welcomeMessage:l.target.value}),rows:3,"data-testid":"textarea-welcome-message"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(r,{htmlFor:"thankYouMessage",children:"Thank You Message"}),e.jsxs(v,{type:"button",variant:"outline",size:"sm",onClick:()=>j("thankyou"),disabled:o,"data-testid":"button-generate-thankyou",children:[e.jsx(q,{className:"w-3 h-3 mr-1"}),"Generate"]})]}),e.jsx(D,{id:"thankYouMessage",placeholder:"Thank you message shown after event completion...",value:t.thankYouMessage||"",onChange:l=>a({thankYouMessage:l.target.value}),rows:3,"data-testid":"textarea-thank-you-message"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(r,{htmlFor:"eventRules",children:"Event Rules"}),e.jsxs(v,{type:"button",variant:"outline",size:"sm",onClick:()=>j("rules"),disabled:o,"data-testid":"button-generate-rules",children:[e.jsx(q,{className:"w-3 h-3 mr-1"}),"Generate"]})]}),e.jsx(D,{id:"eventRules",placeholder:"Clear rules and guidelines for participants...",value:t.eventRules||"",onChange:l=>a({eventRules:l.target.value}),rows:4,"data-testid":"textarea-event-rules"})]})]})]})]})}function ls({event:t,onUpdate:a,isLoading:c}){const i=m=>{if(!m)return{};if(typeof m=="string")try{return JSON.parse(m)}catch{return{}}return typeof m=="object"?m??{}:{}},o=(m,k)=>{const U={...i(t.socialLinks),[m]:k};a({socialLinks:JSON.stringify(U)})},d=(m,k)=>{const U={...i(t.sponsorInformation),[m]:k};a({sponsorInformation:JSON.stringify(U)})},j=i(t.socialLinks),l=i(t.sponsorInformation);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(f,{children:[e.jsx(N,{children:e.jsxs(b,{className:"flex items-center gap-2",children:[e.jsx(Ae,{className:"w-5 h-5"}),"Contact Information"]})}),e.jsxs(y,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(r,{htmlFor:"contactEmail",children:"Contact Email"}),e.jsx(p,{id:"contactEmail",type:"email",placeholder:"contact@example.com",value:t.contactEmail||"",onChange:m=>a({contactEmail:m.target.value}),"data-testid":"input-contact-email"})]}),e.jsxs("div",{children:[e.jsx(r,{htmlFor:"contactPhone",children:"Contact Phone"}),e.jsx(p,{id:"contactPhone",type:"tel",placeholder:"+1 (555) 123-4567",value:t.contactPhone||"",onChange:m=>a({contactPhone:m.target.value}),"data-testid":"input-contact-phone"})]})]}),e.jsxs("div",{children:[e.jsx(r,{htmlFor:"websiteUrl",children:"Website URL"}),e.jsx(p,{id:"websiteUrl",type:"url",placeholder:"https://yourorganization.com",value:t.websiteUrl||"",onChange:m=>a({websiteUrl:m.target.value}),"data-testid":"input-website-url"})]})]})]}),e.jsxs(f,{children:[e.jsx(N,{children:e.jsxs(b,{className:"flex items-center gap-2",children:[e.jsx(rs,{className:"w-5 h-5"}),"Social Media Links"]})}),e.jsx(y,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(r,{htmlFor:"facebook",children:"Facebook"}),e.jsx(p,{id:"facebook",placeholder:"https://facebook.com/yourpage",value:j.facebook||"",onChange:m=>o("facebook",m.target.value),"data-testid":"input-facebook"})]}),e.jsxs("div",{children:[e.jsx(r,{htmlFor:"twitter",children:"Twitter/X"}),e.jsx(p,{id:"twitter",placeholder:"https://twitter.com/yourhandle",value:j.twitter||"",onChange:m=>o("twitter",m.target.value),"data-testid":"input-twitter"})]}),e.jsxs("div",{children:[e.jsx(r,{htmlFor:"instagram",children:"Instagram"}),e.jsx(p,{id:"instagram",placeholder:"https://instagram.com/yourhandle",value:j.instagram||"",onChange:m=>o("instagram",m.target.value),"data-testid":"input-instagram"})]}),e.jsxs("div",{children:[e.jsx(r,{htmlFor:"linkedin",children:"LinkedIn"}),e.jsx(p,{id:"linkedin",placeholder:"https://linkedin.com/company/yourorg",value:j.linkedin||"",onChange:m=>o("linkedin",m.target.value),"data-testid":"input-linkedin"})]})]})})]}),e.jsxs(f,{children:[e.jsx(N,{children:e.jsxs(b,{className:"flex items-center gap-2",children:[e.jsx(Me,{className:"w-5 h-5"}),"Sponsor Information"]})}),e.jsxs(y,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(r,{htmlFor:"sponsorName",children:"Main Sponsor Name"}),e.jsx(p,{id:"sponsorName",placeholder:"Sponsor Company Name",value:l.name||"",onChange:m=>d("name",m.target.value),"data-testid":"input-sponsor-name"})]}),e.jsxs("div",{children:[e.jsx(r,{htmlFor:"sponsorLogoUrl",children:"Sponsor Logo URL"}),e.jsx(p,{id:"sponsorLogoUrl",placeholder:"https://sponsor.com/logo.png",value:l.logoUrl||"",onChange:m=>d("logoUrl",m.target.value),"data-testid":"input-sponsor-logo"})]})]}),e.jsxs("div",{children:[e.jsx(r,{htmlFor:"sponsorWebsite",children:"Sponsor Website"}),e.jsx(p,{id:"sponsorWebsite",type:"url",placeholder:"https://sponsor.com",value:l.website||"",onChange:m=>d("website",m.target.value),"data-testid":"input-sponsor-website"})]}),e.jsxs("div",{children:[e.jsx(r,{htmlFor:"sponsorDescription",children:"Sponsor Description"}),e.jsx(D,{id:"sponsorDescription",placeholder:"Brief description of the sponsor and their involvement...",value:l.description||"",onChange:m=>d("description",m.target.value),rows:3,"data-testid":"textarea-sponsor-description"})]})]})]}),e.jsxs(f,{children:[e.jsx(N,{children:e.jsxs(b,{className:"flex items-center gap-2",children:[e.jsx(Bt,{className:"w-5 h-5"}),"Policies & Terms"]})}),e.jsxs(y,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(r,{htmlFor:"cancellationPolicy",children:"Cancellation Policy"}),e.jsx(D,{id:"cancellationPolicy",placeholder:"Explain your event cancellation policy...",value:t.cancellationPolicy||"",onChange:m=>a({cancellationPolicy:m.target.value}),rows:3,"data-testid":"textarea-cancellation-policy"})]}),e.jsxs("div",{children:[e.jsx(r,{htmlFor:"refundPolicy",children:"Refund Policy"}),e.jsx(D,{id:"refundPolicy",placeholder:"Explain your refund policy for participants...",value:t.refundPolicy||"",onChange:m=>a({refundPolicy:m.target.value}),rows:3,"data-testid":"textarea-refund-policy"})]})]})]})]})}function cs({event:t,onUpdate:a,isLoading:c}){return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(f,{children:[e.jsx(N,{children:e.jsxs(b,{className:"flex items-center gap-2",children:[e.jsx(Oe,{className:"w-5 h-5"}),"Prize Information"]})}),e.jsx(y,{className:"space-y-4",children:e.jsxs("div",{children:[e.jsx(r,{htmlFor:"prizeInformation",children:"Prize Details"}),e.jsx(D,{id:"prizeInformation",placeholder:"Describe the prizes and rewards for participants...",value:t.prizeInformation||"",onChange:i=>a({prizeInformation:i.target.value}),rows:4,"data-testid":"textarea-prize-information"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Detail what winners can expect to receive"})]})})]}),e.jsxs(f,{children:[e.jsx(N,{children:e.jsxs(b,{className:"flex items-center gap-2",children:[e.jsx(Le,{className:"w-5 h-5"}),"Event Instructions"]})}),e.jsxs(y,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(r,{htmlFor:"specialInstructions",children:"Special Instructions"}),e.jsx(D,{id:"specialInstructions",placeholder:"Any special instructions for participants...",value:t.specialInstructions||"",onChange:i=>a({specialInstructions:i.target.value}),rows:3,"data-testid":"textarea-special-instructions"})]}),e.jsxs("div",{children:[e.jsx(r,{htmlFor:"technicalRequirements",children:"Technical Requirements"}),e.jsx(D,{id:"technicalRequirements",placeholder:"Device requirements, internet speed, software needed...",value:t.technicalRequirements||"",onChange:i=>a({technicalRequirements:i.target.value}),rows:3,"data-testid":"textarea-technical-requirements"})]})]})]}),e.jsxs(f,{children:[e.jsx(N,{children:e.jsxs(b,{className:"flex items-center gap-2",children:[e.jsx(_e,{className:"w-5 h-5"}),"Registration & Timing"]})}),e.jsx(y,{className:"space-y-4",children:e.jsxs("div",{children:[e.jsx(r,{htmlFor:"registrationDeadline",children:"Registration Deadline"}),e.jsx(p,{id:"registrationDeadline",type:"datetime-local",value:t.registrationDeadline?new Date(t.registrationDeadline).toISOString().slice(0,16):"",onChange:i=>a({registrationDeadline:i.target.value?new Date(i.target.value).toISOString():null}),"data-testid":"input-registration-deadline"})]})})]}),e.jsxs(f,{children:[e.jsx(N,{children:e.jsxs(b,{className:"flex items-center gap-2",children:[e.jsx(de,{className:"w-5 h-5"}),"Participant Requirements"]})}),e.jsx(y,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(r,{htmlFor:"ageRestrictions",children:"Age Restrictions"}),e.jsx(p,{id:"ageRestrictions",placeholder:"e.g., 18+ or All ages welcome",value:t.ageRestrictions||"",onChange:i=>a({ageRestrictions:i.target.value}),"data-testid":"input-age-restrictions"})]}),e.jsxs("div",{children:[e.jsx(r,{htmlFor:"dressCode",children:"Dress Code"}),e.jsx(p,{id:"dressCode",placeholder:"e.g., Business casual, Themed attire",value:t.dressCode||"",onChange:i=>a({dressCode:i.target.value}),"data-testid":"input-dress-code"})]})]})})]}),e.jsxs(f,{children:[e.jsx(N,{children:e.jsxs(b,{className:"flex items-center gap-2",children:[e.jsx(as,{className:"w-5 h-5"}),"Accessibility & Accommodations"]})}),e.jsxs(y,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(r,{htmlFor:"accessibilityInfo",children:"Accessibility Information"}),e.jsx(D,{id:"accessibilityInfo",placeholder:"Accessibility features and accommodations available...",value:t.accessibilityInfo||"",onChange:i=>a({accessibilityInfo:i.target.value}),rows:3,"data-testid":"textarea-accessibility-info"})]}),e.jsxs("div",{children:[e.jsx(r,{htmlFor:"dietaryAccommodations",children:"Dietary Accommodations"}),e.jsx(D,{id:"dietaryAccommodations",placeholder:"Food allergies, dietary restrictions, special meal options...",value:t.dietaryAccommodations||"",onChange:i=>a({dietaryAccommodations:i.target.value}),rows:3,"data-testid":"textarea-dietary-accommodations"})]})]})]}),e.jsxs(f,{children:[e.jsx(N,{children:e.jsxs(b,{className:"flex items-center gap-2",children:[e.jsx(de,{className:"w-5 h-5"}),"Event Settings"]})}),e.jsxs(y,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"allowParticipants",checked:t.allowParticipants||!1,onChange:i=>a({allowParticipants:i.target.checked}),className:"rounded border-gray-300","data-testid":"checkbox-allow-participants","aria-describedby":"allowParticipants-description"}),e.jsx(r,{htmlFor:"allowParticipants",children:"Allow Participants"})]}),e.jsx("p",{id:"allowParticipants-description",className:"text-sm text-gray-500 mt-1",children:"When enabled, participants can join teams and compete in the trivia. When disabled, this becomes a content-focused presentation without participant interaction."})]})]})]})}var ee="Dialog",[ze,ta]=Pt(ee),[ds,E]=ze(ee),Ue=t=>{const{__scopeDialog:a,children:c,open:i,defaultOpen:o,onOpenChange:d,modal:j=!0}=t,l=h.useRef(null),m=h.useRef(null),[k,P]=Et({prop:i,defaultProp:o??!1,onChange:d,caller:ee});return e.jsx(ds,{scope:a,triggerRef:l,contentRef:m,contentId:le(),titleId:le(),descriptionId:le(),open:k,onOpenChange:P,onOpenToggle:h.useCallback(()=>P(U=>!U),[P]),modal:j,children:c})};Ue.displayName=ee;var $e="DialogTrigger",ms=h.forwardRef((t,a)=>{const{__scopeDialog:c,...i}=t,o=E($e,c),d=he(a,o.triggerRef);return e.jsx(V.button,{type:"button","aria-haspopup":"dialog","aria-expanded":o.open,"aria-controls":o.contentId,"data-state":ge(o.open),...i,ref:d,onClick:K(t.onClick,o.onOpenToggle)})});ms.displayName=$e;var xe="DialogPortal",[us,Ge]=ze(xe,{forceMount:void 0}),Qe=t=>{const{__scopeDialog:a,forceMount:c,children:i,container:o}=t,d=E(xe,a);return e.jsx(us,{scope:a,forceMount:c,children:h.Children.map(i,j=>e.jsx(ue,{present:c||d.open,children:e.jsx(Tt,{asChild:!0,container:o,children:j})}))})};Qe.displayName=xe;var Z="DialogOverlay",Be=h.forwardRef((t,a)=>{const c=Ge(Z,t.__scopeDialog),{forceMount:i=c.forceMount,...o}=t,d=E(Z,t.__scopeDialog);return d.modal?e.jsx(ue,{present:i||d.open,children:e.jsx(xs,{...o,ref:a})}):null});Be.displayName=Z;var hs=Rt("DialogOverlay.RemoveScroll"),xs=h.forwardRef((t,a)=>{const{__scopeDialog:c,...i}=t,o=E(Z,c);return e.jsx(Vt,{as:hs,allowPinchZoom:!0,shards:[o.contentRef],children:e.jsx(V.div,{"data-state":ge(o.open),...i,ref:a,style:{pointerEvents:"auto",...i.style}})})}),z="DialogContent",We=h.forwardRef((t,a)=>{const c=Ge(z,t.__scopeDialog),{forceMount:i=c.forceMount,...o}=t,d=E(z,t.__scopeDialog);return e.jsx(ue,{present:i||d.open,children:d.modal?e.jsx(ps,{...o,ref:a}):e.jsx(gs,{...o,ref:a})})});We.displayName=z;var ps=h.forwardRef((t,a)=>{const c=E(z,t.__scopeDialog),i=h.useRef(null),o=he(a,c.contentRef,i);return h.useEffect(()=>{const d=i.current;if(d)return Kt(d)},[]),e.jsx(Je,{...t,ref:o,trapFocus:c.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:K(t.onCloseAutoFocus,d=>{d.preventDefault(),c.triggerRef.current?.focus()}),onPointerDownOutside:K(t.onPointerDownOutside,d=>{const j=d.detail.originalEvent,l=j.button===0&&j.ctrlKey===!0;(j.button===2||l)&&d.preventDefault()}),onFocusOutside:K(t.onFocusOutside,d=>d.preventDefault())})}),gs=h.forwardRef((t,a)=>{const c=E(z,t.__scopeDialog),i=h.useRef(!1),o=h.useRef(!1);return e.jsx(Je,{...t,ref:a,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:d=>{t.onCloseAutoFocus?.(d),d.defaultPrevented||(i.current||c.triggerRef.current?.focus(),d.preventDefault()),i.current=!1,o.current=!1},onInteractOutside:d=>{t.onInteractOutside?.(d),d.defaultPrevented||(i.current=!0,d.detail.originalEvent.type==="pointerdown"&&(o.current=!0));const j=d.target;c.triggerRef.current?.contains(j)&&d.preventDefault(),d.detail.originalEvent.type==="focusin"&&o.current&&d.preventDefault()}})}),Je=h.forwardRef((t,a)=>{const{__scopeDialog:c,trapFocus:i,onOpenAutoFocus:o,onCloseAutoFocus:d,...j}=t,l=E(z,c),m=h.useRef(null),k=he(a,m);return Yt(),e.jsxs(e.Fragment,{children:[e.jsx(Ht,{asChild:!0,loop:!0,trapped:i,onMountAutoFocus:o,onUnmountAutoFocus:d,children:e.jsx(At,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":ge(l.open),...j,ref:k,onDismiss:()=>l.onOpenChange(!1)})}),e.jsxs(e.Fragment,{children:[e.jsx(js,{titleId:l.titleId}),e.jsx(fs,{contentRef:m,descriptionId:l.descriptionId})]})]})}),pe="DialogTitle",Ke=h.forwardRef((t,a)=>{const{__scopeDialog:c,...i}=t,o=E(pe,c);return e.jsx(V.h2,{id:o.titleId,...i,ref:a})});Ke.displayName=pe;var Ve="DialogDescription",Ye=h.forwardRef((t,a)=>{const{__scopeDialog:c,...i}=t,o=E(Ve,c);return e.jsx(V.p,{id:o.descriptionId,...i,ref:a})});Ye.displayName=Ve;var He="DialogClose",Xe=h.forwardRef((t,a)=>{const{__scopeDialog:c,...i}=t,o=E(He,c);return e.jsx(V.button,{type:"button",...i,ref:a,onClick:K(t.onClick,()=>o.onOpenChange(!1))})});Xe.displayName=He;function ge(t){return t?"open":"closed"}var Ze="DialogTitleWarning",[sa,et]=Mt(Ze,{contentName:z,titleName:pe,docsSlug:"dialog"}),js=({titleId:t})=>{const a=et(Ze),c=`\`${a.contentName}\` requires a \`${a.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${a.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${a.docsSlug}`;return h.useEffect(()=>{t&&(document.getElementById(t)||console.error(c))},[c,t]),null},vs="DialogDescriptionWarning",fs=({contentRef:t,descriptionId:a})=>{const i=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${et(vs).contentName}}.`;return h.useEffect(()=>{const o=t.current?.getAttribute("aria-describedby");a&&o&&(document.getElementById(a)||console.warn(i))},[i,t,a]),null},ys=Ue,Ns=Qe,tt=Be,st=We,at=Ke,it=Ye,bs=Xe;const ws=ys,Cs=Ns,nt=h.forwardRef(({className:t,...a},c)=>e.jsx(tt,{ref:c,className:Q("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...a}));nt.displayName=tt.displayName;const rt=h.forwardRef(({className:t,children:a,...c},i)=>e.jsxs(Cs,{children:[e.jsx(nt,{}),e.jsxs(st,{ref:i,className:Q("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...c,children:[a,e.jsxs(bs,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[e.jsx(Ot,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));rt.displayName=st.displayName;const ot=({className:t,...a})=>e.jsx("div",{className:Q("flex flex-col space-y-1.5 text-center sm:text-left",t),...a});ot.displayName="DialogHeader";const lt=({className:t,...a})=>e.jsx("div",{className:Q("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...a});lt.displayName="DialogFooter";const ct=h.forwardRef(({className:t,...a},c)=>e.jsx(at,{ref:c,className:Q("text-lg font-semibold leading-none tracking-tight",t),...a}));ct.displayName=at.displayName;const dt=h.forwardRef(({className:t,...a},c)=>e.jsx(it,{ref:c,className:Q("text-sm text-muted-foreground",t),...a}));dt.displayName=it.displayName;console.log("event-manage.tsx module loaded!");function aa({eventId:t}={}){console.log("EventManage component is mounting!");const[,a]=Lt("/events/:id/manage");console.log("Route params:",a);const[,c]=_t(),{toast:i}=Re(),o=qt(),[d,j]=h.useState(null),[l,m]=h.useState(!1),[k,P]=h.useState(""),[U,ks]=h.useState(""),[je,mt]=h.useState(!1),{data:ut,isLoading:ve,error:ht}=X({queryKey:["/api/auth/me"],retry:!1}),w=t||a?.id;if(console.log("Extracted eventId:",w,"from propEventId:",t,"params:",a),console.log("EventManage - eventId:",w,"propEventId:",t,"params:",a),ht||!ve&&!ut)return c("/"),null;if(ve)return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-wine-50 to-champagne-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 wine-gradient rounded-2xl flex items-center justify-center mx-auto mb-4",children:e.jsx(A,{className:"text-champagne-400 h-8 w-8 animate-pulse"})}),e.jsx("p",{className:"text-wine-700",children:"Loading..."})]})});if(!w)return console.error("No eventId provided to EventManage component"),e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-wine-50 to-champagne-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 wine-gradient rounded-2xl flex items-center justify-center mx-auto mb-4",children:e.jsx(A,{className:"text-champagne-400 h-8 w-8"})}),e.jsx("h1",{className:"text-2xl font-bold text-wine-800 mb-2",children:"Event Not Found"}),e.jsx("p",{className:"text-wine-600 mb-4",children:"No event ID was provided."}),e.jsx(v,{onClick:()=>c("/dashboard"),variant:"outline",children:"Return to Dashboard"})]})});const{data:n,isLoading:xt,error:Ds}=X({queryKey:["/api/events",w],enabled:!!w,retry:!1}),{data:te=[],isLoading:Fs}=X({queryKey:["/api/events",w,"questions"],enabled:!!w,retry:!1}),{data:se=[],isLoading:pt}=X({queryKey:["/api/events",w,"fun-facts"],enabled:!!w,retry:!1}),{register:O,handleSubmit:gt,setValue:B,watch:fe,reset:ye,formState:{errors:Y,isDirty:jt}}=$t({defaultValues:{title:n?.title||"",description:n?.description||"",eventType:n?.eventType||"",maxParticipants:n?.maxParticipants||50,difficulty:n?.difficulty||"mixed",eventDate:n?.eventDate?Ee(n.eventDate):"",eventTime:n?.eventTime||"",location:n?.location||"",sponsoringOrganization:n?.sponsoringOrganization||""}});h.useEffect(()=>{n&&ye({title:n.title||"",description:n.description||"",eventType:n.eventType||"",maxParticipants:n.maxParticipants||50,difficulty:n.difficulty||"mixed",eventDate:n.eventDate?Ee(n.eventDate):"",eventTime:n.eventTime||"",location:n.location||"",sponsoringOrganization:n.sponsoringOrganization||"",logoUrl:n.logoUrl||void 0,backgroundImageUrl:n.backgroundImageUrl||void 0,eventCopy:n.eventCopy||void 0,welcomeMessage:n.welcomeMessage||void 0,thankYouMessage:n.thankYouMessage||void 0,primaryColor:n.primaryColor||void 0,secondaryColor:n.secondaryColor||void 0,fontFamily:n.fontFamily||void 0,contactEmail:n.contactEmail||void 0,contactPhone:n.contactPhone||void 0,websiteUrl:n.websiteUrl||void 0,socialLinks:n.socialLinks||void 0,prizeInformation:n.prizeInformation||void 0,eventRules:n.eventRules||void 0,specialInstructions:n.specialInstructions||void 0,accessibilityInfo:n.accessibilityInfo||void 0,dietaryAccommodations:n.dietaryAccommodations||void 0,dressCode:n.dressCode||void 0,ageRestrictions:n.ageRestrictions||void 0,technicalRequirements:n.technicalRequirements||void 0,registrationDeadline:n.registrationDeadline||void 0,cancellationPolicy:n.cancellationPolicy||void 0,refundPolicy:n.refundPolicy||void 0,sponsorInformation:n.sponsorInformation||void 0,allowParticipants:n.allowParticipants||!1})},[n,ye]);const $=J({mutationFn:async s=>{const x=await fetch(`/api/events/${w}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(s),credentials:"include"});if(!x.ok)try{const C=await x.json();throw new Error(C.error||"Failed to update event")}catch{throw new Error("Failed to update event")}return x.json()},onSuccess:()=>{o.invalidateQueries({queryKey:["/api/events",w]}),i({title:"Event Updated",description:"Event details saved successfully."})},onError:s=>{i({title:"Update Failed",description:s.message||"An error occurred while saving the event.",variant:"destructive"})}}),W=J({mutationFn:async s=>{const x=await fetch(`/api/events/${w}/status`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:s}),credentials:"include"});if(!x.ok)try{const C=await x.json();throw new Error(C.error||"Failed to update status")}catch{throw new Error("Failed to update status")}return x.json()},onSuccess:()=>{o.invalidateQueries({queryKey:["/api/events",w]}),i({title:"Status Updated",description:"Event status changed."})},onError:s=>{i({title:"Status Update Failed",description:s.message||"Could not update event status.",variant:"destructive"})}}),vt=s=>{const x={...s,eventDate:s.eventDate?Ut(s.eventDate,s.eventTime).toISOString():s.eventDate};$.mutate(x)};function ft({question:s,onSave:x,onCancel:C,isLoading:T}){const[g,S]=h.useState({question:s.question||"",correctAnswer:s.correctAnswer||"",options:Array.isArray(s.options)?[...s.options]:[],points:s.points||100,timeLimit:s.timeLimit||30,difficulty:s.difficulty||"medium",category:s.category||"",explanation:s.explanation||"",orderIndex:s.orderIndex||1,backgroundImageUrl:s.backgroundImageUrl||""}),[ae,bt]=h.useState(""),[we,wt]=h.useState([]),[Ce,ke]=h.useState(!1),[De,Fe]=h.useState(null),[R,Ie]=h.useState(null),[Ct,Se]=h.useState(!1),kt=(u,F)=>{const G=[...g.options];G[u]=F,S({...g,options:G})},Dt=async()=>{if(ae.trim()){ke(!0),Fe(null);try{const u=await fetch(`/api/unsplash/search?query=${encodeURIComponent(ae)}&perPage=12`);if(!u.ok){const G=await u.json();throw new Error(G.error||"Search failed")}const F=await u.json();wt(F.results||[])}catch(u){Fe(u.message)}finally{ke(!1)}}},Ft=u=>{Ie(u),S(F=>({...F,backgroundImageUrl:u.urls.regular}))},It=async()=>{if(R?.links?.download_location)try{Se(!0),await fetch("/api/unsplash/track-download",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({downloadUrl:R.links.download_location})})}catch{}finally{Se(!1)}},St=async()=>{const u={...s,question:g.question,correctAnswer:g.correctAnswer,options:g.options,points:g.points,timeLimit:g.timeLimit,difficulty:g.difficulty,category:g.category,explanation:g.explanation,orderIndex:g.orderIndex,backgroundImageUrl:g.backgroundImageUrl||null};x(u),It()};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(r,{children:"Question"}),e.jsx(D,{value:g.question,onChange:u=>S({...g,question:u.target.value}),className:"mt-1",rows:3,"data-testid":"textarea-edit-question"})]}),s.type==="multiple_choice"&&e.jsxs("div",{children:[e.jsx(r,{children:"Options"}),e.jsx("div",{className:"space-y-2 mt-1",children:g.options.map((u,F)=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx("span",{className:"w-8 h-10 bg-gray-100 rounded flex items-center justify-center text-sm font-medium",children:String.fromCharCode(65+F)}),e.jsx(p,{value:u,onChange:G=>kt(F,G.target.value),placeholder:`Option ${String.fromCharCode(65+F)}`,"data-testid":`input-edit-option-${F}`})]},F))})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(r,{children:"Correct Answer"}),e.jsx(p,{value:g.correctAnswer,onChange:u=>S({...g,correctAnswer:u.target.value}),className:"mt-1","data-testid":"input-edit-correct-answer"})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Points"}),e.jsx(p,{type:"number",value:g.points,onChange:u=>S({...g,points:parseInt(u.target.value)||0}),className:"mt-1",min:10,max:500,"data-testid":"input-edit-points"})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Time Limit (s)"}),e.jsx(p,{type:"number",value:g.timeLimit,onChange:u=>S({...g,timeLimit:parseInt(u.target.value)||30}),className:"mt-1",min:5,max:300,"data-testid":"input-edit-timeLimit"})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Difficulty"}),e.jsxs(ie,{value:g.difficulty,onValueChange:u=>S({...g,difficulty:u}),children:[e.jsx(ne,{className:"mt-1","data-testid":"select-edit-difficulty",children:e.jsx(re,{})}),e.jsxs(oe,{children:[e.jsx(I,{value:"easy",children:"Easy"}),e.jsx(I,{value:"medium",children:"Medium"}),e.jsx(I,{value:"hard",children:"Hard"})]})]})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Category"}),e.jsx(p,{value:g.category,onChange:u=>S({...g,category:u.target.value}),className:"mt-1",placeholder:"wine, geography, etc","data-testid":"input-edit-category"})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Order #"}),e.jsx(p,{type:"number",value:g.orderIndex,onChange:u=>S({...g,orderIndex:parseInt(u.target.value)||1}),className:"mt-1",min:1,"data-testid":"input-edit-orderIndex"})]})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Explanation (shown after answering)"}),e.jsx(D,{value:g.explanation,onChange:u=>S({...g,explanation:u.target.value}),rows:3,className:"mt-1","data-testid":"textarea-edit-explanation"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(r,{children:"Background Image"}),g.backgroundImageUrl&&e.jsx(v,{type:"button",variant:"outline",size:"sm",onClick:()=>{S({...g,backgroundImageUrl:""}),Ie(null)},"data-testid":"button-remove-image",children:"Remove"})]}),g.backgroundImageUrl?e.jsx("div",{className:"relative",children:e.jsx("img",{src:g.backgroundImageUrl,alt:"Selected background",className:"rounded-md w-full h-40 object-cover border","data-testid":"image-selected-preview"})}):e.jsx("p",{className:"text-sm text-gray-500",children:"No image selected."}),e.jsxs("div",{className:"border rounded-md p-3 space-y-3 bg-gray-50",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(p,{placeholder:"Search Unsplash (e.g., Oregon coast)",value:ae,onChange:u=>bt(u.target.value),"data-testid":"input-unsplash-query"}),e.jsx(v,{type:"button",onClick:Dt,disabled:Ce,"data-testid":"button-unsplash-search",children:Ce?"Searching...":"Search"})]}),De&&e.jsx("p",{className:"text-sm text-red-600","data-testid":"error-unsplash",children:De}),we.length>0&&e.jsx("div",{className:"grid grid-cols-4 gap-2 max-h-48 overflow-y-auto","data-testid":"grid-unsplash-results",children:we.map((u,F)=>e.jsxs("button",{type:"button",onClick:()=>Ft(u),className:`group relative border rounded-md overflow-hidden focus:outline-none ${R?.id===u.id?"ring-2 ring-wine-500":"hover:ring-2 hover:ring-wine-300"}`,"data-testid":`unsplash-result-${F}`,children:[e.jsx("img",{src:u.urls.thumb,alt:u.alt_description||u.description||"img",className:"w-full h-16 object-cover"}),R?.id===u.id&&e.jsx("span",{className:"absolute inset-0 bg-wine-600/40 flex items-center justify-center text-white text-xs font-medium",children:"Selected"})]},u.id))}),R&&e.jsxs("p",{className:"text-[11px] text-gray-600","data-testid":"text-unsplash-attribution",children:["Photo by ",e.jsx("a",{className:"underline",target:"_blank",rel:"noreferrer",href:`${R.user.links.html}?utm_source=TriviaSpark&utm_medium=referral`,children:R.user.name})," on ",e.jsx("a",{className:"underline",target:"_blank",rel:"noreferrer",href:`${R.links.html}?utm_source=TriviaSpark&utm_medium=referral`,children:"Unsplash"})]})]})]}),e.jsxs(lt,{className:"pt-2",children:[e.jsx(v,{onClick:St,disabled:T||Ct,className:"flex-1","data-testid":"button-save-question",children:T?e.jsxs(e.Fragment,{children:[e.jsx(ce,{className:"mr-2 h-4 w-4 animate-pulse"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ce,{className:"mr-2 h-4 w-4"}),"Save Changes"]})}),e.jsx(v,{onClick:C,variant:"outline",disabled:T,"data-testid":"button-cancel-edit",children:"Cancel"})]})]})}const H=s=>{W.mutate(s)},yt=J({mutationFn:async({topic:s,type:x})=>{const C=await fetch("/api/questions/generate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({eventId:w,topic:s,type:x,count:1}),credentials:"include"});if(!C.ok){const T=await C.json();throw new Error(T.error||"Failed to generate question")}return C.json()},onSuccess:()=>{o.invalidateQueries({queryKey:["/api/events",w,"questions"]}),P(""),i({title:"Question Generated",description:"AI question has been added to your event."})},onError:s=>{i({title:"Generation Failed",description:s.message,variant:"destructive"})}}),Ne=J({mutationFn:async s=>{const x=await fetch(`/api/questions/${s.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(s),credentials:"include"});if(!x.ok){const C=await x.json();throw new Error(C.error||"Failed to update question")}return x.json()},onSuccess:()=>{o.invalidateQueries({queryKey:["/api/events",w,"questions"]}),j(null),i({title:"Question Updated",description:"Question has been saved successfully."})},onError:s=>{i({title:"Update Failed",description:s.message,variant:"destructive"})}}),Nt=J({mutationFn:async s=>{const x=await fetch(`/api/questions/${s}`,{method:"DELETE",credentials:"include"});if(!x.ok){const C=await x.json();throw new Error(C.error||"Failed to delete question")}},onSuccess:()=>{o.invalidateQueries({queryKey:["/api/events",w,"questions"]}),i({title:"Question Deleted",description:"Question has been removed from your event."})},onError:s=>{i({title:"Delete Failed",description:s.message,variant:"destructive"})}}),be=s=>{if(!k.trim()){i({title:"Topic Required",description:"Please enter a topic for the AI question.",variant:"destructive"});return}m(!0),yt.mutate({topic:k,type:s},{onSettled:()=>m(!1)})};return xt?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-wine-50 to-champagne-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 wine-gradient rounded-2xl flex items-center justify-center mx-auto mb-4",children:e.jsx(A,{className:"text-champagne-400 h-8 w-8 animate-pulse"})}),e.jsx("p",{className:"text-wine-700",children:"Loading event..."})]})}):n?e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-wine-50 to-champagne-50",children:[e.jsx("div",{className:"wine-gradient shadow-lg",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsxs(v,{variant:"ghost",onClick:()=>c("/dashboard"),className:"text-white hover:bg-white/10 mr-4","data-testid":"button-back",children:[e.jsx(Xt,{className:"mr-2 h-4 w-4"}),"Back"]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-white","data-testid":"text-page-title",children:"Manage Event"}),e.jsx("p",{className:"text-champagne-200","data-testid":"text-event-title",children:n.title})]})]}),e.jsx(M,{variant:n.status==="active"?"default":"secondary",className:`text-sm ${n.status==="active"?"bg-emerald-100 text-emerald-800":""}`,"data-testid":"badge-event-status",children:n.status})]})})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs(Wt,{defaultValue:"details",className:"space-y-6",children:[e.jsxs(Jt,{className:"grid w-full grid-cols-7","data-testid":"tabs-event-management",children:[e.jsxs(L,{value:"details","data-testid":"tab-details",children:[e.jsx(Qt,{className:"mr-2 h-4 w-4"}),"Details"]}),e.jsxs(L,{value:"branding","data-testid":"tab-branding",children:[e.jsx(qe,{className:"mr-2 h-4 w-4"}),"Branding"]}),e.jsxs(L,{value:"event-info","data-testid":"tab-event-info",children:[e.jsx(Le,{className:"mr-2 h-4 w-4"}),"Event Info"]}),e.jsxs(L,{value:"contact","data-testid":"tab-contact",children:[e.jsx(Ae,{className:"mr-2 h-4 w-4"}),"Contact"]}),e.jsxs(L,{value:"trivia","data-testid":"tab-trivia",children:[e.jsx(A,{className:"mr-2 h-4 w-4"}),"Trivia"]}),e.jsxs(L,{value:"funfacts","data-testid":"tab-funfacts",children:[e.jsx(q,{className:"mr-2 h-4 w-4"}),"Fun Facts"]}),e.jsxs(L,{value:"status","data-testid":"tab-status",children:[e.jsx(Oe,{className:"mr-2 h-4 w-4"}),"Status"]})]}),e.jsx(_,{value:"branding",children:e.jsx(os,{event:n,onUpdate:s=>{Object.keys(s).forEach(x=>{B(x,s[x])})},isLoading:$.isPending})}),e.jsx(_,{value:"event-info",children:e.jsx(cs,{event:n,onUpdate:s=>{Object.keys(s).forEach(x=>{B(x,s[x])})},isLoading:$.isPending})}),e.jsx(_,{value:"contact",children:e.jsx(ls,{event:n,onUpdate:s=>{Object.keys(s).forEach(x=>{B(x,s[x])})},isLoading:$.isPending})}),e.jsx(_,{value:"details",children:e.jsxs(f,{className:"trivia-card","data-testid":"card-event-details",children:[e.jsx(N,{children:e.jsx(b,{className:"wine-text",children:"Edit Event Details"})}),e.jsx(y,{children:e.jsxs("form",{onSubmit:gt(vt),className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(r,{htmlFor:"title",children:"Event Title *"}),e.jsx(p,{id:"title",...O("title",{required:"Title is required"}),className:"mt-1","data-testid":"input-title"}),Y.title&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:Y.title.message})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(r,{htmlFor:"description",children:"Description"}),e.jsx(D,{id:"description",...O("description"),rows:3,className:"mt-1","data-testid":"input-description"})]}),e.jsxs("div",{children:[e.jsx(r,{htmlFor:"eventType",children:"Event Type *"}),e.jsxs(ie,{value:fe("eventType")||"",onValueChange:s=>B("eventType",s,{shouldDirty:!0}),children:[e.jsx(ne,{className:"mt-1","data-testid":"select-event-type",children:e.jsx(re,{placeholder:"Select event type"})}),e.jsxs(oe,{children:[e.jsx(I,{value:"wine-dinner",children:"Wine Dinner"}),e.jsx(I,{value:"corporate",children:"Corporate Event"}),e.jsx(I,{value:"party",children:"Party"}),e.jsx(I,{value:"educational",children:"Educational"}),e.jsx(I,{value:"fundraiser",children:"Fundraiser"})]})]})]}),e.jsxs("div",{children:[e.jsx(r,{htmlFor:"difficulty",children:"Difficulty"}),e.jsxs(ie,{value:fe("difficulty")||"",onValueChange:s=>B("difficulty",s,{shouldDirty:!0}),children:[e.jsx(ne,{className:"mt-1","data-testid":"select-difficulty",children:e.jsx(re,{placeholder:"Select difficulty"})}),e.jsxs(oe,{children:[e.jsx(I,{value:"easy",children:"Easy"}),e.jsx(I,{value:"medium",children:"Medium"}),e.jsx(I,{value:"hard",children:"Hard"}),e.jsx(I,{value:"mixed",children:"Mixed"})]})]})]}),e.jsxs("div",{children:[e.jsx(r,{htmlFor:"maxParticipants",children:"Max Participants"}),e.jsx(p,{id:"maxParticipants",type:"number",...O("maxParticipants",{required:"Max participants is required",min:{value:1,message:"Must be at least 1"},max:{value:500,message:"Maximum 500 participants"},valueAsNumber:!0}),className:"mt-1","data-testid":"input-max-participants"}),Y.maxParticipants&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:Y.maxParticipants.message})]}),e.jsxs("div",{children:[e.jsx(r,{htmlFor:"eventDate",children:"Event Date"}),e.jsx(p,{id:"eventDate",type:"date",...O("eventDate"),className:"mt-1","data-testid":"input-event-date"})]}),e.jsxs("div",{children:[e.jsx(r,{htmlFor:"eventTime",children:"Event Time"}),e.jsx(p,{id:"eventTime",...O("eventTime"),placeholder:"e.g., 7:00 PM",className:"mt-1","data-testid":"input-event-time"})]}),e.jsxs("div",{children:[e.jsx(r,{htmlFor:"location",children:"Location"}),e.jsx(p,{id:"location",...O("location"),placeholder:"Event venue",className:"mt-1","data-testid":"input-location"})]}),e.jsxs("div",{children:[e.jsx(r,{htmlFor:"sponsoringOrganization",children:"Sponsoring Organization"}),e.jsx(p,{id:"sponsoringOrganization",...O("sponsoringOrganization"),placeholder:"Organization name",className:"mt-1","data-testid":"input-sponsoring-org"})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(v,{type:"submit",disabled:$.isPending||!jt,className:"trivia-button-primary","data-testid":"button-save-event",children:$.isPending?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin mr-2 h-4 w-4 border-2 border-white border-t-transparent rounded-full"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ce,{className:"mr-2 h-4 w-4"}),"Save Changes"]})})})]})})]})}),e.jsx(_,{value:"trivia",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs(f,{className:"trivia-card","data-testid":"card-ai-generation",children:[e.jsx(N,{children:e.jsxs(b,{className:"wine-text flex items-center",children:[e.jsx(q,{className:"mr-2 h-5 w-5"}),"AI Question Generator"]})}),e.jsx(y,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(r,{htmlFor:"aiTopic",children:"Topic"}),e.jsx(p,{id:"aiTopic",value:k,onChange:s=>P(s.target.value),placeholder:"e.g., Pacific Northwest wines, Local history, Sports trivia",className:"mt-1","data-testid":"input-ai-topic"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(v,{onClick:()=>be("multiple_choice"),disabled:l||!k.trim(),variant:"outline",className:"flex-1","data-testid":"button-generate-multiple-choice",children:[l?e.jsx(A,{className:"mr-2 h-4 w-4 animate-pulse"}):e.jsx(Pe,{className:"mr-2 h-4 w-4"}),"Multiple Choice"]}),e.jsxs(v,{onClick:()=>be("true_false"),disabled:l||!k.trim(),variant:"outline",className:"flex-1","data-testid":"button-generate-true-false",children:[l?e.jsx(A,{className:"mr-2 h-4 w-4 animate-pulse"}):e.jsx(Pe,{className:"mr-2 h-4 w-4"}),"True/False"]})]})]})})]}),e.jsxs(f,{className:"trivia-card","data-testid":"card-questions-list",children:[e.jsx(N,{children:e.jsxs(b,{className:"wine-text flex items-center justify-between",children:[e.jsxs("span",{children:["Event Questions (",te.length,")"]}),e.jsx(v,{variant:"outline",size:"sm",onClick:()=>c(`/events/${w}/manage/trivia`),"data-testid":"button-full-trivia-manage",className:"ml-4",children:"Open Full Manager"})]})}),e.jsx(y,{children:te.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(A,{className:"mx-auto h-12 w-12 mb-4 text-gray-400"}),e.jsx("p",{className:"mb-2",children:"No questions yet"}),e.jsx("p",{className:"text-sm",children:"Generate AI questions or add your own to get started"})]}):e.jsx("div",{className:"space-y-4",children:te.map((s,x)=>e.jsx("div",{className:"border rounded-lg p-4 hover:bg-gray-50 transition-colors","data-testid":`question-${x}`,children:e.jsx("div",{className:"space-y-3",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs(M,{variant:"secondary",className:"text-xs",children:["#",x+1]}),e.jsx(M,{variant:"outline",className:"text-xs",children:s.type.replace("_"," ")}),s.aiGenerated&&e.jsxs(M,{variant:"outline",className:"text-xs bg-blue-50 text-blue-600",children:[e.jsx(A,{className:"mr-1 h-3 w-3"}),"AI"]}),e.jsxs(M,{variant:"outline",className:"text-xs",children:[s.points||100," pts"]}),e.jsxs(M,{variant:"outline",className:"text-xs",children:[s.timeLimit,"s"]})]}),e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:s.question}),Array.isArray(s.options)&&s.options.length>0&&e.jsx("div",{className:"grid grid-cols-2 gap-2 mb-2",children:s.options.map((C,T)=>e.jsxs("div",{className:`text-sm p-2 rounded ${C===s.correctAnswer?"bg-green-100 text-green-800 font-medium":"bg-gray-100 text-gray-700"}`,children:[String.fromCharCode(65+T),". ",C]},T))}),e.jsxs("p",{className:"text-sm text-green-600 font-medium",children:["Correct Answer: ",s.correctAnswer]}),s.explanation&&e.jsx("p",{className:"text-xs text-gray-500 line-clamp-2",children:s.explanation})]}),e.jsxs("div",{className:"flex gap-2 ml-4",children:[e.jsx(v,{onClick:()=>j(s),variant:"ghost",size:"sm","data-testid":`button-edit-${x}`,children:e.jsx(Te,{className:"h-4 w-4"})}),e.jsx(v,{onClick:()=>{confirm("Are you sure you want to delete this question?")&&Nt.mutate(s.id)},variant:"ghost",size:"sm",className:"text-red-600 hover:text-red-700 hover:bg-red-50","data-testid":`button-delete-${x}`,children:e.jsx(Zt,{className:"h-4 w-4"})})]})]})})},s.id))})})]}),e.jsx(ws,{open:!!d,onOpenChange:s=>{s||j(null)},children:e.jsx(rt,{className:"max-w-3xl","data-testid":"dialog-edit-question",children:d&&e.jsxs(e.Fragment,{children:[e.jsxs(ot,{children:[e.jsx(ct,{children:"Edit Question"}),e.jsx(dt,{children:"Modify question content, scoring, ordering, and optional background image."})]}),e.jsx(ft,{question:d,onSave:s=>Ne.mutate(s),onCancel:()=>j(null),isLoading:Ne.isPending})]})})})]})}),e.jsx(_,{value:"status",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(f,{className:"trivia-card","data-testid":"card-status-control",children:[e.jsx(N,{children:e.jsx(b,{className:"wine-text",children:"Event Status"})}),e.jsxs(y,{className:"space-y-4",children:[e.jsx("div",{className:"text-center",children:e.jsx(M,{variant:n.status==="active"?"default":"secondary",className:`text-lg px-4 py-2 ${n.status==="active"?"bg-emerald-100 text-emerald-800":""}`,"data-testid":"badge-current-status",children:(n.status||"draft").toUpperCase()})}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(v,{onClick:()=>H("draft"),disabled:n.status==="draft"||W.isPending,variant:n.status==="draft"?"default":"outline","data-testid":"button-set-draft",children:"Draft"}),e.jsx(v,{onClick:()=>H("active"),disabled:n.status==="active"||W.isPending,variant:n.status==="active"?"default":"outline","data-testid":"button-set-active",children:"Active"}),e.jsx(v,{onClick:()=>H("completed"),disabled:n.status==="completed"||W.isPending,variant:n.status==="completed"?"default":"outline","data-testid":"button-set-completed",children:"Completed"}),e.jsx(v,{onClick:()=>H("cancelled"),disabled:n.status==="cancelled"||W.isPending,variant:n.status==="cancelled"?"destructive":"outline","data-testid":"button-set-cancelled",children:"Cancelled"})]})]})]}),e.jsxs(f,{className:"trivia-card","data-testid":"card-event-info",children:[e.jsx(N,{children:e.jsx(b,{className:"wine-text",children:"Event Information"})}),e.jsx(y,{className:"space-y-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsx(es,{className:"mr-3 h-4 w-4 text-wine-600"}),e.jsx("span",{className:"font-medium",children:"Date:"}),e.jsx("span",{className:"ml-2","data-testid":"text-info-date",children:n.eventDate?zt(n.eventDate):"Not set"})]}),e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsx(_e,{className:"mr-3 h-4 w-4 text-wine-600"}),e.jsx("span",{className:"font-medium",children:"Time:"}),e.jsx("span",{className:"ml-2","data-testid":"text-info-time",children:n.eventTime||"Not set"})]}),e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsx(ts,{className:"mr-3 h-4 w-4 text-wine-600"}),e.jsx("span",{className:"font-medium",children:"Location:"}),e.jsx("span",{className:"ml-2","data-testid":"text-info-location",children:n.location||"Not set"})]}),e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsx(Me,{className:"mr-3 h-4 w-4 text-wine-600"}),e.jsx("span",{className:"font-medium",children:"Organization:"}),e.jsx("span",{className:"ml-2","data-testid":"text-info-organization",children:n.sponsoringOrganization||"Not set"})]}),e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsx(de,{className:"mr-3 h-4 w-4 text-wine-600"}),e.jsx("span",{className:"font-medium",children:"Max Participants:"}),e.jsx("span",{className:"ml-2","data-testid":"text-info-max-participants",children:n.maxParticipants})]})]})})]})]})}),e.jsx(_,{value:"funfacts",children:e.jsxs(f,{className:"trivia-card","data-testid":"card-fun-facts",children:[e.jsx(N,{children:e.jsxs(b,{className:"wine-text flex items-center justify-between",children:[e.jsx("span",{children:"Fun Facts Management"}),e.jsxs(v,{onClick:()=>mt(!je),variant:"outline","data-testid":"button-edit-fun-facts",children:[e.jsx(Te,{className:"mr-2 h-4 w-4"}),je?"Cancel":"Edit"]})]})}),e.jsx(y,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-gray-600",children:"Add fun facts about your organization that will be shown between questions during the trivia event."}),pt?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-wine-600"})}):e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsxs("h4",{className:"font-medium mb-2",children:["Current Fun Facts (",se.length,"):"]}),se.length>0?e.jsx("div",{className:"space-y-3",children:se.map((s,x)=>e.jsxs("div",{className:"border-l-4 border-wine-600 pl-3",children:[e.jsxs("h5",{className:"font-medium text-wine-700",children:[x+1,". ",s.title]}),e.jsx("p",{className:"text-gray-700 mt-1",children:s.content})]},s.id))}):e.jsx("p",{className:"text-gray-500",children:"No fun facts available for this event yet."})]})]})})]})})]})})]}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-wine-50 to-champagne-50 flex items-center justify-center",children:e.jsx(f,{className:"max-w-md w-full",children:e.jsxs(y,{className:"text-center py-8",children:[e.jsx("p",{className:"text-gray-600 mb-4",children:"Event not found"}),e.jsx(v,{onClick:()=>c("/dashboard"),"data-testid":"button-back-events",children:"Back to Dashboard"})]})})})}export{aa as default};
