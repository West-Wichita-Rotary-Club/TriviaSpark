import{c as K,r as a,j as e,n as C,k,e as Pe,h as B,P as q,i as E,E as P,A as Ee,u as Ae}from"./index-DH1Va-da.js";import{u as ce}from"./useQuery-q8OON0uG.js";import{C as v,a as j,b as w,c as g}from"./card--LOY2UaR.js";import{B as V}from"./button-LMofmnr_.js";import{B as H}from"./badge-B-Akqta3.js";import{u as Le}from"./index-CXiDx-KR.js";import{c as De}from"./index-BdQq_4o_.js";import{R as Z}from"./refresh-cw-BQ6HlEd6.js";import{C as ie}from"./circle-alert-gt8wdJ_Z.js";import{D as _e}from"./database-BVh564-_.js";import{K as ke}from"./key-pG9wamxf.js";import{U as de}from"./users-eMCP9hEc.js";import{C as ze}from"./calendar-BM1vCKoi.js";import{F as He}from"./file-text-CRP7f_x4.js";/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Me=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],Be=K("award",Me);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ie=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],Oe=K("chart-column",Ie);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const We=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],Ue=K("message-square",We);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fe=[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]],xe=K("table",Fe),ee=a.forwardRef(({className:r,...t},s)=>e.jsx("div",{className:"relative w-full overflow-auto",children:e.jsx("table",{ref:s,className:C("w-full caption-bottom text-sm",r),...t})}));ee.displayName="Table";const re=a.forwardRef(({className:r,...t},s)=>e.jsx("thead",{ref:s,className:C("[&_tr]:border-b",r),...t}));re.displayName="TableHeader";const te=a.forwardRef(({className:r,...t},s)=>e.jsx("tbody",{ref:s,className:C("[&_tr:last-child]:border-0",r),...t}));te.displayName="TableBody";const Ve=a.forwardRef(({className:r,...t},s)=>e.jsx("tfoot",{ref:s,className:C("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",r),...t}));Ve.displayName="TableFooter";const M=a.forwardRef(({className:r,...t},s)=>e.jsx("tr",{ref:s,className:C("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",r),...t}));M.displayName="TableRow";const L=a.forwardRef(({className:r,...t},s)=>e.jsx("th",{ref:s,className:C("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",r),...t}));L.displayName="TableHead";const D=a.forwardRef(({className:r,...t},s)=>e.jsx("td",{ref:s,className:C("p-4 align-middle [&:has([role=checkbox])]:pr-0",r),...t}));D.displayName="TableCell";const Xe=a.forwardRef(({className:r,...t},s)=>e.jsx("caption",{ref:s,className:C("mt-4 text-sm text-muted-foreground",r),...t}));Xe.displayName="TableCaption";function Ye(r,t){return a.useReducer((s,o)=>t[s][o]??s,r)}var ne="ScrollArea",[ue,wr]=Pe(ne),[Ke,S]=ue(ne),fe=a.forwardRef((r,t)=>{const{__scopeScrollArea:s,type:o="hover",dir:n,scrollHideDelay:i=600,...d}=r,[l,h]=a.useState(null),[u,m]=a.useState(null),[f,x]=a.useState(null),[c,b]=a.useState(null),[y,G]=a.useState(null),[R,I]=a.useState(0),[J,O]=a.useState(0),[W,z]=a.useState(!1),[U,F]=a.useState(!1),p=k(t,A=>h(A)),N=Le(n);return e.jsx(Ke,{scope:s,type:o,dir:N,scrollHideDelay:i,scrollArea:l,viewport:u,onViewportChange:m,content:f,onContentChange:x,scrollbarX:c,onScrollbarXChange:b,scrollbarXEnabled:W,onScrollbarXEnabledChange:z,scrollbarY:y,onScrollbarYChange:G,scrollbarYEnabled:U,onScrollbarYEnabledChange:F,onCornerWidthChange:I,onCornerHeightChange:O,children:e.jsx(B.div,{dir:N,...d,ref:p,style:{position:"relative","--radix-scroll-area-corner-width":R+"px","--radix-scroll-area-corner-height":J+"px",...r.style}})})});fe.displayName=ne;var be="ScrollAreaViewport",pe=a.forwardRef((r,t)=>{const{__scopeScrollArea:s,children:o,nonce:n,...i}=r,d=S(be,s),l=a.useRef(null),h=k(t,l,d.onViewportChange);return e.jsxs(e.Fragment,{children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),e.jsx(B.div,{"data-radix-scroll-area-viewport":"",...i,ref:h,style:{overflowX:d.scrollbarXEnabled?"scroll":"hidden",overflowY:d.scrollbarYEnabled?"scroll":"hidden",...r.style},children:e.jsx("div",{ref:d.onContentChange,style:{minWidth:"100%",display:"table"},children:o})})]})});pe.displayName=be;var T="ScrollAreaScrollbar",oe=a.forwardRef((r,t)=>{const{forceMount:s,...o}=r,n=S(T,r.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:d}=n,l=r.orientation==="horizontal";return a.useEffect(()=>(l?i(!0):d(!0),()=>{l?i(!1):d(!1)}),[l,i,d]),n.type==="hover"?e.jsx(qe,{...o,ref:t,forceMount:s}):n.type==="scroll"?e.jsx($e,{...o,ref:t,forceMount:s}):n.type==="auto"?e.jsx(ve,{...o,ref:t,forceMount:s}):n.type==="always"?e.jsx(le,{...o,ref:t}):null});oe.displayName=T;var qe=a.forwardRef((r,t)=>{const{forceMount:s,...o}=r,n=S(T,r.__scopeScrollArea),[i,d]=a.useState(!1);return a.useEffect(()=>{const l=n.scrollArea;let h=0;if(l){const u=()=>{window.clearTimeout(h),d(!0)},m=()=>{h=window.setTimeout(()=>d(!1),n.scrollHideDelay)};return l.addEventListener("pointerenter",u),l.addEventListener("pointerleave",m),()=>{window.clearTimeout(h),l.removeEventListener("pointerenter",u),l.removeEventListener("pointerleave",m)}}},[n.scrollArea,n.scrollHideDelay]),e.jsx(q,{present:s||i,children:e.jsx(ve,{"data-state":i?"visible":"hidden",...o,ref:t})})}),$e=a.forwardRef((r,t)=>{const{forceMount:s,...o}=r,n=S(T,r.__scopeScrollArea),i=r.orientation==="horizontal",d=Q(()=>h("SCROLL_END"),100),[l,h]=Ye("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return a.useEffect(()=>{if(l==="idle"){const u=window.setTimeout(()=>h("HIDE"),n.scrollHideDelay);return()=>window.clearTimeout(u)}},[l,n.scrollHideDelay,h]),a.useEffect(()=>{const u=n.viewport,m=i?"scrollLeft":"scrollTop";if(u){let f=u[m];const x=()=>{const c=u[m];f!==c&&(h("SCROLL"),d()),f=c};return u.addEventListener("scroll",x),()=>u.removeEventListener("scroll",x)}},[n.viewport,i,h,d]),e.jsx(q,{present:s||l!=="hidden",children:e.jsx(le,{"data-state":l==="hidden"?"hidden":"visible",...o,ref:t,onPointerEnter:E(r.onPointerEnter,()=>h("POINTER_ENTER")),onPointerLeave:E(r.onPointerLeave,()=>h("POINTER_LEAVE"))})})}),ve=a.forwardRef((r,t)=>{const s=S(T,r.__scopeScrollArea),{forceMount:o,...n}=r,[i,d]=a.useState(!1),l=r.orientation==="horizontal",h=Q(()=>{if(s.viewport){const u=s.viewport.offsetWidth<s.viewport.scrollWidth,m=s.viewport.offsetHeight<s.viewport.scrollHeight;d(l?u:m)}},10);return _(s.viewport,h),_(s.content,h),e.jsx(q,{present:o||i,children:e.jsx(le,{"data-state":i?"visible":"hidden",...n,ref:t})})}),le=a.forwardRef((r,t)=>{const{orientation:s="vertical",...o}=r,n=S(T,r.__scopeScrollArea),i=a.useRef(null),d=a.useRef(0),[l,h]=a.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=Ne(l.viewport,l.content),m={...o,sizes:l,onSizesChange:h,hasThumb:u>0&&u<1,onThumbChange:x=>i.current=x,onThumbPointerUp:()=>d.current=0,onThumbPointerDown:x=>d.current=x};function f(x,c){return rr(x,d.current,l,c)}return s==="horizontal"?e.jsx(Qe,{...m,ref:t,onThumbPositionChange:()=>{if(n.viewport&&i.current){const x=n.viewport.scrollLeft,c=he(x,l,n.dir);i.current.style.transform=`translate3d(${c}px, 0, 0)`}},onWheelScroll:x=>{n.viewport&&(n.viewport.scrollLeft=x)},onDragScroll:x=>{n.viewport&&(n.viewport.scrollLeft=f(x,n.dir))}}):s==="vertical"?e.jsx(Ge,{...m,ref:t,onThumbPositionChange:()=>{if(n.viewport&&i.current){const x=n.viewport.scrollTop,c=he(x,l);i.current.style.transform=`translate3d(0, ${c}px, 0)`}},onWheelScroll:x=>{n.viewport&&(n.viewport.scrollTop=x)},onDragScroll:x=>{n.viewport&&(n.viewport.scrollTop=f(x))}}):null}),Qe=a.forwardRef((r,t)=>{const{sizes:s,onSizesChange:o,...n}=r,i=S(T,r.__scopeScrollArea),[d,l]=a.useState(),h=a.useRef(null),u=k(t,h,i.onScrollbarXChange);return a.useEffect(()=>{h.current&&l(getComputedStyle(h.current))},[h]),e.jsx(je,{"data-orientation":"horizontal",...n,ref:u,sizes:s,style:{bottom:0,left:i.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:i.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":$(s)+"px",...r.style},onThumbPointerDown:m=>r.onThumbPointerDown(m.x),onDragScroll:m=>r.onDragScroll(m.x),onWheelScroll:(m,f)=>{if(i.viewport){const x=i.viewport.scrollLeft+m.deltaX;r.onWheelScroll(x),Ce(x,f)&&m.preventDefault()}},onResize:()=>{h.current&&i.viewport&&d&&o({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:h.current.clientWidth,paddingStart:Y(d.paddingLeft),paddingEnd:Y(d.paddingRight)}})}})}),Ge=a.forwardRef((r,t)=>{const{sizes:s,onSizesChange:o,...n}=r,i=S(T,r.__scopeScrollArea),[d,l]=a.useState(),h=a.useRef(null),u=k(t,h,i.onScrollbarYChange);return a.useEffect(()=>{h.current&&l(getComputedStyle(h.current))},[h]),e.jsx(je,{"data-orientation":"vertical",...n,ref:u,sizes:s,style:{top:0,right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":$(s)+"px",...r.style},onThumbPointerDown:m=>r.onThumbPointerDown(m.y),onDragScroll:m=>r.onDragScroll(m.y),onWheelScroll:(m,f)=>{if(i.viewport){const x=i.viewport.scrollTop+m.deltaY;r.onWheelScroll(x),Ce(x,f)&&m.preventDefault()}},onResize:()=>{h.current&&i.viewport&&d&&o({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:h.current.clientHeight,paddingStart:Y(d.paddingTop),paddingEnd:Y(d.paddingBottom)}})}})}),[Je,ge]=ue(T),je=a.forwardRef((r,t)=>{const{__scopeScrollArea:s,sizes:o,hasThumb:n,onThumbChange:i,onThumbPointerUp:d,onThumbPointerDown:l,onThumbPositionChange:h,onDragScroll:u,onWheelScroll:m,onResize:f,...x}=r,c=S(T,s),[b,y]=a.useState(null),G=k(t,p=>y(p)),R=a.useRef(null),I=a.useRef(""),J=c.viewport,O=o.content-o.viewport,W=P(m),z=P(h),U=Q(f,10);function F(p){if(R.current){const N=p.clientX-R.current.left,A=p.clientY-R.current.top;u({x:N,y:A})}}return a.useEffect(()=>{const p=N=>{const A=N.target;b?.contains(A)&&W(N,O)};return document.addEventListener("wheel",p,{passive:!1}),()=>document.removeEventListener("wheel",p,{passive:!1})},[J,b,O,W]),a.useEffect(z,[o,z]),_(b,U),_(c.content,U),e.jsx(Je,{scope:s,scrollbar:b,hasThumb:n,onThumbChange:P(i),onThumbPointerUp:P(d),onThumbPositionChange:z,onThumbPointerDown:P(l),children:e.jsx(B.div,{...x,ref:G,style:{position:"absolute",...x.style},onPointerDown:E(r.onPointerDown,p=>{p.button===0&&(p.target.setPointerCapture(p.pointerId),R.current=b.getBoundingClientRect(),I.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",c.viewport&&(c.viewport.style.scrollBehavior="auto"),F(p))}),onPointerMove:E(r.onPointerMove,F),onPointerUp:E(r.onPointerUp,p=>{const N=p.target;N.hasPointerCapture(p.pointerId)&&N.releasePointerCapture(p.pointerId),document.body.style.webkitUserSelect=I.current,c.viewport&&(c.viewport.style.scrollBehavior=""),R.current=null})})})}),X="ScrollAreaThumb",we=a.forwardRef((r,t)=>{const{forceMount:s,...o}=r,n=ge(X,r.__scopeScrollArea);return e.jsx(q,{present:s||n.hasThumb,children:e.jsx(Ze,{ref:t,...o})})}),Ze=a.forwardRef((r,t)=>{const{__scopeScrollArea:s,style:o,...n}=r,i=S(X,s),d=ge(X,s),{onThumbPositionChange:l}=d,h=k(t,f=>d.onThumbChange(f)),u=a.useRef(void 0),m=Q(()=>{u.current&&(u.current(),u.current=void 0)},100);return a.useEffect(()=>{const f=i.viewport;if(f){const x=()=>{if(m(),!u.current){const c=tr(f,l);u.current=c,l()}};return l(),f.addEventListener("scroll",x),()=>f.removeEventListener("scroll",x)}},[i.viewport,m,l]),e.jsx(B.div,{"data-state":d.hasThumb?"visible":"hidden",...n,ref:h,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...o},onPointerDownCapture:E(r.onPointerDownCapture,f=>{const c=f.target.getBoundingClientRect(),b=f.clientX-c.left,y=f.clientY-c.top;d.onThumbPointerDown({x:b,y})}),onPointerUp:E(r.onPointerUp,d.onThumbPointerUp)})});we.displayName=X;var ae="ScrollAreaCorner",Se=a.forwardRef((r,t)=>{const s=S(ae,r.__scopeScrollArea),o=!!(s.scrollbarX&&s.scrollbarY);return s.type!=="scroll"&&o?e.jsx(er,{...r,ref:t}):null});Se.displayName=ae;var er=a.forwardRef((r,t)=>{const{__scopeScrollArea:s,...o}=r,n=S(ae,s),[i,d]=a.useState(0),[l,h]=a.useState(0),u=!!(i&&l);return _(n.scrollbarX,()=>{const m=n.scrollbarX?.offsetHeight||0;n.onCornerHeightChange(m),h(m)}),_(n.scrollbarY,()=>{const m=n.scrollbarY?.offsetWidth||0;n.onCornerWidthChange(m),d(m)}),u?e.jsx(B.div,{...o,ref:t,style:{width:i,height:l,position:"absolute",right:n.dir==="ltr"?0:void 0,left:n.dir==="rtl"?0:void 0,bottom:0,...r.style}}):null});function Y(r){return r?parseInt(r,10):0}function Ne(r,t){const s=r/t;return isNaN(s)?0:s}function $(r){const t=Ne(r.viewport,r.content),s=r.scrollbar.paddingStart+r.scrollbar.paddingEnd,o=(r.scrollbar.size-s)*t;return Math.max(o,18)}function rr(r,t,s,o="ltr"){const n=$(s),i=n/2,d=t||i,l=n-d,h=s.scrollbar.paddingStart+d,u=s.scrollbar.size-s.scrollbar.paddingEnd-l,m=s.content-s.viewport,f=o==="ltr"?[0,m]:[m*-1,0];return ye([h,u],f)(r)}function he(r,t,s="ltr"){const o=$(t),n=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,i=t.scrollbar.size-n,d=t.content-t.viewport,l=i-o,h=s==="ltr"?[0,d]:[d*-1,0],u=De(r,h);return ye([0,d],[0,l])(u)}function ye(r,t){return s=>{if(r[0]===r[1]||t[0]===t[1])return t[0];const o=(t[1]-t[0])/(r[1]-r[0]);return t[0]+o*(s-r[0])}}function Ce(r,t){return r>0&&r<t}var tr=(r,t=()=>{})=>{let s={left:r.scrollLeft,top:r.scrollTop},o=0;return(function n(){const i={left:r.scrollLeft,top:r.scrollTop},d=s.left!==i.left,l=s.top!==i.top;(d||l)&&t(),s=i,o=window.requestAnimationFrame(n)})(),()=>window.cancelAnimationFrame(o)};function Q(r,t){const s=P(r),o=a.useRef(0);return a.useEffect(()=>()=>window.clearTimeout(o.current),[]),a.useCallback(()=>{window.clearTimeout(o.current),o.current=window.setTimeout(s,t)},[s,t])}function _(r,t){const s=P(t);Ee(()=>{let o=0;if(r){const n=new ResizeObserver(()=>{cancelAnimationFrame(o),o=window.requestAnimationFrame(s)});return n.observe(r),()=>{window.cancelAnimationFrame(o),n.unobserve(r)}}},[r,s])}var Te=fe,sr=pe,nr=Se;const se=a.forwardRef(({className:r,children:t,...s},o)=>e.jsxs(Te,{ref:o,className:C("relative overflow-hidden",r),...s,children:[e.jsx(sr,{className:"h-full w-full rounded-[inherit]",children:t}),e.jsx(Re,{}),e.jsx(nr,{})]}));se.displayName=Te.displayName;const Re=a.forwardRef(({className:r,orientation:t="vertical",...s},o)=>e.jsx(oe,{ref:o,orientation:t,className:C("flex touch-none select-none transition-colors",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",r),...s,children:e.jsx(we,{className:"relative flex-1 rounded-full bg-border"})}));Re.displayName=oe.displayName;const me=r=>{const t=r.toLowerCase();return t.includes("user")?de:t.includes("event")?ze:t.includes("question")?He:t.includes("response")?Ue:t.includes("team")?Be:t.includes("participant")?de:xe},or=r=>{if(r===0)return"0 Bytes";const t=1024,s=["Bytes","KB","MB","GB"],o=Math.floor(Math.log(r)/Math.log(t));return parseFloat((r/Math.pow(t,o)).toFixed(2))+" "+s[o]};function Sr(){const[,r]=Ae(),[t,s]=a.useState(null),{data:o,isLoading:n,error:i,refetch:d}=ce({queryKey:["/api/db/analyze"],retry:!1}),{data:l,isLoading:h,error:u}=ce({queryKey:["/api/db/analyze/table",t],enabled:!!t,retry:!1}),m=()=>{r("/dashboard")},f=c=>{s(c)},x=()=>{s(null)};return n?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-wine-50 to-champagne-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Z,{className:"h-8 w-8 animate-spin text-wine-600 mx-auto mb-2"}),e.jsx("p",{className:"text-wine-700",children:"Loading database information..."})]})}):i?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-wine-50 to-champagne-50 flex items-center justify-center",children:e.jsxs(v,{className:"w-full max-w-md",children:[e.jsx(j,{children:e.jsxs(w,{className:"flex items-center text-red-600",children:[e.jsx(ie,{className:"h-5 w-5 mr-2"}),"Database Error"]})}),e.jsxs(g,{children:[e.jsx("p",{className:"text-gray-600 mb-4",children:"Failed to connect to the database. Please ensure the database file exists and is accessible."}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(V,{onClick:()=>d(),className:"w-full",children:[e.jsx(Z,{className:"h-4 w-4 mr-2"}),"Retry Connection"]}),e.jsx(V,{variant:"outline",onClick:m,className:"w-full",children:"Back to Dashboard"})]})]})]})}):t?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-wine-50 to-champagne-50 p-4",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("div",{className:"mb-8",children:e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(V,{variant:"ghost",onClick:x,className:"mr-3",children:"← Back to Tables"}),e.jsxs("div",{className:"flex items-center",children:[(()=>{const c=me(t);return e.jsx(c,{className:"h-6 w-6 text-wine-600 mr-2"})})(),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:t}),e.jsx("p",{className:"text-gray-600",children:"Table analysis and data preview"})]})]})]})})}),h&&e.jsx("div",{className:"flex justify-center py-8",children:e.jsx(Z,{className:"h-6 w-6 animate-spin text-wine-600"})}),u&&e.jsx(v,{className:"mb-6",children:e.jsx(g,{className:"p-6",children:e.jsxs("div",{className:"flex items-center text-red-600",children:[e.jsx(ie,{className:"h-5 w-5 mr-2"}),e.jsx("span",{children:"Error loading table analysis"})]})})}),l&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs(v,{children:[e.jsx(j,{className:"pb-2",children:e.jsx(w,{className:"text-sm font-medium text-gray-600",children:"Total Rows"})}),e.jsx(g,{children:e.jsx("div",{className:"text-2xl font-bold text-wine-600",children:l.rowCount.toLocaleString()})})]}),e.jsxs(v,{children:[e.jsx(j,{className:"pb-2",children:e.jsx(w,{className:"text-sm font-medium text-gray-600",children:"Columns"})}),e.jsx(g,{children:e.jsx("div",{className:"text-2xl font-bold text-wine-600",children:l.columnCount})})]}),e.jsxs(v,{children:[e.jsx(j,{className:"pb-2",children:e.jsx(w,{className:"text-sm font-medium text-gray-600",children:"Indexes"})}),e.jsx(g,{children:e.jsx("div",{className:"text-2xl font-bold text-wine-600",children:l.indexes.length})})]})]}),e.jsxs(v,{children:[e.jsx(j,{children:e.jsxs(w,{className:"flex items-center",children:[e.jsx(Oe,{className:"h-5 w-5 mr-2"}),"Table Schema"]})}),e.jsx(g,{children:e.jsx(se,{className:"h-64",children:e.jsxs(ee,{children:[e.jsx(re,{children:e.jsxs(M,{children:[e.jsx(L,{children:"Column"}),e.jsx(L,{children:"Type"}),e.jsx(L,{children:"Constraints"}),e.jsx(L,{children:"Default"})]})}),e.jsx(te,{children:l.columns.map(c=>e.jsxs(M,{children:[e.jsx(D,{className:"font-medium",children:e.jsxs("div",{className:"flex items-center",children:[c.primaryKey&&e.jsx(ke,{className:"h-3 w-3 text-yellow-500 mr-1"}),c.name]})}),e.jsx(D,{children:e.jsx(H,{variant:"outline",children:c.type})}),e.jsx(D,{children:e.jsxs("div",{className:"flex gap-1",children:[c.primaryKey&&e.jsx(H,{variant:"default",className:"text-xs",children:"PK"}),c.notNull&&e.jsx(H,{variant:"secondary",className:"text-xs",children:"NOT NULL"})]})}),e.jsx(D,{className:"text-gray-500",children:c.defaultValue!==null?String(c.defaultValue):"—"})]},c.cid))})]})})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(v,{children:[e.jsx(j,{children:e.jsxs(w,{className:"text-sm",children:["Indexes (",l.indexes.length,")"]})}),e.jsx(g,{children:l.indexes.length>0?e.jsx("div",{className:"space-y-2",children:l.indexes.map((c,b)=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[e.jsx("span",{className:"font-medium text-sm",children:c.name}),e.jsxs("div",{className:"flex items-center gap-2",children:[c.unique&&e.jsx(H,{variant:"outline",className:"text-xs",children:"UNIQUE"}),e.jsx("span",{className:"text-xs text-gray-500",children:c.columns.join(", ")})]})]},b))}):e.jsx("p",{className:"text-gray-500 text-sm",children:"No indexes defined"})})]}),e.jsxs(v,{children:[e.jsx(j,{children:e.jsxs(w,{className:"text-sm",children:["Foreign Keys (",l.foreignKeys.length,")"]})}),e.jsx(g,{children:l.foreignKeys.length>0?e.jsx("div",{className:"space-y-2",children:l.foreignKeys.map((c,b)=>e.jsxs("div",{className:"p-2 bg-gray-50 rounded",children:[e.jsxs("div",{className:"text-sm font-medium",children:[c.from," → ",c.table,".",c.to]}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["ON UPDATE: ",c.onUpdate," | ON DELETE: ",c.onDelete]})]},b))}):e.jsx("p",{className:"text-gray-500 text-sm",children:"No foreign keys defined"})})]})]}),e.jsxs(v,{children:[e.jsx(j,{children:e.jsx(w,{children:"Sample Data (First 10 rows)"})}),e.jsx(g,{children:l.sampleData.length>0?e.jsx(se,{className:"h-96 w-full",children:e.jsxs(ee,{children:[e.jsx(re,{children:e.jsx(M,{children:l.columns.map(c=>e.jsx(L,{className:"min-w-[120px]",children:c.name},c.name))})}),e.jsx(te,{children:l.sampleData.map((c,b)=>e.jsx(M,{children:l.columns.map(y=>e.jsx(D,{className:"max-w-[200px] truncate",children:c[y.name]!==null&&c[y.name]!==void 0?String(c[y.name]):"—"},y.name))},b))})]})}):e.jsx("p",{className:"text-gray-500 text-center py-8",children:"No data found in this table"})})]})]})]})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-wine-50 to-champagne-50 p-4",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(_e,{className:"h-8 w-8 text-wine-600 mr-3"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Database Analyzer"}),e.jsx("p",{className:"text-gray-600",children:"Explore and analyze database tables and structure"})]})]}),e.jsx(V,{variant:"outline",onClick:m,children:"Back to Dashboard"})]})}),o&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsxs(v,{children:[e.jsx(j,{className:"pb-2",children:e.jsx(w,{className:"text-sm font-medium text-gray-600",children:"Database Size"})}),e.jsxs(g,{children:[e.jsx("div",{className:"text-2xl font-bold text-wine-600",children:or(o.databaseSize)}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:o.databasePath})]})]}),e.jsxs(v,{children:[e.jsx(j,{className:"pb-2",children:e.jsx(w,{className:"text-sm font-medium text-gray-600",children:"Total Tables"})}),e.jsxs(g,{children:[e.jsx("div",{className:"text-2xl font-bold text-wine-600",children:o.tableCount}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Database tables"})]})]}),e.jsxs(v,{children:[e.jsx(j,{className:"pb-2",children:e.jsx(w,{className:"text-sm font-medium text-gray-600",children:"Total Records"})}),e.jsxs(g,{children:[e.jsx("div",{className:"text-2xl font-bold text-wine-600",children:o.tables.reduce((c,b)=>c+b.rowCount,0).toLocaleString()}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"All tables combined"})]})]})]}),o&&e.jsxs(v,{children:[e.jsx(j,{children:e.jsxs(w,{className:"flex items-center",children:[e.jsx(xe,{className:"h-5 w-5 mr-2"}),"Database Tables"]})}),e.jsx(g,{children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:o.tables.map(c=>{const b=me(c.name);return e.jsx(v,{className:"cursor-pointer hover:shadow-md transition-shadow border-2 hover:border-wine-200",onClick:()=>f(c.name),children:e.jsxs(g,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx(b,{className:"h-5 w-5 text-wine-600"}),e.jsxs(H,{variant:"secondary",className:"text-xs",children:[c.rowCount.toLocaleString()," rows"]})]}),e.jsx("h3",{className:"font-semibold text-gray-900 mb-1",children:c.name}),e.jsx("p",{className:"text-xs text-gray-500 line-clamp-2",children:"Click to analyze table structure and data"})]})},c.name)})})})]})]})})}export{Sr as default};
