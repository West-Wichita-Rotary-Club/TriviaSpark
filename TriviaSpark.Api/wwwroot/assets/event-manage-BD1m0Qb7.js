import{c as fe,a as _e,r as h,j as e,d as Mt,e as Ot,P as ve,f as _t,h as ne,i as re,k as je,l as Lt,D as Ut,m as zt,n as Y,X as qt,o as $t,u as Gt,b as Qt,p as Me,q as Bt,s as Vt}from"./index-WUQAzrLk.js";import{u as Z}from"./useQuery-BnSLEbvc.js";import{u as K}from"./useMutation-DcdFC1t0.js";import{u as Wt}from"./index.esm-DfNmUt-q.js";import{B as j}from"./button-BcozdGXw.js";import{L as o,I as g}from"./label-DgZLFTv6.js";import{T as F}from"./textarea-DW_DP2zR.js";import{C as y,a as w,b as C,c as b}from"./card-Bu3t08nn.js";import{B as L}from"./badge-zAmXD6NS.js";import{U as Jt,P as Oe}from"./upload-Dq_BtmCN.js";import{S as G}from"./sparkles-Bm3VrO9V.js";import{M as Le}from"./mail-Bpr9fhRb.js";import{B as Ue}from"./building-2-p5FSQ4U8.js";import{C as Kt}from"./circle-alert-DmvzeVw4.js";import{T as ze}from"./trophy-BTMqynza.js";import{F as qe}from"./file-text-BfWvp9bw.js";import{C as $e}from"./clock-BVBeOu19.js";import{U as pe}from"./users-MR-7E6i_.js";import{S as ee,a as te,b as ae,c as se,d as N}from"./select-BJM7IULS.js";import{T as Yt,a as Ht,b as q,c as $}from"./tabs-C5S6iGiK.js";import{u as xe,h as Xt,R as Zt,a as ea,F as ta}from"./Combination-Cbg1Wl98.js";import{B as _}from"./brain-DzT7u5bO.js";import{A as aa}from"./arrow-left-DHmqjGol.js";import{S as sa}from"./settings-BC0ZBCvi.js";import{S as he}from"./save-Cu4SCwzJ.js";import{S as ge}from"./square-pen-RQ7BvrR_.js";import{T as ra}from"./trash-2-C8449zv4.js";import{C as na}from"./calendar-BYfTaL5L.js";import{M as ia}from"./map-pin-BfZioa1P.js";import"./index-BdQq_4o_.js";import"./index-BqQccHUY.js";import"./chevron-up-DtuBg5qK.js";import"./index-Paan42Dg.js";/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oa=[["circle",{cx:"16",cy:"4",r:"1",key:"1grugj"}],["path",{d:"m18 19 1-7-6 1",key:"r0i19z"}],["path",{d:"m5 8 3-3 5.5 3-2.36 3.5",key:"9ptxx2"}],["path",{d:"M4.24 14.5a5 5 0 0 0 6.88 6",key:"10kmtu"}],["path",{d:"M13.76 17.5a5 5 0 0 0-6.88-6",key:"2qq6rc"}]],la=fe("accessibility",oa);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ca=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],Ge=fe("palette",ca);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const da=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],ma=fe("share-2",da);function ua({event:t,onUpdate:s,isLoading:d}){const{toast:n}=_e(),[l,m]=h.useState(!1),f=async c=>{m(!0);try{const u=await fetch(`/api/events/${t.id}/generate-copy`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:c}),credentials:"include"});if(!u.ok)throw new Error("Failed to generate copy");const D=await u.json();s({[c==="promotional"?"eventCopy":c==="welcome"?"welcomeMessage":c==="thankyou"?"thankYouMessage":"eventRules"]:D.copy}),n({title:"AI Copy Generated",description:`Generated ${c} content successfully!`})}catch{n({title:"Generation Failed",description:"Failed to generate AI copy. Please try again.",variant:"destructive"})}finally{m(!1)}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(y,{children:[e.jsx(w,{children:e.jsxs(C,{className:"flex items-center gap-2",children:[e.jsx(Jt,{className:"w-5 h-5"}),"Visual Branding"]})}),e.jsx(b,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(o,{htmlFor:"logoUrl",children:"Event Logo URL"}),e.jsx(g,{id:"logoUrl",placeholder:"https://example.com/logo.png",value:t.logoUrl||"",onChange:c=>s({logoUrl:c.target.value}),"data-testid":"input-logo-url"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Upload your event logo for branding"})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"backgroundImageUrl",children:"Background Image URL"}),e.jsx(g,{id:"backgroundImageUrl",placeholder:"https://example.com/background.jpg",value:t.backgroundImageUrl||"",onChange:c=>s({backgroundImageUrl:c.target.value}),"data-testid":"input-background-url"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Background image for event screens"})]})]})})]}),e.jsxs(y,{children:[e.jsx(w,{children:e.jsxs(C,{className:"flex items-center gap-2",children:[e.jsx(Ge,{className:"w-5 h-5"}),"Color Theme"]})}),e.jsxs(b,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(o,{htmlFor:"primaryColor",children:"Primary Color"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(g,{id:"primaryColor",type:"color",value:t.primaryColor||"#7C2D12",onChange:c=>s({primaryColor:c.target.value}),className:"w-16 h-10 border rounded cursor-pointer","data-testid":"input-primary-color"}),e.jsx(g,{placeholder:"#7C2D12",value:t.primaryColor||"#7C2D12",onChange:c=>s({primaryColor:c.target.value}),className:"flex-1"})]})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"secondaryColor",children:"Secondary Color"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(g,{id:"secondaryColor",type:"color",value:t.secondaryColor||"#FEF3C7",onChange:c=>s({secondaryColor:c.target.value}),className:"w-16 h-10 border rounded cursor-pointer","data-testid":"input-secondary-color"}),e.jsx(g,{placeholder:"#FEF3C7",value:t.secondaryColor||"#FEF3C7",onChange:c=>s({secondaryColor:c.target.value}),className:"flex-1"})]})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"fontFamily",children:"Font Family"}),e.jsx(g,{id:"fontFamily",placeholder:"Inter",value:t.fontFamily||"Inter",onChange:c=>s({fontFamily:c.target.value}),"data-testid":"input-font-family"})]})]}),e.jsx("div",{className:"p-4 border rounded-lg",style:{backgroundColor:t.secondaryColor||"#FEF3C7",fontFamily:t.fontFamily||"Inter"},children:e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-xl font-bold mb-2",style:{color:t.primaryColor||"#7C2D12"},children:t.title||"Your Event Title"}),e.jsx(L,{style:{backgroundColor:t.primaryColor||"#7C2D12",color:"white"},children:"Theme Preview"})]})})]})]}),e.jsxs(y,{children:[e.jsx(w,{children:e.jsxs(C,{className:"flex items-center gap-2",children:[e.jsx(G,{className:"w-5 h-5"}),"AI-Generated Content"]})}),e.jsxs(b,{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(o,{htmlFor:"eventCopy",children:"Promotional Event Copy"}),e.jsxs(j,{type:"button",variant:"outline",size:"sm",onClick:()=>f("promotional"),disabled:l,"data-testid":"button-generate-promotional",children:[e.jsx(G,{className:"w-3 h-3 mr-1"}),l?"Generating...":"Generate"]})]}),e.jsx(F,{id:"eventCopy",placeholder:"AI will generate engaging promotional copy for your event...",value:t.eventCopy||"",onChange:c=>s({eventCopy:c.target.value}),rows:4,"data-testid":"textarea-event-copy"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(o,{htmlFor:"welcomeMessage",children:"Welcome Message"}),e.jsxs(j,{type:"button",variant:"outline",size:"sm",onClick:()=>f("welcome"),disabled:l,"data-testid":"button-generate-welcome",children:[e.jsx(G,{className:"w-3 h-3 mr-1"}),"Generate"]})]}),e.jsx(F,{id:"welcomeMessage",placeholder:"Welcome message shown to participants when they join...",value:t.welcomeMessage||"",onChange:c=>s({welcomeMessage:c.target.value}),rows:3,"data-testid":"textarea-welcome-message"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(o,{htmlFor:"thankYouMessage",children:"Thank You Message"}),e.jsxs(j,{type:"button",variant:"outline",size:"sm",onClick:()=>f("thankyou"),disabled:l,"data-testid":"button-generate-thankyou",children:[e.jsx(G,{className:"w-3 h-3 mr-1"}),"Generate"]})]}),e.jsx(F,{id:"thankYouMessage",placeholder:"Thank you message shown after event completion...",value:t.thankYouMessage||"",onChange:c=>s({thankYouMessage:c.target.value}),rows:3,"data-testid":"textarea-thank-you-message"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(o,{htmlFor:"eventRules",children:"Event Rules"}),e.jsxs(j,{type:"button",variant:"outline",size:"sm",onClick:()=>f("rules"),disabled:l,"data-testid":"button-generate-rules",children:[e.jsx(G,{className:"w-3 h-3 mr-1"}),"Generate"]})]}),e.jsx(F,{id:"eventRules",placeholder:"Clear rules and guidelines for participants...",value:t.eventRules||"",onChange:c=>s({eventRules:c.target.value}),rows:4,"data-testid":"textarea-event-rules"})]})]})]})]})}function xa({event:t,onUpdate:s,isLoading:d}){const n=u=>{if(!u)return{};if(typeof u=="string")try{return JSON.parse(u)}catch{return{}}return typeof u=="object"?u??{}:{}},l=(u,D)=>{const B={...n(t.socialLinks),[u]:D};s({socialLinks:JSON.stringify(B)})},m=(u,D)=>{const B={...n(t.sponsorInformation),[u]:D};s({sponsorInformation:JSON.stringify(B)})},f=n(t.socialLinks),c=n(t.sponsorInformation);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(y,{children:[e.jsx(w,{children:e.jsxs(C,{className:"flex items-center gap-2",children:[e.jsx(Le,{className:"w-5 h-5"}),"Contact Information"]})}),e.jsxs(b,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(o,{htmlFor:"contactEmail",children:"Contact Email"}),e.jsx(g,{id:"contactEmail",type:"email",placeholder:"contact@example.com",value:t.contactEmail||"",onChange:u=>s({contactEmail:u.target.value}),"data-testid":"input-contact-email"})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"contactPhone",children:"Contact Phone"}),e.jsx(g,{id:"contactPhone",type:"tel",placeholder:"+1 (555) 123-4567",value:t.contactPhone||"",onChange:u=>s({contactPhone:u.target.value}),"data-testid":"input-contact-phone"})]})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"websiteUrl",children:"Website URL"}),e.jsx(g,{id:"websiteUrl",type:"url",placeholder:"https://yourorganization.com",value:t.websiteUrl||"",onChange:u=>s({websiteUrl:u.target.value}),"data-testid":"input-website-url"})]})]})]}),e.jsxs(y,{children:[e.jsx(w,{children:e.jsxs(C,{className:"flex items-center gap-2",children:[e.jsx(ma,{className:"w-5 h-5"}),"Social Media Links"]})}),e.jsx(b,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(o,{htmlFor:"facebook",children:"Facebook"}),e.jsx(g,{id:"facebook",placeholder:"https://facebook.com/yourpage",value:f.facebook||"",onChange:u=>l("facebook",u.target.value),"data-testid":"input-facebook"})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"twitter",children:"Twitter/X"}),e.jsx(g,{id:"twitter",placeholder:"https://twitter.com/yourhandle",value:f.twitter||"",onChange:u=>l("twitter",u.target.value),"data-testid":"input-twitter"})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"instagram",children:"Instagram"}),e.jsx(g,{id:"instagram",placeholder:"https://instagram.com/yourhandle",value:f.instagram||"",onChange:u=>l("instagram",u.target.value),"data-testid":"input-instagram"})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"linkedin",children:"LinkedIn"}),e.jsx(g,{id:"linkedin",placeholder:"https://linkedin.com/company/yourorg",value:f.linkedin||"",onChange:u=>l("linkedin",u.target.value),"data-testid":"input-linkedin"})]})]})})]}),e.jsxs(y,{children:[e.jsx(w,{children:e.jsxs(C,{className:"flex items-center gap-2",children:[e.jsx(Ue,{className:"w-5 h-5"}),"Sponsor Information"]})}),e.jsxs(b,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(o,{htmlFor:"sponsorName",children:"Main Sponsor Name"}),e.jsx(g,{id:"sponsorName",placeholder:"Sponsor Company Name",value:c.name||"",onChange:u=>m("name",u.target.value),"data-testid":"input-sponsor-name"})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"sponsorLogoUrl",children:"Sponsor Logo URL"}),e.jsx(g,{id:"sponsorLogoUrl",placeholder:"https://sponsor.com/logo.png",value:c.logoUrl||"",onChange:u=>m("logoUrl",u.target.value),"data-testid":"input-sponsor-logo"})]})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"sponsorWebsite",children:"Sponsor Website"}),e.jsx(g,{id:"sponsorWebsite",type:"url",placeholder:"https://sponsor.com",value:c.website||"",onChange:u=>m("website",u.target.value),"data-testid":"input-sponsor-website"})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"sponsorDescription",children:"Sponsor Description"}),e.jsx(F,{id:"sponsorDescription",placeholder:"Brief description of the sponsor and their involvement...",value:c.description||"",onChange:u=>m("description",u.target.value),rows:3,"data-testid":"textarea-sponsor-description"})]})]})]}),e.jsxs(y,{children:[e.jsx(w,{children:e.jsxs(C,{className:"flex items-center gap-2",children:[e.jsx(Kt,{className:"w-5 h-5"}),"Policies & Terms"]})}),e.jsxs(b,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(o,{htmlFor:"cancellationPolicy",children:"Cancellation Policy"}),e.jsx(F,{id:"cancellationPolicy",placeholder:"Explain your event cancellation policy...",value:t.cancellationPolicy||"",onChange:u=>s({cancellationPolicy:u.target.value}),rows:3,"data-testid":"textarea-cancellation-policy"})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"refundPolicy",children:"Refund Policy"}),e.jsx(F,{id:"refundPolicy",placeholder:"Explain your refund policy for participants...",value:t.refundPolicy||"",onChange:u=>s({refundPolicy:u.target.value}),rows:3,"data-testid":"textarea-refund-policy"})]})]})]})]})}function ha({event:t,onUpdate:s,isLoading:d}){return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(y,{children:[e.jsx(w,{children:e.jsxs(C,{className:"flex items-center gap-2",children:[e.jsx(ze,{className:"w-5 h-5"}),"Prize Information"]})}),e.jsx(b,{className:"space-y-4",children:e.jsxs("div",{children:[e.jsx(o,{htmlFor:"prizeInformation",children:"Prize Details"}),e.jsx(F,{id:"prizeInformation",placeholder:"Describe the prizes and rewards for participants...",value:t.prizeInformation||"",onChange:n=>s({prizeInformation:n.target.value}),rows:4,"data-testid":"textarea-prize-information"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Detail what winners can expect to receive"})]})})]}),e.jsxs(y,{children:[e.jsx(w,{children:e.jsxs(C,{className:"flex items-center gap-2",children:[e.jsx(qe,{className:"w-5 h-5"}),"Event Instructions"]})}),e.jsxs(b,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(o,{htmlFor:"specialInstructions",children:"Special Instructions"}),e.jsx(F,{id:"specialInstructions",placeholder:"Any special instructions for participants...",value:t.specialInstructions||"",onChange:n=>s({specialInstructions:n.target.value}),rows:3,"data-testid":"textarea-special-instructions"})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"technicalRequirements",children:"Technical Requirements"}),e.jsx(F,{id:"technicalRequirements",placeholder:"Device requirements, internet speed, software needed...",value:t.technicalRequirements||"",onChange:n=>s({technicalRequirements:n.target.value}),rows:3,"data-testid":"textarea-technical-requirements"})]})]})]}),e.jsxs(y,{children:[e.jsx(w,{children:e.jsxs(C,{className:"flex items-center gap-2",children:[e.jsx($e,{className:"w-5 h-5"}),"Registration & Timing"]})}),e.jsx(b,{className:"space-y-4",children:e.jsxs("div",{children:[e.jsx(o,{htmlFor:"registrationDeadline",children:"Registration Deadline"}),e.jsx(g,{id:"registrationDeadline",type:"datetime-local",value:t.registrationDeadline?new Date(t.registrationDeadline).toISOString().slice(0,16):"",onChange:n=>s({registrationDeadline:n.target.value?new Date(n.target.value).toISOString():null}),"data-testid":"input-registration-deadline"})]})})]}),e.jsxs(y,{children:[e.jsx(w,{children:e.jsxs(C,{className:"flex items-center gap-2",children:[e.jsx(pe,{className:"w-5 h-5"}),"Participant Requirements"]})}),e.jsx(b,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(o,{htmlFor:"ageRestrictions",children:"Age Restrictions"}),e.jsx(g,{id:"ageRestrictions",placeholder:"e.g., 18+ or All ages welcome",value:t.ageRestrictions||"",onChange:n=>s({ageRestrictions:n.target.value}),"data-testid":"input-age-restrictions"})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"dressCode",children:"Dress Code"}),e.jsx(g,{id:"dressCode",placeholder:"e.g., Business casual, Themed attire",value:t.dressCode||"",onChange:n=>s({dressCode:n.target.value}),"data-testid":"input-dress-code"})]})]})})]}),e.jsxs(y,{children:[e.jsx(w,{children:e.jsxs(C,{className:"flex items-center gap-2",children:[e.jsx(la,{className:"w-5 h-5"}),"Accessibility & Accommodations"]})}),e.jsxs(b,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(o,{htmlFor:"accessibilityInfo",children:"Accessibility Information"}),e.jsx(F,{id:"accessibilityInfo",placeholder:"Accessibility features and accommodations available...",value:t.accessibilityInfo||"",onChange:n=>s({accessibilityInfo:n.target.value}),rows:3,"data-testid":"textarea-accessibility-info"})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"dietaryAccommodations",children:"Dietary Accommodations"}),e.jsx(F,{id:"dietaryAccommodations",placeholder:"Food allergies, dietary restrictions, special meal options...",value:t.dietaryAccommodations||"",onChange:n=>s({dietaryAccommodations:n.target.value}),rows:3,"data-testid":"textarea-dietary-accommodations"})]})]})]}),e.jsxs(y,{children:[e.jsx(w,{children:e.jsxs(C,{className:"flex items-center gap-2",children:[e.jsx(pe,{className:"w-5 h-5"}),"Event Settings"]})}),e.jsxs(b,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"allowParticipants",checked:t.allowParticipants||!1,onChange:n=>s({allowParticipants:n.target.checked}),className:"rounded border-gray-300","data-testid":"checkbox-allow-participants","aria-describedby":"allowParticipants-description"}),e.jsx(o,{htmlFor:"allowParticipants",children:"Allow Participants"})]}),e.jsx("p",{id:"allowParticipants-description",className:"text-sm text-gray-500 mt-1",children:"When enabled, participants can join teams and compete in the trivia. When disabled, this becomes a content-focused presentation without participant interaction."})]})]})]})}var de="Dialog",[Qe,us]=Ot(de),[ga,R]=Qe(de),Be=t=>{const{__scopeDialog:s,children:d,open:n,defaultOpen:l,onOpenChange:m,modal:f=!0}=t,c=h.useRef(null),u=h.useRef(null),[D,A]=Mt({prop:n,defaultProp:l??!1,onChange:m,caller:de});return e.jsx(ga,{scope:s,triggerRef:c,contentRef:u,contentId:xe(),titleId:xe(),descriptionId:xe(),open:D,onOpenChange:A,onOpenToggle:h.useCallback(()=>A(B=>!B),[A]),modal:f,children:d})};Be.displayName=de;var Ve="DialogTrigger",pa=h.forwardRef((t,s)=>{const{__scopeDialog:d,...n}=t,l=R(Ve,d),m=je(s,l.triggerRef);return e.jsx(ne.button,{type:"button","aria-haspopup":"dialog","aria-expanded":l.open,"aria-controls":l.contentId,"data-state":Ne(l.open),...n,ref:m,onClick:re(t.onClick,l.onOpenToggle)})});pa.displayName=Ve;var ye="DialogPortal",[fa,We]=Qe(ye,{forceMount:void 0}),Je=t=>{const{__scopeDialog:s,forceMount:d,children:n,container:l}=t,m=R(ye,s);return e.jsx(fa,{scope:s,forceMount:d,children:h.Children.map(n,f=>e.jsx(ve,{present:d||m.open,children:e.jsx(_t,{asChild:!0,container:l,children:f})}))})};Je.displayName=ye;var ce="DialogOverlay",Ke=h.forwardRef((t,s)=>{const d=We(ce,t.__scopeDialog),{forceMount:n=d.forceMount,...l}=t,m=R(ce,t.__scopeDialog);return m.modal?e.jsx(ve,{present:n||m.open,children:e.jsx(ja,{...l,ref:s})}):null});Ke.displayName=ce;var va=Lt("DialogOverlay.RemoveScroll"),ja=h.forwardRef((t,s)=>{const{__scopeDialog:d,...n}=t,l=R(ce,d);return e.jsx(Zt,{as:va,allowPinchZoom:!0,shards:[l.contentRef],children:e.jsx(ne.div,{"data-state":Ne(l.open),...n,ref:s,style:{pointerEvents:"auto",...n.style}})})}),Q="DialogContent",Ye=h.forwardRef((t,s)=>{const d=We(Q,t.__scopeDialog),{forceMount:n=d.forceMount,...l}=t,m=R(Q,t.__scopeDialog);return e.jsx(ve,{present:n||m.open,children:m.modal?e.jsx(ya,{...l,ref:s}):e.jsx(ba,{...l,ref:s})})});Ye.displayName=Q;var ya=h.forwardRef((t,s)=>{const d=R(Q,t.__scopeDialog),n=h.useRef(null),l=je(s,d.contentRef,n);return h.useEffect(()=>{const m=n.current;if(m)return Xt(m)},[]),e.jsx(He,{...t,ref:l,trapFocus:d.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:re(t.onCloseAutoFocus,m=>{m.preventDefault(),d.triggerRef.current?.focus()}),onPointerDownOutside:re(t.onPointerDownOutside,m=>{const f=m.detail.originalEvent,c=f.button===0&&f.ctrlKey===!0;(f.button===2||c)&&m.preventDefault()}),onFocusOutside:re(t.onFocusOutside,m=>m.preventDefault())})}),ba=h.forwardRef((t,s)=>{const d=R(Q,t.__scopeDialog),n=h.useRef(!1),l=h.useRef(!1);return e.jsx(He,{...t,ref:s,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:m=>{t.onCloseAutoFocus?.(m),m.defaultPrevented||(n.current||d.triggerRef.current?.focus(),m.preventDefault()),n.current=!1,l.current=!1},onInteractOutside:m=>{t.onInteractOutside?.(m),m.defaultPrevented||(n.current=!0,m.detail.originalEvent.type==="pointerdown"&&(l.current=!0));const f=m.target;d.triggerRef.current?.contains(f)&&m.preventDefault(),m.detail.originalEvent.type==="focusin"&&l.current&&m.preventDefault()}})}),He=h.forwardRef((t,s)=>{const{__scopeDialog:d,trapFocus:n,onOpenAutoFocus:l,onCloseAutoFocus:m,...f}=t,c=R(Q,d),u=h.useRef(null),D=je(s,u);return ea(),e.jsxs(e.Fragment,{children:[e.jsx(ta,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:l,onUnmountAutoFocus:m,children:e.jsx(Ut,{role:"dialog",id:c.contentId,"aria-describedby":c.descriptionId,"aria-labelledby":c.titleId,"data-state":Ne(c.open),...f,ref:D,onDismiss:()=>c.onOpenChange(!1)})}),e.jsxs(e.Fragment,{children:[e.jsx(Na,{titleId:c.titleId}),e.jsx(Ca,{contentRef:u,descriptionId:c.descriptionId})]})]})}),be="DialogTitle",Xe=h.forwardRef((t,s)=>{const{__scopeDialog:d,...n}=t,l=R(be,d);return e.jsx(ne.h2,{id:l.titleId,...n,ref:s})});Xe.displayName=be;var Ze="DialogDescription",et=h.forwardRef((t,s)=>{const{__scopeDialog:d,...n}=t,l=R(Ze,d);return e.jsx(ne.p,{id:l.descriptionId,...n,ref:s})});et.displayName=Ze;var tt="DialogClose",at=h.forwardRef((t,s)=>{const{__scopeDialog:d,...n}=t,l=R(tt,d);return e.jsx(ne.button,{type:"button",...n,ref:s,onClick:re(t.onClick,()=>l.onOpenChange(!1))})});at.displayName=tt;function Ne(t){return t?"open":"closed"}var st="DialogTitleWarning",[xs,rt]=zt(st,{contentName:Q,titleName:be,docsSlug:"dialog"}),Na=({titleId:t})=>{const s=rt(st),d=`\`${s.contentName}\` requires a \`${s.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${s.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${s.docsSlug}`;return h.useEffect(()=>{t&&(document.getElementById(t)||console.error(d))},[d,t]),null},wa="DialogDescriptionWarning",Ca=({contentRef:t,descriptionId:s})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${rt(wa).contentName}}.`;return h.useEffect(()=>{const l=t.current?.getAttribute("aria-describedby");s&&l&&(document.getElementById(s)||console.warn(n))},[n,t,s]),null},Ia=Be,ka=Je,nt=Ke,it=Ye,ot=Xe,lt=et,Da=at;const Fa=Ia,Sa=ka,ct=h.forwardRef(({className:t,...s},d)=>e.jsx(nt,{ref:d,className:Y("fixed inset-0 z-50 bg-black/90 dark:bg-black/95 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...s}));ct.displayName=nt.displayName;const dt=h.forwardRef(({className:t,children:s,...d},n)=>e.jsxs(Sa,{children:[e.jsx(ct,{}),e.jsxs(it,{ref:n,className:Y("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border-2 border-border bg-white dark:bg-gray-900 text-foreground p-6 shadow-2xl duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...d,children:[s,e.jsxs(Da,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[e.jsx(qt,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));dt.displayName=it.displayName;const mt=({className:t,...s})=>e.jsx("div",{className:Y("flex flex-col space-y-1.5 text-center sm:text-left",t),...s});mt.displayName="DialogHeader";const ut=({className:t,...s})=>e.jsx("div",{className:Y("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...s});ut.displayName="DialogFooter";const xt=h.forwardRef(({className:t,...s},d)=>e.jsx(ot,{ref:d,className:Y("text-lg font-semibold leading-none tracking-tight",t),...s}));xt.displayName=ot.displayName;const ht=h.forwardRef(({className:t,...s},d)=>e.jsx(lt,{ref:d,className:Y("text-sm text-muted-foreground",t),...s}));ht.displayName=lt.displayName;console.log("event-manage.tsx module loaded!");function hs({eventId:t}={}){console.log("EventManage component is mounting!");const[,s]=$t("/events/:id/manage");console.log("Route params:",s);const[,d]=Gt(),{toast:n}=_e(),l=Qt(),[m,f]=h.useState(null),[c,u]=h.useState(!1),[D,A]=h.useState(""),[B,Ea]=h.useState(""),[we,gt]=h.useState(!1),{data:pt,isLoading:Ce,error:ft}=Z({queryKey:["/api/auth/me"],retry:!1}),k=t||s?.id;if(console.log("Extracted eventId:",k,"from propEventId:",t,"params:",s),console.log("EventManage - eventId:",k,"propEventId:",t,"params:",s),ft||!Ce&&!pt)return d("/"),null;if(Ce)return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-wine-50 to-champagne-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 wine-gradient rounded-2xl flex items-center justify-center mx-auto mb-4",children:e.jsx(_,{className:"text-champagne-400 h-8 w-8 animate-pulse"})}),e.jsx("p",{className:"text-primary",children:"Loading..."})]})});if(!k)return console.error("No eventId provided to EventManage component"),e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-wine-50 to-champagne-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 wine-gradient rounded-2xl flex items-center justify-center mx-auto mb-4",children:e.jsx(_,{className:"text-champagne-400 h-8 w-8"})}),e.jsx("h1",{className:"text-2xl font-bold text-foreground mb-2",children:"Event Not Found"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"No event ID was provided."}),e.jsx(j,{onClick:()=>d("/dashboard"),variant:"outline",children:"Return to Dashboard"})]})});const{data:r,isLoading:vt,error:Ta}=Z({queryKey:["/api/events",k],enabled:!!k,retry:!1}),{data:me=[],isLoading:Pa}=Z({queryKey:["/api/events",k,"questions"],enabled:!!k,retry:!1}),{data:ue=[],isLoading:jt}=Z({queryKey:["/api/events",k,"fun-facts"],enabled:!!k,retry:!1}),{register:U,handleSubmit:yt,setValue:M,watch:ie,reset:Ie,formState:{errors:V,isDirty:bt}}=Wt({defaultValues:{title:r?.title||"",description:r?.description||"",eventType:r?.eventType||"",maxParticipants:r?.maxParticipants||50,difficulty:r?.difficulty||"mixed",eventDate:r?.eventDate?Me(r.eventDate):"",eventTime:r?.eventTime||"",location:r?.location||"",sponsoringOrganization:r?.sponsoringOrganization||""}});h.useEffect(()=>{r&&(Ie({title:r.title||"",description:r.description||"",eventType:r.eventType||"",maxParticipants:r.maxParticipants||50,difficulty:r.difficulty||"mixed",eventDate:r.eventDate?Me(r.eventDate):"",eventTime:r.eventTime||"",location:r.location||"",sponsoringOrganization:r.sponsoringOrganization||"",logoUrl:r.logoUrl||void 0,backgroundImageUrl:r.backgroundImageUrl||void 0,eventCopy:r.eventCopy||void 0,welcomeMessage:r.welcomeMessage||void 0,thankYouMessage:r.thankYouMessage||void 0,primaryColor:r.primaryColor||void 0,secondaryColor:r.secondaryColor||void 0,fontFamily:r.fontFamily||void 0,contactEmail:r.contactEmail||void 0,contactPhone:r.contactPhone||void 0,websiteUrl:r.websiteUrl||void 0,socialLinks:r.socialLinks||void 0,prizeInformation:r.prizeInformation||void 0,eventRules:r.eventRules||void 0,specialInstructions:r.specialInstructions||void 0,accessibilityInfo:r.accessibilityInfo||void 0,dietaryAccommodations:r.dietaryAccommodations||void 0,dressCode:r.dressCode||void 0,ageRestrictions:r.ageRestrictions||void 0,technicalRequirements:r.technicalRequirements||void 0,registrationDeadline:r.registrationDeadline||void 0,cancellationPolicy:r.cancellationPolicy||void 0,refundPolicy:r.refundPolicy||void 0,sponsorInformation:r.sponsorInformation||void 0,allowParticipants:r.allowParticipants||!1}),r.eventType&&M("eventType",r.eventType,{shouldValidate:!0,shouldDirty:!1}),setTimeout(()=>{!ie("eventType")&&r.eventType&&M("eventType",r.eventType,{shouldValidate:!0,shouldDirty:!1})},50))},[r,Ie,M,ie]);const W=K({mutationFn:async a=>{const x=await fetch(`/api/events/${k}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a),credentials:"include"});if(!x.ok)try{const I=await x.json();throw new Error(I.error||"Failed to update event")}catch{throw new Error("Failed to update event")}return x.json()},onSuccess:()=>{l.invalidateQueries({queryKey:["/api/events",k]}),n({title:"Event Updated",description:"Event details saved successfully."})},onError:a=>{n({title:"Update Failed",description:a.message||"An error occurred while saving the event.",variant:"destructive"})}}),H=K({mutationFn:async a=>{const x=await fetch(`/api/events/${k}/status`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:a}),credentials:"include"});if(!x.ok)try{const I=await x.json();throw new Error(I.error||"Failed to update status")}catch{throw new Error("Failed to update status")}return x.json()},onSuccess:()=>{l.invalidateQueries({queryKey:["/api/events",k]}),n({title:"Status Updated",description:"Event status changed."})},onError:a=>{n({title:"Status Update Failed",description:a.message||"Could not update event status.",variant:"destructive"})}}),Nt=a=>{const x={...a,eventDate:a.eventDate?Vt(a.eventDate,a.eventTime).toISOString():a.eventDate};W.mutate(x)};function wt({question:a,onSave:x,onCancel:I,isLoading:E}){const[p,P]=h.useState({question:a.question||"",correctAnswer:a.correctAnswer||"",options:Array.isArray(a.options)?[...a.options]:[],points:a.points||100,timeLimit:a.timeLimit||30,difficulty:a.difficulty||"medium",category:a.category||"",explanation:a.explanation||"",orderIndex:a.orderIndex||1,backgroundImageUrl:a.backgroundImageUrl||""}),[X,kt]=h.useState(""),[Fe,Dt]=h.useState([]),[Se,Ee]=h.useState(!1),[Te,Pe]=h.useState(null),[S,Re]=h.useState(null),[Ft,Ae]=h.useState(!1),{data:T,refetch:St}=Z({queryKey:["/api/eventimages/question",a.id],queryFn:async()=>{const i=await fetch(`/api/eventimages/question/${a.id}`,{credentials:"include"});if(!i.ok)throw new Error("Failed to fetch event image");return i.json()}}),[O,z]=h.useState({unsplashImageId:"",sizeVariant:"regular",usageContext:"question_background",searchContext:""});h.useEffect(()=>{if(T?.eventImage){const i=T.eventImage;z({unsplashImageId:i.unsplashImageId||"",sizeVariant:i.sizeVariant||"regular",usageContext:i.usageContext||"question_background",searchContext:i.searchContext||""})}},[T]);const le=K({mutationFn:async()=>{const i=await fetch(`/api/eventimages/question/${a.id}/replace`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(O),credentials:"include"});if(!i.ok){const v=await i.json();throw new Error(v.error||"Failed to save event image")}return i.json()},onSuccess:()=>{St(),n({title:"Event Image Saved",description:"Event image record has been saved successfully."})},onError:i=>{n({title:"Save Failed",description:i.message,variant:"destructive"})}}),Et=(i,v)=>{const J=[...p.options];J[i]=v,P({...p,options:J})},Tt=async()=>{if(X.trim()){Ee(!0),Pe(null);try{const i=await fetch(`/api/unsplash/search?query=${encodeURIComponent(X)}&perPage=12`);if(!i.ok){const J=await i.json();throw new Error(J.error||"Search failed")}const v=await i.json();Dt(v.results||[])}catch(i){Pe(i.message)}finally{Ee(!1)}}},Pt=i=>{Re(i),P(v=>({...v,backgroundImageUrl:i.urls.regular})),z({unsplashImageId:i.id,sizeVariant:"regular",usageContext:"question_background",searchContext:X||""})},Rt=async()=>{if(S?.links?.download_location)try{Ae(!0),await fetch("/api/unsplash/track-download",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({downloadUrl:S.links.download_location})})}catch{}finally{Ae(!1)}},At=async()=>{console.log("handleSave called, selectedImage:",S);const i={...a,question:p.question,correctAnswer:p.correctAnswer,options:p.options,points:p.points,timeLimit:p.timeLimit,difficulty:p.difficulty,category:p.category,explanation:p.explanation,orderIndex:p.orderIndex,backgroundImageUrl:p.backgroundImageUrl||null};if(console.log("Calling onSave with question and selectedImage:",{question:i,selectedImage:S}),x(i,S||void 0),O.unsplashImageId){console.log("Saving EventImage record with form data:",O);try{await le.mutateAsync()}catch(v){console.error("Failed to save EventImage record:",v)}}Rt()};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(o,{className:"text-foreground font-medium",children:"Question"}),e.jsx(F,{value:p.question,onChange:i=>P({...p,question:i.target.value}),className:"mt-1 bg-background border-border text-foreground placeholder:text-muted-foreground focus:border-primary focus:ring-1 focus:ring-primary",rows:3,"data-testid":"textarea-edit-question"})]}),a.type==="multiple_choice"&&e.jsxs("div",{children:[e.jsx(o,{className:"text-foreground font-medium",children:"Options"}),e.jsx("div",{className:"space-y-2 mt-1",children:p.options.map((i,v)=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx("span",{className:"w-8 h-10 bg-muted border border-border rounded flex items-center justify-center text-sm font-medium text-foreground",children:String.fromCharCode(65+v)}),e.jsx(g,{value:i,onChange:J=>Et(v,J.target.value),placeholder:`Option ${String.fromCharCode(65+v)}`,"data-testid":`input-edit-option-${v}`,className:"bg-background border-border text-foreground placeholder:text-muted-foreground focus:border-primary focus:ring-1 focus:ring-primary"})]},v))})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(o,{className:"text-foreground font-medium",children:"Correct Answer"}),e.jsx(g,{value:p.correctAnswer,onChange:i=>P({...p,correctAnswer:i.target.value}),className:"mt-1 bg-background border-border text-foreground placeholder:text-muted-foreground focus:border-primary focus:ring-1 focus:ring-primary","data-testid":"input-edit-correct-answer"})]}),e.jsxs("div",{children:[e.jsx(o,{className:"text-foreground font-medium",children:"Points"}),e.jsx(g,{type:"number",value:p.points,onChange:i=>P({...p,points:parseInt(i.target.value)||0}),className:"mt-1 bg-background border-border text-foreground placeholder:text-muted-foreground focus:border-primary focus:ring-1 focus:ring-primary",min:10,max:500,"data-testid":"input-edit-points"})]}),e.jsxs("div",{children:[e.jsx(o,{className:"text-foreground font-medium",children:"Time Limit (s)"}),e.jsx(g,{type:"number",value:p.timeLimit,onChange:i=>P({...p,timeLimit:parseInt(i.target.value)||30}),className:"mt-1 bg-background border-border text-foreground placeholder:text-muted-foreground focus:border-primary focus:ring-1 focus:ring-primary",min:5,max:300,"data-testid":"input-edit-timeLimit"})]}),e.jsxs("div",{children:[e.jsx(o,{className:"text-foreground font-medium",children:"Difficulty"}),e.jsxs(ee,{value:p.difficulty,onValueChange:i=>P({...p,difficulty:i}),children:[e.jsx(te,{className:"mt-1 bg-background border-border text-foreground focus:border-primary focus:ring-1 focus:ring-primary","data-testid":"select-edit-difficulty",children:e.jsx(ae,{})}),e.jsxs(se,{className:"bg-popover border-border",children:[e.jsx(N,{value:"easy",className:"text-popover-foreground hover:bg-accent hover:text-accent-foreground",children:"Easy"}),e.jsx(N,{value:"medium",className:"text-popover-foreground hover:bg-accent hover:text-accent-foreground",children:"Medium"}),e.jsx(N,{value:"hard",className:"text-popover-foreground hover:bg-accent hover:text-accent-foreground",children:"Hard"})]})]})]}),e.jsxs("div",{children:[e.jsx(o,{className:"text-foreground font-medium",children:"Category"}),e.jsx(g,{value:p.category,onChange:i=>P({...p,category:i.target.value}),className:"mt-1 bg-background border-border text-foreground placeholder:text-muted-foreground focus:border-primary focus:ring-1 focus:ring-primary",placeholder:"wine, geography, etc","data-testid":"input-edit-category"})]}),e.jsxs("div",{children:[e.jsx(o,{className:"text-foreground font-medium",children:"Order #"}),e.jsx(g,{type:"number",value:p.orderIndex,onChange:i=>P({...p,orderIndex:parseInt(i.target.value)||1}),className:"mt-1 bg-background border-border text-foreground placeholder:text-muted-foreground focus:border-primary focus:ring-1 focus:ring-primary",min:1,"data-testid":"input-edit-orderIndex"})]})]}),e.jsxs("div",{children:[e.jsx(o,{className:"text-foreground font-medium",children:"Explanation (shown after answering)"}),e.jsx(F,{value:p.explanation,onChange:i=>P({...p,explanation:i.target.value}),rows:3,className:"mt-1 bg-background border-border text-foreground placeholder:text-muted-foreground focus:border-primary focus:ring-1 focus:ring-primary","data-testid":"textarea-edit-explanation"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(o,{className:"text-foreground font-medium",children:"Background Image"}),p.backgroundImageUrl&&e.jsx(j,{type:"button",variant:"outline",size:"sm",onClick:()=>{P({...p,backgroundImageUrl:""}),Re(null)},"data-testid":"button-remove-image",className:"border-border text-foreground hover:bg-accent hover:text-accent-foreground",children:"Remove"})]}),p.backgroundImageUrl?e.jsx("div",{className:"relative",children:e.jsx("img",{src:p.backgroundImageUrl,alt:"Selected background",className:"rounded-md w-full h-40 object-cover border border-border","data-testid":"image-selected-preview"})}):e.jsx("p",{className:"text-sm text-muted-foreground",children:"No image selected."}),e.jsxs("div",{className:"border border-border rounded-md p-3 space-y-3 bg-muted/50",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(g,{placeholder:"Search Unsplash (e.g., Oregon coast)",value:X,onChange:i=>kt(i.target.value),"data-testid":"input-unsplash-query",className:"bg-background border-border text-foreground placeholder:text-muted-foreground focus:border-primary focus:ring-1 focus:ring-primary"}),e.jsx(j,{type:"button",onClick:Tt,disabled:Se,"data-testid":"button-unsplash-search",className:"bg-primary text-primary-foreground hover:bg-primary/90",children:Se?"Searching...":"Search"})]}),Te&&e.jsx("p",{className:"text-sm text-destructive","data-testid":"error-unsplash",children:Te}),Fe.length>0&&e.jsx("div",{className:"grid grid-cols-4 gap-2 max-h-48 overflow-y-auto","data-testid":"grid-unsplash-results",children:Fe.map((i,v)=>e.jsxs("button",{type:"button",onClick:()=>Pt(i),className:`group relative border rounded-md overflow-hidden focus:outline-none ${S?.id===i.id?"ring-2 ring-wine-500":"hover:ring-2 hover:ring-wine-300"}`,"data-testid":`unsplash-result-${v}`,children:[e.jsx("img",{src:i.urls.thumb,alt:i.alt_description||i.description||"img",className:"w-full h-16 object-cover"}),S?.id===i.id&&e.jsx("span",{className:"absolute inset-0 bg-wine-600/40 flex items-center justify-center text-white text-xs font-medium",children:"Selected"})]},i.id))}),S&&e.jsxs("p",{className:"text-[11px] text-muted-foreground","data-testid":"text-unsplash-attribution",children:["Photo by ",e.jsx("a",{className:"underline text-primary hover:text-primary/80",target:"_blank",rel:"noreferrer",href:`${S.user.links.html}?utm_source=TriviaSpark&utm_medium=referral`,children:S.user.name})," on ",e.jsx("a",{className:"underline text-primary hover:text-primary/80",target:"_blank",rel:"noreferrer",href:`${S.links.html}?utm_source=TriviaSpark&utm_medium=referral`,children:"Unsplash"})]})]})]}),e.jsxs(y,{className:"mt-4 border-2 border-wine-300 bg-card",children:[e.jsxs(w,{className:"pb-3 bg-wine-50 dark:bg-wine-900/20",children:[e.jsx(C,{className:"text-sm font-medium text-wine-800 dark:text-wine-200",children:"ðŸ–¼ï¸ Event Image Management"}),e.jsx("p",{className:"text-xs text-wine-600 dark:text-wine-300",children:"Configure and manage image metadata for this question"})]}),e.jsxs(b,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"unsplashImageId",className:"text-xs text-foreground font-medium",children:"Unsplash Image ID"}),e.jsx(g,{id:"unsplashImageId",value:O.unsplashImageId,onChange:i=>z(v=>({...v,unsplashImageId:i.target.value})),placeholder:"Enter Unsplash image ID",className:"text-xs bg-background border-border text-foreground placeholder:text-muted-foreground focus:border-primary focus:ring-1 focus:ring-primary"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"sizeVariant",className:"text-xs text-foreground font-medium",children:"Size Variant"}),e.jsxs(ee,{value:O.sizeVariant,onValueChange:i=>z(v=>({...v,sizeVariant:i})),children:[e.jsx(te,{className:"text-xs bg-background border-border text-foreground focus:border-primary focus:ring-1 focus:ring-primary",children:e.jsx(ae,{placeholder:"Select size"})}),e.jsxs(se,{className:"bg-popover border-border",children:[e.jsx(N,{value:"thumb",className:"text-popover-foreground hover:bg-accent hover:text-accent-foreground",children:"Thumb"}),e.jsx(N,{value:"small",className:"text-popover-foreground hover:bg-accent hover:text-accent-foreground",children:"Small"}),e.jsx(N,{value:"regular",className:"text-popover-foreground hover:bg-accent hover:text-accent-foreground",children:"Regular"}),e.jsx(N,{value:"full",className:"text-popover-foreground hover:bg-accent hover:text-accent-foreground",children:"Full"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"usageContext",className:"text-xs text-foreground font-medium",children:"Usage Context"}),e.jsxs(ee,{value:O.usageContext,onValueChange:i=>z(v=>({...v,usageContext:i})),children:[e.jsx(te,{className:"text-xs bg-background border-border text-foreground focus:border-primary focus:ring-1 focus:ring-primary",children:e.jsx(ae,{placeholder:"Select usage"})}),e.jsxs(se,{className:"bg-popover border-border",children:[e.jsx(N,{value:"question_background",className:"text-popover-foreground hover:bg-accent hover:text-accent-foreground",children:"Question Background"}),e.jsx(N,{value:"event_banner",className:"text-popover-foreground hover:bg-accent hover:text-accent-foreground",children:"Event Banner"}),e.jsx(N,{value:"category_icon",className:"text-popover-foreground hover:bg-accent hover:text-accent-foreground",children:"Category Icon"}),e.jsx(N,{value:"promotional_material",className:"text-popover-foreground hover:bg-accent hover:text-accent-foreground",children:"Promotional Material"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"searchContext",className:"text-xs text-foreground font-medium",children:"Search Context"}),e.jsx(g,{id:"searchContext",value:O.searchContext,onChange:i=>z(v=>({...v,searchContext:i.target.value})),placeholder:"Search terms used",className:"text-xs bg-background border-border text-foreground placeholder:text-muted-foreground focus:border-primary focus:ring-1 focus:ring-primary"})]})]}),T?.eventImage&&e.jsxs("div",{className:"border-t pt-4",children:[e.jsx(o,{className:"text-xs font-medium text-muted-foreground",children:"Current Image Info"}),e.jsxs("div",{className:"mt-2 grid grid-cols-2 gap-2 text-xs text-muted-foreground",children:[e.jsxs("div",{children:["Created: ",new Date(T.eventImage.createdAt).toLocaleString()]}),e.jsxs("div",{children:["Downloaded: ",T.eventImage.downloadTracked?"Yes":"No"]}),T.eventImage.attributionText&&e.jsxs("div",{className:"col-span-2",children:["Attribution: ",e.jsx("a",{href:T.eventImage.attributionUrl,target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:text-primary/80 hover:underline",children:T.eventImage.attributionText})]}),T.eventImage.imageUrl&&e.jsx("div",{className:"col-span-2",children:e.jsx("img",{src:T.eventImage.thumbnailUrl||T.eventImage.imageUrl,alt:"Current image",className:"w-16 h-16 object-cover rounded border"})})]})]}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsx(j,{type:"button",variant:"outline",size:"sm",onClick:()=>{S&&z({unsplashImageId:S.id,sizeVariant:"regular",usageContext:"question_background",searchContext:X||""})},disabled:!S,className:"text-xs border-border text-foreground hover:bg-accent hover:text-accent-foreground",children:"Populate from Selected Image"}),e.jsx(j,{type:"button",size:"sm",onClick:()=>le.mutate(),disabled:le.isPending||!O.unsplashImageId,className:"text-xs bg-primary text-primary-foreground hover:bg-primary/90",children:le.isPending?"Saving...":"Save Image Record"})]})]})]}),e.jsxs(ut,{className:"pt-2",children:[e.jsx(j,{onClick:At,disabled:E||Ft,className:"flex-1 bg-primary text-primary-foreground hover:bg-primary/90","data-testid":"button-save-question",children:E?e.jsxs(e.Fragment,{children:[e.jsx(he,{className:"mr-2 h-4 w-4 animate-pulse"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(he,{className:"mr-2 h-4 w-4"}),"Save Changes"]})}),e.jsx(j,{onClick:I,variant:"outline",disabled:E,"data-testid":"button-cancel-edit",className:"border-border text-foreground hover:bg-accent hover:text-accent-foreground",children:"Cancel"})]})]})}const oe=a=>{H.mutate(a)},Ct=K({mutationFn:async({topic:a,type:x})=>{const I=await fetch("/api/questions/generate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({eventId:k,topic:a,type:x,count:1}),credentials:"include"});if(!I.ok){const E=await I.json();throw new Error(E.error||"Failed to generate question")}return I.json()},onSuccess:()=>{l.invalidateQueries({queryKey:["/api/events",k,"questions"]}),A(""),n({title:"Question Generated",description:"AI question has been added to your event."})},onError:a=>{n({title:"Generation Failed",description:a.message,variant:"destructive"})}}),ke=K({mutationFn:async({question:a,selectedImage:x})=>{const I={question:a.question,type:a.type,options:a.options,correctAnswer:a.correctAnswer,difficulty:a.difficulty,category:a.category,explanation:a.explanation,timeLimit:a.timeLimit,orderIndex:a.orderIndex,aiGenerated:a.aiGenerated,backgroundImageUrl:a.backgroundImageUrl};x?(console.log("Adding selectedImage to request:",x),I.selectedImage={id:x.id,author:x.user.name,authorUrl:x.user.links.html,photoUrl:x.urls.regular,downloadUrl:x.links.download_location||""},console.log("Final requestBody.selectedImage:",I.selectedImage)):console.log("No selectedImage provided to mutation"),console.log("Sending PUT request with body:",I);const E=await fetch(`/api/questions/${a.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(I),credentials:"include"});if(!E.ok){const p=await E.json();throw new Error(p.error||"Failed to update question")}return E.json()},onSuccess:()=>{l.invalidateQueries({queryKey:["/api/events",k,"questions"]}),f(null),n({title:"Question Updated",description:"Question has been saved successfully."})},onError:a=>{n({title:"Update Failed",description:a.message,variant:"destructive"})}}),It=K({mutationFn:async a=>{const x=await fetch(`/api/questions/${a}`,{method:"DELETE",credentials:"include"});if(!x.ok){const I=await x.json();throw new Error(I.error||"Failed to delete question")}},onSuccess:()=>{l.invalidateQueries({queryKey:["/api/events",k,"questions"]}),n({title:"Question Deleted",description:"Question has been removed from your event."})},onError:a=>{n({title:"Delete Failed",description:a.message,variant:"destructive"})}}),De=a=>{if(!D.trim()){n({title:"Topic Required",description:"Please enter a topic for the AI question.",variant:"destructive"});return}u(!0),Ct.mutate({topic:D,type:a},{onSettled:()=>u(!1)})};return vt?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-wine-50 to-champagne-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 wine-gradient rounded-2xl flex items-center justify-center mx-auto mb-4",children:e.jsx(_,{className:"text-champagne-400 h-8 w-8 animate-pulse"})}),e.jsx("p",{className:"text-primary",children:"Loading event..."})]})}):r?e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-wine-50 to-champagne-50",children:[e.jsx("div",{className:"wine-gradient shadow-lg",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsxs(j,{variant:"ghost",onClick:()=>d("/dashboard"),className:"text-white hover:bg-white/10 mr-4","data-testid":"button-back",children:[e.jsx(aa,{className:"mr-2 h-4 w-4"}),"Back"]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-white","data-testid":"text-page-title",children:"Manage Event"}),e.jsx("p",{className:"text-champagne-200","data-testid":"text-event-title",children:r.title})]})]}),e.jsx(L,{variant:r.status==="active"?"default":"secondary",className:`text-sm ${r.status==="active"?"bg-emerald-100 text-emerald-800":""}`,"data-testid":"badge-event-status",children:r.status})]})})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs(Yt,{defaultValue:"details",className:"space-y-6",children:[e.jsxs(Ht,{className:"grid w-full grid-cols-7","data-testid":"tabs-event-management",children:[e.jsxs(q,{value:"details","data-testid":"tab-details",children:[e.jsx(sa,{className:"mr-2 h-4 w-4"}),"Details"]}),e.jsxs(q,{value:"branding","data-testid":"tab-branding",children:[e.jsx(Ge,{className:"mr-2 h-4 w-4"}),"Branding"]}),e.jsxs(q,{value:"event-info","data-testid":"tab-event-info",children:[e.jsx(qe,{className:"mr-2 h-4 w-4"}),"Event Info"]}),e.jsxs(q,{value:"contact","data-testid":"tab-contact",children:[e.jsx(Le,{className:"mr-2 h-4 w-4"}),"Contact"]}),e.jsxs(q,{value:"trivia","data-testid":"tab-trivia",children:[e.jsx(_,{className:"mr-2 h-4 w-4"}),"Trivia"]}),e.jsxs(q,{value:"funfacts","data-testid":"tab-funfacts",children:[e.jsx(G,{className:"mr-2 h-4 w-4"}),"Fun Facts"]}),e.jsxs(q,{value:"status","data-testid":"tab-status",children:[e.jsx(ze,{className:"mr-2 h-4 w-4"}),"Status"]})]}),e.jsx($,{value:"branding",children:e.jsx(ua,{event:r,onUpdate:a=>{Object.keys(a).forEach(x=>{M(x,a[x])})},isLoading:W.isPending})}),e.jsx($,{value:"event-info",children:e.jsx(ha,{event:r,onUpdate:a=>{Object.keys(a).forEach(x=>{M(x,a[x])})},isLoading:W.isPending})}),e.jsx($,{value:"contact",children:e.jsx(xa,{event:r,onUpdate:a=>{Object.keys(a).forEach(x=>{M(x,a[x])})},isLoading:W.isPending})}),e.jsx($,{value:"details",children:e.jsxs(y,{className:"trivia-card","data-testid":"card-event-details",children:[e.jsx(w,{children:e.jsx(C,{className:"wine-text",children:"Edit Event Details"})}),e.jsx(b,{children:e.jsxs("form",{onSubmit:yt(Nt),className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(o,{htmlFor:"title",children:"Event Title *"}),e.jsx(g,{id:"title",...U("title",{required:"Title is required"}),className:"mt-1","data-testid":"input-title"}),V.title&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:V.title.message})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(o,{htmlFor:"description",children:"Description"}),e.jsx(F,{id:"description",...U("description"),rows:3,className:"mt-1","data-testid":"input-description"})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"eventType",children:"Event Type *"}),e.jsxs(ee,{value:ie("eventType")||"",onValueChange:a=>{M("eventType",a,{shouldDirty:!0,shouldValidate:!0})},children:[e.jsx(te,{className:"mt-1","data-testid":"select-event-type",children:e.jsx(ae,{placeholder:"Select event type"})}),e.jsxs(se,{children:[e.jsx(N,{value:"wine-dinner",children:"Wine Dinner"}),e.jsx(N,{value:"corporate",children:"Corporate Event"}),e.jsx(N,{value:"party",children:"Party"}),e.jsx(N,{value:"educational",children:"Educational"}),e.jsx(N,{value:"fundraiser",children:"Fundraiser"})]})]}),V.eventType&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:V.eventType.message})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"difficulty",children:"Difficulty"}),e.jsxs(ee,{value:ie("difficulty")||"",onValueChange:a=>M("difficulty",a,{shouldDirty:!0}),children:[e.jsx(te,{className:"mt-1","data-testid":"select-difficulty",children:e.jsx(ae,{placeholder:"Select difficulty"})}),e.jsxs(se,{children:[e.jsx(N,{value:"easy",children:"Easy"}),e.jsx(N,{value:"medium",children:"Medium"}),e.jsx(N,{value:"hard",children:"Hard"}),e.jsx(N,{value:"mixed",children:"Mixed"})]})]})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"maxParticipants",children:"Max Participants"}),e.jsx(g,{id:"maxParticipants",type:"number",...U("maxParticipants",{required:"Max participants is required",min:{value:1,message:"Must be at least 1"},max:{value:500,message:"Maximum 500 participants"},valueAsNumber:!0}),className:"mt-1","data-testid":"input-max-participants"}),V.maxParticipants&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:V.maxParticipants.message})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"eventDate",children:"Event Date"}),e.jsx(g,{id:"eventDate",type:"date",...U("eventDate"),className:"mt-1","data-testid":"input-event-date"})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"eventTime",children:"Event Time"}),e.jsx(g,{id:"eventTime",...U("eventTime"),placeholder:"e.g., 7:00 PM",className:"mt-1","data-testid":"input-event-time"})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"location",children:"Location"}),e.jsx(g,{id:"location",...U("location"),placeholder:"Event venue",className:"mt-1","data-testid":"input-location"})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"sponsoringOrganization",children:"Sponsoring Organization"}),e.jsx(g,{id:"sponsoringOrganization",...U("sponsoringOrganization"),placeholder:"Organization name",className:"mt-1","data-testid":"input-sponsoring-org"})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(j,{type:"submit",disabled:W.isPending||!bt,className:"trivia-button-primary","data-testid":"button-save-event",children:W.isPending?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin mr-2 h-4 w-4 border-2 border-white border-t-transparent rounded-full"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(he,{className:"mr-2 h-4 w-4"}),"Save Changes"]})})})]})})]})}),e.jsx($,{value:"trivia",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs(y,{className:"trivia-card","data-testid":"card-ai-generation",children:[e.jsx(w,{children:e.jsxs(C,{className:"wine-text flex items-center",children:[e.jsx(G,{className:"mr-2 h-5 w-5"}),"AI Question Generator"]})}),e.jsx(b,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(o,{htmlFor:"aiTopic",children:"Topic"}),e.jsx(g,{id:"aiTopic",value:D,onChange:a=>A(a.target.value),placeholder:"e.g., Pacific Northwest wines, Local history, Sports trivia",className:"mt-1","data-testid":"input-ai-topic"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(j,{onClick:()=>De("multiple_choice"),disabled:c||!D.trim(),variant:"outline",className:"flex-1","data-testid":"button-generate-multiple-choice",children:[c?e.jsx(_,{className:"mr-2 h-4 w-4 animate-pulse"}):e.jsx(Oe,{className:"mr-2 h-4 w-4"}),"Multiple Choice"]}),e.jsxs(j,{onClick:()=>De("true_false"),disabled:c||!D.trim(),variant:"outline",className:"flex-1","data-testid":"button-generate-true-false",children:[c?e.jsx(_,{className:"mr-2 h-4 w-4 animate-pulse"}):e.jsx(Oe,{className:"mr-2 h-4 w-4"}),"True/False"]})]})]})})]}),e.jsxs(y,{className:"trivia-card","data-testid":"card-questions-list",children:[e.jsx(w,{children:e.jsxs(C,{className:"wine-text flex items-center justify-between",children:[e.jsxs("span",{children:["Event Questions (",me.length,")"]}),e.jsx(j,{variant:"outline",size:"sm",onClick:()=>d(`/events/${k}/manage/trivia`),"data-testid":"button-full-trivia-manage",className:"ml-4",children:"Open Full Manager"})]})}),e.jsx(b,{children:me.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(_,{className:"mx-auto h-12 w-12 mb-4 text-muted-foreground/50"}),e.jsx("p",{className:"mb-2",children:"No questions yet"}),e.jsx("p",{className:"text-sm",children:"Generate AI questions or add your own to get started"})]}):e.jsx("div",{className:"space-y-4",children:me.map((a,x)=>e.jsx("div",{className:"border rounded-lg p-4 hover:bg-gray-50 transition-colors","data-testid":`question-${x}`,children:e.jsx("div",{className:"space-y-3",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs(L,{variant:"secondary",className:"text-xs",children:["#",x+1]}),e.jsx(L,{variant:"outline",className:"text-xs",children:a.type.replace("_"," ")}),a.aiGenerated&&e.jsxs(L,{variant:"outline",className:"text-xs bg-blue-50 text-blue-600",children:[e.jsx(_,{className:"mr-1 h-3 w-3"}),"AI"]}),e.jsxs(L,{variant:"outline",className:"text-xs",children:[a.points||100," pts"]}),e.jsxs(L,{variant:"outline",className:"text-xs",children:[a.timeLimit,"s"]})]}),e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:a.question}),Array.isArray(a.options)&&a.options.length>0&&e.jsx("div",{className:"grid grid-cols-2 gap-2 mb-2",children:a.options.map((I,E)=>e.jsxs("div",{className:`text-sm p-2 rounded ${I===a.correctAnswer?"bg-green-100 text-green-800 font-medium":"bg-gray-100 text-gray-700"}`,children:[String.fromCharCode(65+E),". ",I]},E))}),e.jsxs("p",{className:"text-sm text-green-600 font-medium",children:["Correct Answer: ",a.correctAnswer]}),a.explanation&&e.jsx("p",{className:"text-xs text-gray-500 line-clamp-2",children:a.explanation})]}),e.jsxs("div",{className:"flex gap-2 ml-4",children:[e.jsxs(j,{onClick:()=>d(`/events/${r.id}/manage/trivia/${a.id}`),variant:"outline",size:"sm",className:"text-wine-600 border-wine-300 hover:bg-wine-50","data-testid":`button-edit-full-${x}`,children:[e.jsx(ge,{className:"h-4 w-4 mr-1"}),"Edit with Image Form"]}),e.jsx(j,{onClick:()=>f(a),variant:"ghost",size:"sm","data-testid":`button-edit-${x}`,children:e.jsx(ge,{className:"h-4 w-4"})}),e.jsx(j,{onClick:()=>{confirm("Are you sure you want to delete this question?")&&It.mutate(a.id)},variant:"ghost",size:"sm",className:"text-red-600 hover:text-red-700 hover:bg-red-50","data-testid":`button-delete-${x}`,children:e.jsx(ra,{className:"h-4 w-4"})})]})]})})},a.id))})})]}),e.jsx(Fa,{open:!!m,onOpenChange:a=>{a||f(null)},children:e.jsx(dt,{className:"max-w-3xl bg-white dark:bg-gray-900 border-2 border-border text-foreground shadow-2xl","data-testid":"dialog-edit-question",children:m&&e.jsxs(e.Fragment,{children:[e.jsxs(mt,{className:"space-y-3",children:[e.jsx(xt,{className:"text-foreground text-xl font-semibold",children:"Edit Question"}),e.jsx(ht,{className:"text-muted-foreground",children:"Modify question content, scoring, ordering, and optional background image."})]}),e.jsx(wt,{question:m,onSave:(a,x)=>ke.mutate({question:a,selectedImage:x}),onCancel:()=>f(null),isLoading:ke.isPending})]})})})]})}),e.jsx($,{value:"status",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(y,{className:"trivia-card","data-testid":"card-status-control",children:[e.jsx(w,{children:e.jsx(C,{className:"wine-text",children:"Event Status"})}),e.jsxs(b,{className:"space-y-4",children:[e.jsx("div",{className:"text-center",children:e.jsx(L,{variant:r.status==="active"?"default":"secondary",className:`text-lg px-4 py-2 ${r.status==="active"?"bg-emerald-100 text-emerald-800":""}`,"data-testid":"badge-current-status",children:(r.status||"draft").toUpperCase()})}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(j,{onClick:()=>oe("draft"),disabled:r.status==="draft"||H.isPending,variant:r.status==="draft"?"default":"outline","data-testid":"button-set-draft",children:"Draft"}),e.jsx(j,{onClick:()=>oe("active"),disabled:r.status==="active"||H.isPending,variant:r.status==="active"?"default":"outline","data-testid":"button-set-active",children:"Active"}),e.jsx(j,{onClick:()=>oe("completed"),disabled:r.status==="completed"||H.isPending,variant:r.status==="completed"?"default":"outline","data-testid":"button-set-completed",children:"Completed"}),e.jsx(j,{onClick:()=>oe("cancelled"),disabled:r.status==="cancelled"||H.isPending,variant:r.status==="cancelled"?"destructive":"outline","data-testid":"button-set-cancelled",children:"Cancelled"})]})]})]}),e.jsxs(y,{className:"trivia-card","data-testid":"card-event-info",children:[e.jsx(w,{children:e.jsx(C,{className:"wine-text",children:"Event Information"})}),e.jsx(b,{className:"space-y-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsx(na,{className:"mr-3 h-4 w-4 text-wine-600"}),e.jsx("span",{className:"font-medium",children:"Date:"}),e.jsx("span",{className:"ml-2","data-testid":"text-info-date",children:r.eventDate?Bt(r.eventDate):"Not set"})]}),e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsx($e,{className:"mr-3 h-4 w-4 text-wine-600"}),e.jsx("span",{className:"font-medium",children:"Time:"}),e.jsx("span",{className:"ml-2","data-testid":"text-info-time",children:r.eventTime||"Not set"})]}),e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsx(ia,{className:"mr-3 h-4 w-4 text-wine-600"}),e.jsx("span",{className:"font-medium",children:"Location:"}),e.jsx("span",{className:"ml-2","data-testid":"text-info-location",children:r.location||"Not set"})]}),e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsx(Ue,{className:"mr-3 h-4 w-4 text-wine-600"}),e.jsx("span",{className:"font-medium",children:"Organization:"}),e.jsx("span",{className:"ml-2","data-testid":"text-info-organization",children:r.sponsoringOrganization||"Not set"})]}),e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsx(pe,{className:"mr-3 h-4 w-4 text-wine-600"}),e.jsx("span",{className:"font-medium",children:"Max Participants:"}),e.jsx("span",{className:"ml-2","data-testid":"text-info-max-participants",children:r.maxParticipants})]})]})})]})]})}),e.jsx($,{value:"funfacts",children:e.jsxs(y,{className:"trivia-card","data-testid":"card-fun-facts",children:[e.jsx(w,{children:e.jsxs(C,{className:"wine-text flex items-center justify-between",children:[e.jsx("span",{children:"Fun Facts Management"}),e.jsxs(j,{onClick:()=>gt(!we),variant:"outline","data-testid":"button-edit-fun-facts",children:[e.jsx(ge,{className:"mr-2 h-4 w-4"}),we?"Cancel":"Edit"]})]})}),e.jsx(b,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-gray-600",children:"Add fun facts about your organization that will be shown between questions during the trivia event."}),jt?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-wine-600"})}):e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsxs("h4",{className:"font-medium mb-2",children:["Current Fun Facts (",ue.length,"):"]}),ue.length>0?e.jsx("div",{className:"space-y-3",children:ue.map((a,x)=>e.jsxs("div",{className:"border-l-4 border-wine-600 pl-3",children:[e.jsxs("h5",{className:"font-medium text-wine-700",children:[x+1,". ",a.title]}),e.jsx("p",{className:"text-gray-700 mt-1",children:a.content})]},a.id))}):e.jsx("p",{className:"text-gray-500",children:"No fun facts available for this event yet."})]})]})})]})})]})})]}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-wine-50 to-champagne-50 flex items-center justify-center",children:e.jsx(y,{className:"max-w-md w-full",children:e.jsxs(b,{className:"text-center py-8",children:[e.jsx("p",{className:"text-muted-foreground mb-4",children:"Event not found"}),e.jsx(j,{onClick:()=>d("/dashboard"),"data-testid":"button-back-events",children:"Back to Dashboard"})]})})})}export{hs as default};
