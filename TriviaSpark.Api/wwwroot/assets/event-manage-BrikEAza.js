import{c as pe,a as nt,r as u,j as e,d as is,e as rs,P as Fe,f as ls,h as le,i as re,k as Ie,l as os,D as cs,m as ds,n as Z,X as ms,o as us,u as xs,b as hs,p as ps}from"./index-CORj5ckH.js";import{u as be}from"./useQuery-BTSkUB1-.js";import{u as ie}from"./useMutation-DysSdz3e.js";import{u as gs}from"./index.esm-BLQw8E2s.js";import{B as f}from"./button-UW33nt9n.js";import{L as h,I as j}from"./label-DyYzwcc5.js";import{T as S}from"./textarea-DcgS4rAM.js";import{C as b,a as w,b as C,c as N}from"./card-RSEwqje_.js";import{B as A}from"./badge-srDLVzK4.js";import{U as js,S as fs,P as Ze}from"./upload-BRFZ-2Km.js";import{S as Y}from"./sparkles-G1wONpPb.js";import{M as it}from"./mail-zrUpnTud.js";import{B as rt}from"./building-2-BeEwPtcQ.js";import{C as vs}from"./circle-alert-DmKAPF2D.js";import{T as lt}from"./trophy-DV2l0MOH.js";import{F as ot,T as ys,a as bs,b as U,c as Q}from"./tabs-x4gksqGV.js";import{C as Pe}from"./clock-Blq5wfsy.js";import{U as ct}from"./users-BzsHQGyz.js";import{h as Ns,R as ws,u as Cs,F as ks,S as Ne,a as we,b as Ce,c as ke,d as E}from"./select-BqWgexoz.js";import{u as De}from"./index-buBrq22D.js";import{B as V}from"./brain-Dw7o39P5.js";import{A as Ds}from"./arrow-left-IQGGiIuG.js";import{P as et}from"./play-qZe_llAI.js";import{S as Se,a as tt}from"./square-pen-CdlY8YoD.js";import{T as Ss}from"./trash-2-e-O87ZLB.js";import{C as Fs}from"./calendar-C1W6LiJD.js";import{M as Is}from"./map-pin-ClKGCL0R.js";import{P as Ps}from"./pause-D_C5quTW.js";import"./index-B15gAq4v.js";/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ts=[["circle",{cx:"16",cy:"4",r:"1",key:"1grugj"}],["path",{d:"m18 19 1-7-6 1",key:"r0i19z"}],["path",{d:"m5 8 3-3 5.5 3-2.36 3.5",key:"9ptxx2"}],["path",{d:"M4.24 14.5a5 5 0 0 0 6.88 6",key:"10kmtu"}],["path",{d:"M13.76 17.5a5 5 0 0 0-6.88-6",key:"2qq6rc"}]],As=pe("accessibility",Ts);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Es=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],dt=pe("palette",Es);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rs=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],Ms=pe("share-2",Rs);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ls=[["path",{d:"M21 4v16",key:"7j8fe9"}],["path",{d:"M6.029 4.285A2 2 0 0 0 3 6v12a2 2 0 0 0 3.029 1.715l9.997-5.998a2 2 0 0 0 .003-3.432z",key:"zs4d6"}]],Os=pe("skip-forward",Ls);function _s({event:t,onUpdate:a,isLoading:c}){const{toast:n}=nt(),[o,r]=u.useState(!1),m=async l=>{r(!0);try{const x=await fetch(`/api/events/${t.id}/generate-copy`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:l}),credentials:"include"});if(!x.ok)throw new Error("Failed to generate copy");const v=await x.json();a({[l==="promotional"?"eventCopy":l==="welcome"?"welcomeMessage":l==="thankyou"?"thankYouMessage":"eventRules"]:v.copy}),n({title:"AI Copy Generated",description:`Generated ${l} content successfully!`})}catch{n({title:"Generation Failed",description:"Failed to generate AI copy. Please try again.",variant:"destructive"})}finally{r(!1)}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(b,{children:[e.jsx(w,{children:e.jsxs(C,{className:"flex items-center gap-2",children:[e.jsx(js,{className:"w-5 h-5"}),"Visual Branding"]})}),e.jsx(N,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(h,{htmlFor:"logoUrl",children:"Event Logo URL"}),e.jsx(j,{id:"logoUrl",placeholder:"https://example.com/logo.png",value:t.logoUrl||"",onChange:l=>a({logoUrl:l.target.value}),"data-testid":"input-logo-url"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Upload your event logo for branding"})]}),e.jsxs("div",{children:[e.jsx(h,{htmlFor:"backgroundImageUrl",children:"Background Image URL"}),e.jsx(j,{id:"backgroundImageUrl",placeholder:"https://example.com/background.jpg",value:t.backgroundImageUrl||"",onChange:l=>a({backgroundImageUrl:l.target.value}),"data-testid":"input-background-url"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Background image for event screens"})]})]})})]}),e.jsxs(b,{children:[e.jsx(w,{children:e.jsxs(C,{className:"flex items-center gap-2",children:[e.jsx(dt,{className:"w-5 h-5"}),"Color Theme"]})}),e.jsxs(N,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(h,{htmlFor:"primaryColor",children:"Primary Color"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(j,{id:"primaryColor",type:"color",value:t.primaryColor||"#7C2D12",onChange:l=>a({primaryColor:l.target.value}),className:"w-16 h-10 border rounded cursor-pointer","data-testid":"input-primary-color"}),e.jsx(j,{placeholder:"#7C2D12",value:t.primaryColor||"#7C2D12",onChange:l=>a({primaryColor:l.target.value}),className:"flex-1"})]})]}),e.jsxs("div",{children:[e.jsx(h,{htmlFor:"secondaryColor",children:"Secondary Color"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(j,{id:"secondaryColor",type:"color",value:t.secondaryColor||"#FEF3C7",onChange:l=>a({secondaryColor:l.target.value}),className:"w-16 h-10 border rounded cursor-pointer","data-testid":"input-secondary-color"}),e.jsx(j,{placeholder:"#FEF3C7",value:t.secondaryColor||"#FEF3C7",onChange:l=>a({secondaryColor:l.target.value}),className:"flex-1"})]})]}),e.jsxs("div",{children:[e.jsx(h,{htmlFor:"fontFamily",children:"Font Family"}),e.jsx(j,{id:"fontFamily",placeholder:"Inter",value:t.fontFamily||"Inter",onChange:l=>a({fontFamily:l.target.value}),"data-testid":"input-font-family"})]})]}),e.jsx("div",{className:"p-4 border rounded-lg",style:{backgroundColor:t.secondaryColor||"#FEF3C7",fontFamily:t.fontFamily||"Inter"},children:e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-xl font-bold mb-2",style:{color:t.primaryColor||"#7C2D12"},children:t.title||"Your Event Title"}),e.jsx(A,{style:{backgroundColor:t.primaryColor||"#7C2D12",color:"white"},children:"Theme Preview"})]})})]})]}),e.jsxs(b,{children:[e.jsx(w,{children:e.jsxs(C,{className:"flex items-center gap-2",children:[e.jsx(Y,{className:"w-5 h-5"}),"AI-Generated Content"]})}),e.jsxs(N,{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(h,{htmlFor:"eventCopy",children:"Promotional Event Copy"}),e.jsxs(f,{type:"button",variant:"outline",size:"sm",onClick:()=>m("promotional"),disabled:o,"data-testid":"button-generate-promotional",children:[e.jsx(Y,{className:"w-3 h-3 mr-1"}),o?"Generating...":"Generate"]})]}),e.jsx(S,{id:"eventCopy",placeholder:"AI will generate engaging promotional copy for your event...",value:t.eventCopy||"",onChange:l=>a({eventCopy:l.target.value}),rows:4,"data-testid":"textarea-event-copy"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(h,{htmlFor:"welcomeMessage",children:"Welcome Message"}),e.jsxs(f,{type:"button",variant:"outline",size:"sm",onClick:()=>m("welcome"),disabled:o,"data-testid":"button-generate-welcome",children:[e.jsx(Y,{className:"w-3 h-3 mr-1"}),"Generate"]})]}),e.jsx(S,{id:"welcomeMessage",placeholder:"Welcome message shown to participants when they join...",value:t.welcomeMessage||"",onChange:l=>a({welcomeMessage:l.target.value}),rows:3,"data-testid":"textarea-welcome-message"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(h,{htmlFor:"thankYouMessage",children:"Thank You Message"}),e.jsxs(f,{type:"button",variant:"outline",size:"sm",onClick:()=>m("thankyou"),disabled:o,"data-testid":"button-generate-thankyou",children:[e.jsx(Y,{className:"w-3 h-3 mr-1"}),"Generate"]})]}),e.jsx(S,{id:"thankYouMessage",placeholder:"Thank you message shown after event completion...",value:t.thankYouMessage||"",onChange:l=>a({thankYouMessage:l.target.value}),rows:3,"data-testid":"textarea-thank-you-message"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(h,{htmlFor:"eventRules",children:"Event Rules"}),e.jsxs(f,{type:"button",variant:"outline",size:"sm",onClick:()=>m("rules"),disabled:o,"data-testid":"button-generate-rules",children:[e.jsx(Y,{className:"w-3 h-3 mr-1"}),"Generate"]})]}),e.jsx(S,{id:"eventRules",placeholder:"Clear rules and guidelines for participants...",value:t.eventRules||"",onChange:l=>a({eventRules:l.target.value}),rows:4,"data-testid":"textarea-event-rules"})]})]})]})]})}function qs({event:t,onUpdate:a,isLoading:c}){const n=x=>{if(!x)return{};if(typeof x=="string")try{return JSON.parse(x)}catch{return{}}return typeof x=="object"?x??{}:{}},o=(x,v)=>{const L={...n(t.socialLinks),[x]:v};a({socialLinks:JSON.stringify(L)})},r=(x,v)=>{const L={...n(t.sponsorInformation),[x]:v};a({sponsorInformation:JSON.stringify(L)})},m=n(t.socialLinks),l=n(t.sponsorInformation);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(b,{children:[e.jsx(w,{children:e.jsxs(C,{className:"flex items-center gap-2",children:[e.jsx(it,{className:"w-5 h-5"}),"Contact Information"]})}),e.jsxs(N,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(h,{htmlFor:"contactEmail",children:"Contact Email"}),e.jsx(j,{id:"contactEmail",type:"email",placeholder:"contact@example.com",value:t.contactEmail||"",onChange:x=>a({contactEmail:x.target.value}),"data-testid":"input-contact-email"})]}),e.jsxs("div",{children:[e.jsx(h,{htmlFor:"contactPhone",children:"Contact Phone"}),e.jsx(j,{id:"contactPhone",type:"tel",placeholder:"+1 (555) 123-4567",value:t.contactPhone||"",onChange:x=>a({contactPhone:x.target.value}),"data-testid":"input-contact-phone"})]})]}),e.jsxs("div",{children:[e.jsx(h,{htmlFor:"websiteUrl",children:"Website URL"}),e.jsx(j,{id:"websiteUrl",type:"url",placeholder:"https://yourorganization.com",value:t.websiteUrl||"",onChange:x=>a({websiteUrl:x.target.value}),"data-testid":"input-website-url"})]})]})]}),e.jsxs(b,{children:[e.jsx(w,{children:e.jsxs(C,{className:"flex items-center gap-2",children:[e.jsx(Ms,{className:"w-5 h-5"}),"Social Media Links"]})}),e.jsx(N,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(h,{htmlFor:"facebook",children:"Facebook"}),e.jsx(j,{id:"facebook",placeholder:"https://facebook.com/yourpage",value:m.facebook||"",onChange:x=>o("facebook",x.target.value),"data-testid":"input-facebook"})]}),e.jsxs("div",{children:[e.jsx(h,{htmlFor:"twitter",children:"Twitter/X"}),e.jsx(j,{id:"twitter",placeholder:"https://twitter.com/yourhandle",value:m.twitter||"",onChange:x=>o("twitter",x.target.value),"data-testid":"input-twitter"})]}),e.jsxs("div",{children:[e.jsx(h,{htmlFor:"instagram",children:"Instagram"}),e.jsx(j,{id:"instagram",placeholder:"https://instagram.com/yourhandle",value:m.instagram||"",onChange:x=>o("instagram",x.target.value),"data-testid":"input-instagram"})]}),e.jsxs("div",{children:[e.jsx(h,{htmlFor:"linkedin",children:"LinkedIn"}),e.jsx(j,{id:"linkedin",placeholder:"https://linkedin.com/company/yourorg",value:m.linkedin||"",onChange:x=>o("linkedin",x.target.value),"data-testid":"input-linkedin"})]})]})})]}),e.jsxs(b,{children:[e.jsx(w,{children:e.jsxs(C,{className:"flex items-center gap-2",children:[e.jsx(rt,{className:"w-5 h-5"}),"Sponsor Information"]})}),e.jsxs(N,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(h,{htmlFor:"sponsorName",children:"Main Sponsor Name"}),e.jsx(j,{id:"sponsorName",placeholder:"Sponsor Company Name",value:l.name||"",onChange:x=>r("name",x.target.value),"data-testid":"input-sponsor-name"})]}),e.jsxs("div",{children:[e.jsx(h,{htmlFor:"sponsorLogoUrl",children:"Sponsor Logo URL"}),e.jsx(j,{id:"sponsorLogoUrl",placeholder:"https://sponsor.com/logo.png",value:l.logoUrl||"",onChange:x=>r("logoUrl",x.target.value),"data-testid":"input-sponsor-logo"})]})]}),e.jsxs("div",{children:[e.jsx(h,{htmlFor:"sponsorWebsite",children:"Sponsor Website"}),e.jsx(j,{id:"sponsorWebsite",type:"url",placeholder:"https://sponsor.com",value:l.website||"",onChange:x=>r("website",x.target.value),"data-testid":"input-sponsor-website"})]}),e.jsxs("div",{children:[e.jsx(h,{htmlFor:"sponsorDescription",children:"Sponsor Description"}),e.jsx(S,{id:"sponsorDescription",placeholder:"Brief description of the sponsor and their involvement...",value:l.description||"",onChange:x=>r("description",x.target.value),rows:3,"data-testid":"textarea-sponsor-description"})]})]})]}),e.jsxs(b,{children:[e.jsx(w,{children:e.jsxs(C,{className:"flex items-center gap-2",children:[e.jsx(vs,{className:"w-5 h-5"}),"Policies & Terms"]})}),e.jsxs(N,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(h,{htmlFor:"cancellationPolicy",children:"Cancellation Policy"}),e.jsx(S,{id:"cancellationPolicy",placeholder:"Explain your event cancellation policy...",value:t.cancellationPolicy||"",onChange:x=>a({cancellationPolicy:x.target.value}),rows:3,"data-testid":"textarea-cancellation-policy"})]}),e.jsxs("div",{children:[e.jsx(h,{htmlFor:"refundPolicy",children:"Refund Policy"}),e.jsx(S,{id:"refundPolicy",placeholder:"Explain your refund policy for participants...",value:t.refundPolicy||"",onChange:x=>a({refundPolicy:x.target.value}),rows:3,"data-testid":"textarea-refund-policy"})]})]})]})]})}function $s({event:t,onUpdate:a,isLoading:c}){return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(b,{children:[e.jsx(w,{children:e.jsxs(C,{className:"flex items-center gap-2",children:[e.jsx(lt,{className:"w-5 h-5"}),"Prize Information"]})}),e.jsx(N,{className:"space-y-4",children:e.jsxs("div",{children:[e.jsx(h,{htmlFor:"prizeInformation",children:"Prize Details"}),e.jsx(S,{id:"prizeInformation",placeholder:"Describe the prizes and rewards for participants...",value:t.prizeInformation||"",onChange:n=>a({prizeInformation:n.target.value}),rows:4,"data-testid":"textarea-prize-information"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Detail what winners can expect to receive"})]})})]}),e.jsxs(b,{children:[e.jsx(w,{children:e.jsxs(C,{className:"flex items-center gap-2",children:[e.jsx(ot,{className:"w-5 h-5"}),"Event Instructions"]})}),e.jsxs(N,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(h,{htmlFor:"specialInstructions",children:"Special Instructions"}),e.jsx(S,{id:"specialInstructions",placeholder:"Any special instructions for participants...",value:t.specialInstructions||"",onChange:n=>a({specialInstructions:n.target.value}),rows:3,"data-testid":"textarea-special-instructions"})]}),e.jsxs("div",{children:[e.jsx(h,{htmlFor:"technicalRequirements",children:"Technical Requirements"}),e.jsx(S,{id:"technicalRequirements",placeholder:"Device requirements, internet speed, software needed...",value:t.technicalRequirements||"",onChange:n=>a({technicalRequirements:n.target.value}),rows:3,"data-testid":"textarea-technical-requirements"})]})]})]}),e.jsxs(b,{children:[e.jsx(w,{children:e.jsxs(C,{className:"flex items-center gap-2",children:[e.jsx(Pe,{className:"w-5 h-5"}),"Registration & Timing"]})}),e.jsx(N,{className:"space-y-4",children:e.jsxs("div",{children:[e.jsx(h,{htmlFor:"registrationDeadline",children:"Registration Deadline"}),e.jsx(j,{id:"registrationDeadline",type:"datetime-local",value:t.registrationDeadline?new Date(t.registrationDeadline).toISOString().slice(0,16):"",onChange:n=>a({registrationDeadline:n.target.value?new Date(n.target.value).toISOString():null}),"data-testid":"input-registration-deadline"})]})})]}),e.jsxs(b,{children:[e.jsx(w,{children:e.jsxs(C,{className:"flex items-center gap-2",children:[e.jsx(ct,{className:"w-5 h-5"}),"Participant Requirements"]})}),e.jsx(N,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(h,{htmlFor:"ageRestrictions",children:"Age Restrictions"}),e.jsx(j,{id:"ageRestrictions",placeholder:"e.g., 18+ or All ages welcome",value:t.ageRestrictions||"",onChange:n=>a({ageRestrictions:n.target.value}),"data-testid":"input-age-restrictions"})]}),e.jsxs("div",{children:[e.jsx(h,{htmlFor:"dressCode",children:"Dress Code"}),e.jsx(j,{id:"dressCode",placeholder:"e.g., Business casual, Themed attire",value:t.dressCode||"",onChange:n=>a({dressCode:n.target.value}),"data-testid":"input-dress-code"})]})]})})]}),e.jsxs(b,{children:[e.jsx(w,{children:e.jsxs(C,{className:"flex items-center gap-2",children:[e.jsx(As,{className:"w-5 h-5"}),"Accessibility & Accommodations"]})}),e.jsxs(N,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(h,{htmlFor:"accessibilityInfo",children:"Accessibility Information"}),e.jsx(S,{id:"accessibilityInfo",placeholder:"Accessibility features and accommodations available...",value:t.accessibilityInfo||"",onChange:n=>a({accessibilityInfo:n.target.value}),rows:3,"data-testid":"textarea-accessibility-info"})]}),e.jsxs("div",{children:[e.jsx(h,{htmlFor:"dietaryAccommodations",children:"Dietary Accommodations"}),e.jsx(S,{id:"dietaryAccommodations",placeholder:"Food allergies, dietary restrictions, special meal options...",value:t.dietaryAccommodations||"",onChange:n=>a({dietaryAccommodations:n.target.value}),rows:3,"data-testid":"textarea-dietary-accommodations"})]})]})]})]})}var ge="Dialog",[mt,Oa]=rs(ge),[zs,M]=mt(ge),ut=t=>{const{__scopeDialog:a,children:c,open:n,defaultOpen:o,onOpenChange:r,modal:m=!0}=t,l=u.useRef(null),x=u.useRef(null),[v,D]=is({prop:n,defaultProp:o??!1,onChange:r,caller:ge});return e.jsx(zs,{scope:a,triggerRef:l,contentRef:x,contentId:De(),titleId:De(),descriptionId:De(),open:v,onOpenChange:D,onOpenToggle:u.useCallback(()=>D(L=>!L),[D]),modal:m,children:c})};ut.displayName=ge;var xt="DialogTrigger",Us=u.forwardRef((t,a)=>{const{__scopeDialog:c,...n}=t,o=M(xt,c),r=Ie(a,o.triggerRef);return e.jsx(le.button,{type:"button","aria-haspopup":"dialog","aria-expanded":o.open,"aria-controls":o.contentId,"data-state":Ee(o.open),...n,ref:r,onClick:re(t.onClick,o.onOpenToggle)})});Us.displayName=xt;var Te="DialogPortal",[Qs,ht]=mt(Te,{forceMount:void 0}),pt=t=>{const{__scopeDialog:a,forceMount:c,children:n,container:o}=t,r=M(Te,a);return e.jsx(Qs,{scope:a,forceMount:c,children:u.Children.map(n,m=>e.jsx(Fe,{present:c||r.open,children:e.jsx(ls,{asChild:!0,container:o,children:m})}))})};pt.displayName=Te;var he="DialogOverlay",gt=u.forwardRef((t,a)=>{const c=ht(he,t.__scopeDialog),{forceMount:n=c.forceMount,...o}=t,r=M(he,t.__scopeDialog);return r.modal?e.jsx(Fe,{present:n||r.open,children:e.jsx(Bs,{...o,ref:a})}):null});gt.displayName=he;var Gs=os("DialogOverlay.RemoveScroll"),Bs=u.forwardRef((t,a)=>{const{__scopeDialog:c,...n}=t,o=M(he,c);return e.jsx(ws,{as:Gs,allowPinchZoom:!0,shards:[o.contentRef],children:e.jsx(le.div,{"data-state":Ee(o.open),...n,ref:a,style:{pointerEvents:"auto",...n.style}})})}),K="DialogContent",jt=u.forwardRef((t,a)=>{const c=ht(K,t.__scopeDialog),{forceMount:n=c.forceMount,...o}=t,r=M(K,t.__scopeDialog);return e.jsx(Fe,{present:n||r.open,children:r.modal?e.jsx(Ws,{...o,ref:a}):e.jsx(Vs,{...o,ref:a})})});jt.displayName=K;var Ws=u.forwardRef((t,a)=>{const c=M(K,t.__scopeDialog),n=u.useRef(null),o=Ie(a,c.contentRef,n);return u.useEffect(()=>{const r=n.current;if(r)return Ns(r)},[]),e.jsx(ft,{...t,ref:o,trapFocus:c.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:re(t.onCloseAutoFocus,r=>{r.preventDefault(),c.triggerRef.current?.focus()}),onPointerDownOutside:re(t.onPointerDownOutside,r=>{const m=r.detail.originalEvent,l=m.button===0&&m.ctrlKey===!0;(m.button===2||l)&&r.preventDefault()}),onFocusOutside:re(t.onFocusOutside,r=>r.preventDefault())})}),Vs=u.forwardRef((t,a)=>{const c=M(K,t.__scopeDialog),n=u.useRef(!1),o=u.useRef(!1);return e.jsx(ft,{...t,ref:a,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:r=>{t.onCloseAutoFocus?.(r),r.defaultPrevented||(n.current||c.triggerRef.current?.focus(),r.preventDefault()),n.current=!1,o.current=!1},onInteractOutside:r=>{t.onInteractOutside?.(r),r.defaultPrevented||(n.current=!0,r.detail.originalEvent.type==="pointerdown"&&(o.current=!0));const m=r.target;c.triggerRef.current?.contains(m)&&r.preventDefault(),r.detail.originalEvent.type==="focusin"&&o.current&&r.preventDefault()}})}),ft=u.forwardRef((t,a)=>{const{__scopeDialog:c,trapFocus:n,onOpenAutoFocus:o,onCloseAutoFocus:r,...m}=t,l=M(K,c),x=u.useRef(null),v=Ie(a,x);return Cs(),e.jsxs(e.Fragment,{children:[e.jsx(ks,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:o,onUnmountAutoFocus:r,children:e.jsx(cs,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":Ee(l.open),...m,ref:v,onDismiss:()=>l.onOpenChange(!1)})}),e.jsxs(e.Fragment,{children:[e.jsx(Ys,{titleId:l.titleId}),e.jsx(Js,{contentRef:x,descriptionId:l.descriptionId})]})]})}),Ae="DialogTitle",vt=u.forwardRef((t,a)=>{const{__scopeDialog:c,...n}=t,o=M(Ae,c);return e.jsx(le.h2,{id:o.titleId,...n,ref:a})});vt.displayName=Ae;var yt="DialogDescription",bt=u.forwardRef((t,a)=>{const{__scopeDialog:c,...n}=t,o=M(yt,c);return e.jsx(le.p,{id:o.descriptionId,...n,ref:a})});bt.displayName=yt;var Nt="DialogClose",wt=u.forwardRef((t,a)=>{const{__scopeDialog:c,...n}=t,o=M(Nt,c);return e.jsx(le.button,{type:"button",...n,ref:a,onClick:re(t.onClick,()=>o.onOpenChange(!1))})});wt.displayName=Nt;function Ee(t){return t?"open":"closed"}var Ct="DialogTitleWarning",[_a,kt]=ds(Ct,{contentName:K,titleName:Ae,docsSlug:"dialog"}),Ys=({titleId:t})=>{const a=kt(Ct),c=`\`${a.contentName}\` requires a \`${a.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${a.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${a.docsSlug}`;return u.useEffect(()=>{t&&(document.getElementById(t)||console.error(c))},[c,t]),null},Ks="DialogDescriptionWarning",Js=({contentRef:t,descriptionId:a})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${kt(Ks).contentName}}.`;return u.useEffect(()=>{const o=t.current?.getAttribute("aria-describedby");a&&o&&(document.getElementById(a)||console.warn(n))},[n,t,a]),null},Hs=ut,Xs=pt,Dt=gt,St=jt,Ft=vt,It=bt,Zs=wt;const ea=Hs,ta=Xs,Pt=u.forwardRef(({className:t,...a},c)=>e.jsx(Dt,{ref:c,className:Z("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...a}));Pt.displayName=Dt.displayName;const Tt=u.forwardRef(({className:t,children:a,...c},n)=>e.jsxs(ta,{children:[e.jsx(Pt,{}),e.jsxs(St,{ref:n,className:Z("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...c,children:[a,e.jsxs(Zs,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[e.jsx(ms,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Tt.displayName=St.displayName;const At=({className:t,...a})=>e.jsx("div",{className:Z("flex flex-col space-y-1.5 text-center sm:text-left",t),...a});At.displayName="DialogHeader";const Et=({className:t,...a})=>e.jsx("div",{className:Z("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...a});Et.displayName="DialogFooter";const Rt=u.forwardRef(({className:t,...a},c)=>e.jsx(Ft,{ref:c,className:Z("text-lg font-semibold leading-none tracking-tight",t),...a}));Rt.displayName=Ft.displayName;const Mt=u.forwardRef(({className:t,...a},c)=>e.jsx(It,{ref:c,className:Z("text-sm text-muted-foreground",t),...a}));Mt.displayName=It.displayName;console.log("event-manage.tsx module loaded!");function qa({eventId:t}={}){console.log("EventManage component is mounting!");const[,a]=us("/events/:id/manage");console.log("Route params:",a);const[,c]=xs(),{toast:n}=nt(),o=hs(),[r,m]=u.useState(0),[l,x]=u.useState(!1),[v,D]=u.useState(!1),[L,oe]=u.useState(null),[ce,Re]=u.useState(!1),[ee,Me]=u.useState(""),[_,te]=u.useState(30),[J,O]=u.useState(0),[R,de]=u.useState(!1),[Le,G]=u.useState(!1),[q,je]=u.useState("both"),[$,se]=u.useState([{id:"team1",name:"Team 1",selectedAnswer:null,answerLocked:!1,score:0},{id:"team2",name:"Team 2",selectedAnswer:null,answerLocked:!1,score:0}]),[Lt,Oe]=u.useState(!1),[Ot,_e]=u.useState(!1),[na,ia]=u.useState(""),[qe,_t]=u.useState(!1),k=t||a?.id;if(console.log("Extracted eventId:",k,"from propEventId:",t,"params:",a),console.log("EventManage - eventId:",k,"propEventId:",t,"params:",a),!k)return console.error("No eventId provided to EventManage component"),e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-wine-50 to-champagne-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 wine-gradient rounded-2xl flex items-center justify-center mx-auto mb-4",children:e.jsx(V,{className:"text-champagne-400 h-8 w-8"})}),e.jsx("h1",{className:"text-2xl font-bold text-wine-800 mb-2",children:"Event Not Found"}),e.jsx("p",{className:"text-wine-600 mb-4",children:"No event ID was provided."}),e.jsx(f,{onClick:()=>c("/dashboard"),variant:"outline",children:"Return to Dashboard"})]})});const{data:i,isLoading:qt,error:ra}=be({queryKey:["/api/events",k],enabled:!!k,retry:!1}),{data:F=[],isLoading:la}=be({queryKey:["/api/events",k,"questions"],enabled:!!k,retry:!1}),{data:fe=[],isLoading:$t}=be({queryKey:["/api/events",k,"fun-facts"],enabled:!!k,retry:!1}),{register:B,handleSubmit:zt,setValue:ae,watch:$e,reset:ze,formState:{errors:me,isDirty:Ut}}=gs({defaultValues:{title:i?.title||"",description:i?.description||"",eventType:i?.eventType||"",maxParticipants:i?.maxParticipants||50,difficulty:i?.difficulty||"mixed",eventDate:i?.eventDate||"",eventTime:i?.eventTime||"",location:i?.location||"",sponsoringOrganization:i?.sponsoringOrganization||""}});u.useEffect(()=>{i&&ze({title:i.title||"",description:i.description||"",eventType:i.eventType||"",maxParticipants:i.maxParticipants||50,difficulty:i.difficulty||"mixed",eventDate:i.eventDate||"",eventTime:i.eventTime||"",location:i.location||"",sponsoringOrganization:i.sponsoringOrganization||"",logoUrl:i.logoUrl||void 0,backgroundImageUrl:i.backgroundImageUrl||void 0,eventCopy:i.eventCopy||void 0,welcomeMessage:i.welcomeMessage||void 0,thankYouMessage:i.thankYouMessage||void 0,primaryColor:i.primaryColor||void 0,secondaryColor:i.secondaryColor||void 0,fontFamily:i.fontFamily||void 0,contactEmail:i.contactEmail||void 0,contactPhone:i.contactPhone||void 0,websiteUrl:i.websiteUrl||void 0,socialLinks:i.socialLinks||void 0,prizeInformation:i.prizeInformation||void 0,eventRules:i.eventRules||void 0,specialInstructions:i.specialInstructions||void 0,accessibilityInfo:i.accessibilityInfo||void 0,dietaryAccommodations:i.dietaryAccommodations||void 0,dressCode:i.dressCode||void 0,ageRestrictions:i.ageRestrictions||void 0,technicalRequirements:i.technicalRequirements||void 0,registrationDeadline:i.registrationDeadline||void 0,cancellationPolicy:i.cancellationPolicy||void 0,refundPolicy:i.refundPolicy||void 0,sponsorInformation:i.sponsorInformation||void 0})},[i,ze]);const H=ie({mutationFn:async s=>{const d=await fetch(`/api/events/${k}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(s),credentials:"include"});if(!d.ok)try{const y=await d.json();throw new Error(y.error||"Failed to update event")}catch{throw new Error("Failed to update event")}return d.json()},onSuccess:()=>{o.invalidateQueries({queryKey:["/api/events",k]}),n({title:"Event Updated",description:"Event details saved successfully."})},onError:s=>{n({title:"Update Failed",description:s.message||"An error occurred while saving the event.",variant:"destructive"})}}),ne=ie({mutationFn:async s=>{const d=await fetch(`/api/events/${k}/status`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:s}),credentials:"include"});if(!d.ok)try{const y=await d.json();throw new Error(y.error||"Failed to update status")}catch{throw new Error("Failed to update status")}return d.json()},onSuccess:()=>{o.invalidateQueries({queryKey:["/api/events",k]}),n({title:"Status Updated",description:"Event status changed."})},onError:s=>{n({title:"Status Update Failed",description:s.message||"Could not update event status.",variant:"destructive"})}}),Qt=s=>{H.mutate(s)};function Gt({question:s,onSave:d,onCancel:y,isLoading:I}){const[p,P]=u.useState({question:s.question||"",correctAnswer:s.correctAnswer||"",options:Array.isArray(s.options)?[...s.options]:[],points:s.points||100,timeLimit:s.timeLimit||30,difficulty:s.difficulty||"medium",category:s.category||"",explanation:s.explanation||"",orderIndex:s.orderIndex||1,backgroundImageUrl:s.backgroundImageUrl||""}),[xe,ye]=u.useState(""),[We,Xt]=u.useState([]),[Ve,Ye]=u.useState(!1),[Ke,Je]=u.useState(null),[z,He]=u.useState(null),[Zt,Xe]=u.useState(!1),es=(g,T)=>{const X=[...p.options];X[g]=T,P({...p,options:X})},ts=async()=>{if(xe.trim()){Ye(!0),Je(null);try{const g=await fetch(`/api/unsplash/search?query=${encodeURIComponent(xe)}&perPage=12`);if(!g.ok){const X=await g.json();throw new Error(X.error||"Search failed")}const T=await g.json();Xt(T.results||[])}catch(g){Je(g.message)}finally{Ye(!1)}}},ss=g=>{He(g),P(T=>({...T,backgroundImageUrl:g.urls.regular}))},as=async()=>{if(z?.links?.download_location)try{Xe(!0),await fetch("/api/unsplash/track-download",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({downloadUrl:z.links.download_location})})}catch{}finally{Xe(!1)}},ns=async()=>{const g={...s,question:p.question,correctAnswer:p.correctAnswer,options:p.options,points:p.points,timeLimit:p.timeLimit,difficulty:p.difficulty,category:p.category,explanation:p.explanation,orderIndex:p.orderIndex,backgroundImageUrl:p.backgroundImageUrl||null};d(g),as()};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(h,{children:"Question"}),e.jsx(S,{value:p.question,onChange:g=>P({...p,question:g.target.value}),className:"mt-1",rows:3,"data-testid":"textarea-edit-question"})]}),s.type==="multiple_choice"&&e.jsxs("div",{children:[e.jsx(h,{children:"Options"}),e.jsx("div",{className:"space-y-2 mt-1",children:p.options.map((g,T)=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx("span",{className:"w-8 h-10 bg-gray-100 rounded flex items-center justify-center text-sm font-medium",children:String.fromCharCode(65+T)}),e.jsx(j,{value:g,onChange:X=>es(T,X.target.value),placeholder:`Option ${String.fromCharCode(65+T)}`,"data-testid":`input-edit-option-${T}`})]},T))})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(h,{children:"Correct Answer"}),e.jsx(j,{value:p.correctAnswer,onChange:g=>P({...p,correctAnswer:g.target.value}),className:"mt-1","data-testid":"input-edit-correct-answer"})]}),e.jsxs("div",{children:[e.jsx(h,{children:"Points"}),e.jsx(j,{type:"number",value:p.points,onChange:g=>P({...p,points:parseInt(g.target.value)||0}),className:"mt-1",min:10,max:500,"data-testid":"input-edit-points"})]}),e.jsxs("div",{children:[e.jsx(h,{children:"Time Limit (s)"}),e.jsx(j,{type:"number",value:p.timeLimit,onChange:g=>P({...p,timeLimit:parseInt(g.target.value)||30}),className:"mt-1",min:5,max:300,"data-testid":"input-edit-timeLimit"})]}),e.jsxs("div",{children:[e.jsx(h,{children:"Difficulty"}),e.jsxs(Ne,{value:p.difficulty,onValueChange:g=>P({...p,difficulty:g}),children:[e.jsx(we,{className:"mt-1","data-testid":"select-edit-difficulty",children:e.jsx(Ce,{})}),e.jsxs(ke,{children:[e.jsx(E,{value:"easy",children:"Easy"}),e.jsx(E,{value:"medium",children:"Medium"}),e.jsx(E,{value:"hard",children:"Hard"})]})]})]}),e.jsxs("div",{children:[e.jsx(h,{children:"Category"}),e.jsx(j,{value:p.category,onChange:g=>P({...p,category:g.target.value}),className:"mt-1",placeholder:"wine, geography, etc","data-testid":"input-edit-category"})]}),e.jsxs("div",{children:[e.jsx(h,{children:"Order #"}),e.jsx(j,{type:"number",value:p.orderIndex,onChange:g=>P({...p,orderIndex:parseInt(g.target.value)||1}),className:"mt-1",min:1,"data-testid":"input-edit-orderIndex"})]})]}),e.jsxs("div",{children:[e.jsx(h,{children:"Explanation (shown after answering)"}),e.jsx(S,{value:p.explanation,onChange:g=>P({...p,explanation:g.target.value}),rows:3,className:"mt-1","data-testid":"textarea-edit-explanation"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(h,{children:"Background Image"}),p.backgroundImageUrl&&e.jsx(f,{type:"button",variant:"outline",size:"sm",onClick:()=>{P({...p,backgroundImageUrl:""}),He(null)},"data-testid":"button-remove-image",children:"Remove"})]}),p.backgroundImageUrl?e.jsx("div",{className:"relative",children:e.jsx("img",{src:p.backgroundImageUrl,alt:"Selected background",className:"rounded-md w-full h-40 object-cover border","data-testid":"image-selected-preview"})}):e.jsx("p",{className:"text-sm text-gray-500",children:"No image selected."}),e.jsxs("div",{className:"border rounded-md p-3 space-y-3 bg-gray-50",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(j,{placeholder:"Search Unsplash (e.g., Oregon coast)",value:xe,onChange:g=>ye(g.target.value),"data-testid":"input-unsplash-query"}),e.jsx(f,{type:"button",onClick:ts,disabled:Ve,"data-testid":"button-unsplash-search",children:Ve?"Searching...":"Search"})]}),Ke&&e.jsx("p",{className:"text-sm text-red-600","data-testid":"error-unsplash",children:Ke}),We.length>0&&e.jsx("div",{className:"grid grid-cols-4 gap-2 max-h-48 overflow-y-auto","data-testid":"grid-unsplash-results",children:We.map((g,T)=>e.jsxs("button",{type:"button",onClick:()=>ss(g),className:`group relative border rounded-md overflow-hidden focus:outline-none ${z?.id===g.id?"ring-2 ring-wine-500":"hover:ring-2 hover:ring-wine-300"}`,"data-testid":`unsplash-result-${T}`,children:[e.jsx("img",{src:g.urls.thumb,alt:g.alt_description||g.description||"img",className:"w-full h-16 object-cover"}),z?.id===g.id&&e.jsx("span",{className:"absolute inset-0 bg-wine-600/40 flex items-center justify-center text-white text-xs font-medium",children:"Selected"})]},g.id))}),z&&e.jsxs("p",{className:"text-[11px] text-gray-600","data-testid":"text-unsplash-attribution",children:["Photo by ",e.jsx("a",{className:"underline",target:"_blank",rel:"noreferrer",href:`${z.user.links.html}?utm_source=TriviaSpark&utm_medium=referral`,children:z.user.name})," on ",e.jsx("a",{className:"underline",target:"_blank",rel:"noreferrer",href:`${z.links.html}?utm_source=TriviaSpark&utm_medium=referral`,children:"Unsplash"})]})]})]}),e.jsxs(Et,{className:"pt-2",children:[e.jsx(f,{onClick:ns,disabled:I||Zt,className:"flex-1","data-testid":"button-save-question",children:I?e.jsxs(e.Fragment,{children:[e.jsx(Se,{className:"mr-2 h-4 w-4 animate-pulse"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Se,{className:"mr-2 h-4 w-4"}),"Save Changes"]})}),e.jsx(f,{onClick:y,variant:"outline",disabled:I,"data-testid":"button-cancel-edit",children:"Cancel"})]})]})}const ue=s=>{ne.mutate(s)},Bt=()=>{if(F.length===0){n({title:"No Questions",description:"Add some questions to your event before running a dry run.",variant:"destructive"});return}x(!0),m(0),D(!1),de(!1),te(30),O(0),G(!0)},ve=()=>{D(!1),de(!1),te(30),O(0),Oe(!1),_e(!1),se(s=>s.map(d=>({...d,selectedAnswer:null,answerLocked:!1})))},Wt=()=>{r<F.length-1?(Oe(!0),setTimeout(()=>{m(r+1),ve(),G(!0)},5e3)):_e(!0)},Ue=(s,d)=>{se(y=>y.map(I=>I.id===s&&!I.answerLocked&&!R?{...I,selectedAnswer:d}:I))},Qe=s=>{se(d=>{const y=d.map(p=>{if(p.id===s&&p.selectedAnswer&&!p.answerLocked&&!R){const P=F[r],ye=P&&p.selectedAnswer.toLowerCase().trim()===P.correctAnswer.toLowerCase().trim()&&_>0?_:0;return{...p,answerLocked:!0,score:p.score+ye}}return p});return y.find(p=>p.id===s),y.every(p=>p.answerLocked)&&n({title:"All Teams Answered!",description:"All participants have locked their answers. Revealing results..."}),y})},Vt=()=>{R||(D(!v),v||G(!1))},Yt=()=>{x(!1),m(0),ve(),te(30),O(0),G(!1),se(s=>s.map(d=>({...d,score:0,selectedAnswer:null,answerLocked:!1})))},Kt=()=>{x(!1),m(0),ve(),te(30),O(0),G(!1),se(s=>s.map(d=>({...d,score:0,selectedAnswer:null,answerLocked:!1}))),n({title:"Dry Run Complete",description:"Great job! You've completed the trivia preview."})},Jt=ie({mutationFn:async({topic:s,type:d})=>{const y=await fetch("/api/questions/generate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({eventId:k,topic:s,type:d,count:1}),credentials:"include"});if(!y.ok){const I=await y.json();throw new Error(I.error||"Failed to generate question")}return y.json()},onSuccess:()=>{o.invalidateQueries({queryKey:["/api/events",k,"questions"]}),Me(""),n({title:"Question Generated",description:"AI question has been added to your event."})},onError:s=>{n({title:"Generation Failed",description:s.message,variant:"destructive"})}}),Ge=ie({mutationFn:async s=>{const d=await fetch(`/api/questions/${s.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(s),credentials:"include"});if(!d.ok){const y=await d.json();throw new Error(y.error||"Failed to update question")}return d.json()},onSuccess:()=>{o.invalidateQueries({queryKey:["/api/events",k,"questions"]}),oe(null),n({title:"Question Updated",description:"Question has been saved successfully."})},onError:s=>{n({title:"Update Failed",description:s.message,variant:"destructive"})}}),Ht=ie({mutationFn:async s=>{const d=await fetch(`/api/questions/${s}`,{method:"DELETE",credentials:"include"});if(!d.ok){const y=await d.json();throw new Error(y.error||"Failed to delete question")}},onSuccess:()=>{o.invalidateQueries({queryKey:["/api/events",k,"questions"]}),n({title:"Question Deleted",description:"Question has been removed from your event."})},onError:s=>{n({title:"Delete Failed",description:s.message,variant:"destructive"})}}),Be=s=>{if(!ee.trim()){n({title:"Topic Required",description:"Please enter a topic for the AI question.",variant:"destructive"});return}Re(!0),Jt.mutate({topic:ee,type:s},{onSettled:()=>Re(!1)})};if(u.useEffect(()=>{let s;return Le&&_>0&&!v&&(s=setInterval(()=>{te(d=>d===4?(O(3),d-1):d===3?(O(2),d-1):d===2?(O(1),d-1):d===1?(G(!1),de(!0),D(!0),O(0),0):d-1)},1e3)),()=>{s&&clearInterval(s)}},[Le,_,v]),u.useEffect(()=>{l&&!v&&!R&&$.length>0&&$.every(d=>d.answerLocked)&&(G(!1),de(!0),setTimeout(()=>{D(!0)},1e3))},[$,l,v,R]),u.useEffect(()=>{if(J===1){const s=setTimeout(()=>{O(0)},1e3);return()=>clearTimeout(s)}},[J]),qt)return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-wine-50 to-champagne-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 wine-gradient rounded-2xl flex items-center justify-center mx-auto mb-4",children:e.jsx(V,{className:"text-champagne-400 h-8 w-8 animate-pulse"})}),e.jsx("p",{className:"text-wine-700",children:"Loading event..."})]})});if(!i)return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-wine-50 to-champagne-50 flex items-center justify-center",children:e.jsx(b,{className:"max-w-md w-full",children:e.jsxs(N,{className:"text-center py-8",children:[e.jsx("p",{className:"text-gray-600 mb-4",children:"Event not found"}),e.jsx(f,{onClick:()=>c("/dashboard"),"data-testid":"button-back-events",children:"Back to Dashboard"})]})})});const W=F[r];return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-wine-50 to-champagne-50",children:[e.jsx("div",{className:"wine-gradient shadow-lg",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsxs(f,{variant:"ghost",onClick:()=>c("/dashboard"),className:"text-white hover:bg-white/10 mr-4","data-testid":"button-back",children:[e.jsx(Ds,{className:"mr-2 h-4 w-4"}),"Back"]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-white","data-testid":"text-page-title",children:"Manage Event"}),e.jsx("p",{className:"text-champagne-200","data-testid":"text-event-title",children:i.title})]})]}),e.jsx(A,{variant:i.status==="active"?"default":"secondary",className:`text-sm ${i.status==="active"?"bg-emerald-100 text-emerald-800":""}`,"data-testid":"badge-event-status",children:i.status})]})})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs(ys,{defaultValue:"details",className:"space-y-6",children:[e.jsxs(bs,{className:"grid w-full grid-cols-8","data-testid":"tabs-event-management",children:[e.jsxs(U,{value:"details","data-testid":"tab-details",children:[e.jsx(fs,{className:"mr-2 h-4 w-4"}),"Details"]}),e.jsxs(U,{value:"branding","data-testid":"tab-branding",children:[e.jsx(dt,{className:"mr-2 h-4 w-4"}),"Branding"]}),e.jsxs(U,{value:"event-info","data-testid":"tab-event-info",children:[e.jsx(ot,{className:"mr-2 h-4 w-4"}),"Event Info"]}),e.jsxs(U,{value:"contact","data-testid":"tab-contact",children:[e.jsx(it,{className:"mr-2 h-4 w-4"}),"Contact"]}),e.jsxs(U,{value:"trivia","data-testid":"tab-trivia",children:[e.jsx(V,{className:"mr-2 h-4 w-4"}),"Trivia"]}),e.jsxs(U,{value:"funfacts","data-testid":"tab-funfacts",children:[e.jsx(Y,{className:"mr-2 h-4 w-4"}),"Fun Facts"]}),e.jsxs(U,{value:"status","data-testid":"tab-status",children:[e.jsx(lt,{className:"mr-2 h-4 w-4"}),"Status"]}),e.jsxs(U,{value:"dryrun","data-testid":"tab-dryrun",children:[e.jsx(et,{className:"mr-2 h-4 w-4"}),"Dry Run"]})]}),e.jsx(Q,{value:"branding",children:e.jsx(_s,{event:i,onUpdate:s=>{Object.keys(s).forEach(d=>{ae(d,s[d])})},isLoading:H.isPending})}),e.jsx(Q,{value:"event-info",children:e.jsx($s,{event:i,onUpdate:s=>{Object.keys(s).forEach(d=>{ae(d,s[d])})},isLoading:H.isPending})}),e.jsx(Q,{value:"contact",children:e.jsx(qs,{event:i,onUpdate:s=>{Object.keys(s).forEach(d=>{ae(d,s[d])})},isLoading:H.isPending})}),e.jsx(Q,{value:"details",children:e.jsxs(b,{className:"trivia-card","data-testid":"card-event-details",children:[e.jsx(w,{children:e.jsx(C,{className:"wine-text",children:"Edit Event Details"})}),e.jsx(N,{children:e.jsxs("form",{onSubmit:zt(Qt),className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(h,{htmlFor:"title",children:"Event Title *"}),e.jsx(j,{id:"title",...B("title",{required:"Title is required"}),className:"mt-1","data-testid":"input-title"}),me.title&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:me.title.message})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(h,{htmlFor:"description",children:"Description"}),e.jsx(S,{id:"description",...B("description"),rows:3,className:"mt-1","data-testid":"input-description"})]}),e.jsxs("div",{children:[e.jsx(h,{htmlFor:"eventType",children:"Event Type *"}),e.jsxs(Ne,{value:$e("eventType")||"",onValueChange:s=>ae("eventType",s,{shouldDirty:!0}),children:[e.jsx(we,{className:"mt-1","data-testid":"select-event-type",children:e.jsx(Ce,{placeholder:"Select event type"})}),e.jsxs(ke,{children:[e.jsx(E,{value:"wine-dinner",children:"Wine Dinner"}),e.jsx(E,{value:"corporate",children:"Corporate Event"}),e.jsx(E,{value:"party",children:"Party"}),e.jsx(E,{value:"educational",children:"Educational"}),e.jsx(E,{value:"fundraiser",children:"Fundraiser"})]})]})]}),e.jsxs("div",{children:[e.jsx(h,{htmlFor:"difficulty",children:"Difficulty"}),e.jsxs(Ne,{value:$e("difficulty")||"",onValueChange:s=>ae("difficulty",s,{shouldDirty:!0}),children:[e.jsx(we,{className:"mt-1","data-testid":"select-difficulty",children:e.jsx(Ce,{placeholder:"Select difficulty"})}),e.jsxs(ke,{children:[e.jsx(E,{value:"easy",children:"Easy"}),e.jsx(E,{value:"medium",children:"Medium"}),e.jsx(E,{value:"hard",children:"Hard"}),e.jsx(E,{value:"mixed",children:"Mixed"})]})]})]}),e.jsxs("div",{children:[e.jsx(h,{htmlFor:"maxParticipants",children:"Max Participants"}),e.jsx(j,{id:"maxParticipants",type:"number",...B("maxParticipants",{required:"Max participants is required",min:{value:1,message:"Must be at least 1"},max:{value:500,message:"Maximum 500 participants"},valueAsNumber:!0}),className:"mt-1","data-testid":"input-max-participants"}),me.maxParticipants&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:me.maxParticipants.message})]}),e.jsxs("div",{children:[e.jsx(h,{htmlFor:"eventDate",children:"Event Date"}),e.jsx(j,{id:"eventDate",type:"date",...B("eventDate"),className:"mt-1","data-testid":"input-event-date"})]}),e.jsxs("div",{children:[e.jsx(h,{htmlFor:"eventTime",children:"Event Time"}),e.jsx(j,{id:"eventTime",...B("eventTime"),placeholder:"e.g., 7:00 PM",className:"mt-1","data-testid":"input-event-time"})]}),e.jsxs("div",{children:[e.jsx(h,{htmlFor:"location",children:"Location"}),e.jsx(j,{id:"location",...B("location"),placeholder:"Event venue",className:"mt-1","data-testid":"input-location"})]}),e.jsxs("div",{children:[e.jsx(h,{htmlFor:"sponsoringOrganization",children:"Sponsoring Organization"}),e.jsx(j,{id:"sponsoringOrganization",...B("sponsoringOrganization"),placeholder:"Organization name",className:"mt-1","data-testid":"input-sponsoring-org"})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(f,{type:"submit",disabled:H.isPending||!Ut,className:"trivia-button-primary","data-testid":"button-save-event",children:H.isPending?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin mr-2 h-4 w-4 border-2 border-white border-t-transparent rounded-full"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Se,{className:"mr-2 h-4 w-4"}),"Save Changes"]})})})]})})]})}),e.jsx(Q,{value:"trivia",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs(b,{className:"trivia-card","data-testid":"card-ai-generation",children:[e.jsx(w,{children:e.jsxs(C,{className:"wine-text flex items-center",children:[e.jsx(Y,{className:"mr-2 h-5 w-5"}),"AI Question Generator"]})}),e.jsx(N,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(h,{htmlFor:"aiTopic",children:"Topic"}),e.jsx(j,{id:"aiTopic",value:ee,onChange:s=>Me(s.target.value),placeholder:"e.g., Pacific Northwest wines, Local history, Sports trivia",className:"mt-1","data-testid":"input-ai-topic"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(f,{onClick:()=>Be("multiple_choice"),disabled:ce||!ee.trim(),variant:"outline",className:"flex-1","data-testid":"button-generate-multiple-choice",children:[ce?e.jsx(V,{className:"mr-2 h-4 w-4 animate-pulse"}):e.jsx(Ze,{className:"mr-2 h-4 w-4"}),"Multiple Choice"]}),e.jsxs(f,{onClick:()=>Be("true_false"),disabled:ce||!ee.trim(),variant:"outline",className:"flex-1","data-testid":"button-generate-true-false",children:[ce?e.jsx(V,{className:"mr-2 h-4 w-4 animate-pulse"}):e.jsx(Ze,{className:"mr-2 h-4 w-4"}),"True/False"]})]})]})})]}),e.jsxs(b,{className:"trivia-card","data-testid":"card-questions-list",children:[e.jsx(w,{children:e.jsxs(C,{className:"wine-text flex items-center justify-between",children:[e.jsxs("span",{children:["Event Questions (",F.length,")"]}),e.jsx(f,{variant:"outline",size:"sm",onClick:()=>c(`/events/${k}/manage/trivia`),"data-testid":"button-full-trivia-manage",className:"ml-4",children:"Open Full Manager"})]})}),e.jsx(N,{children:F.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(V,{className:"mx-auto h-12 w-12 mb-4 text-gray-400"}),e.jsx("p",{className:"mb-2",children:"No questions yet"}),e.jsx("p",{className:"text-sm",children:"Generate AI questions or add your own to get started"})]}):e.jsx("div",{className:"space-y-4",children:F.map((s,d)=>e.jsx("div",{className:"border rounded-lg p-4 hover:bg-gray-50 transition-colors","data-testid":`question-${d}`,children:e.jsx("div",{className:"space-y-3",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs(A,{variant:"secondary",className:"text-xs",children:["#",d+1]}),e.jsx(A,{variant:"outline",className:"text-xs",children:s.type.replace("_"," ")}),s.aiGenerated&&e.jsxs(A,{variant:"outline",className:"text-xs bg-blue-50 text-blue-600",children:[e.jsx(V,{className:"mr-1 h-3 w-3"}),"AI"]}),e.jsxs(A,{variant:"outline",className:"text-xs",children:[s.points||100," pts"]}),e.jsxs(A,{variant:"outline",className:"text-xs",children:[s.timeLimit,"s"]})]}),e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:s.question}),Array.isArray(s.options)&&s.options.length>0&&e.jsx("div",{className:"grid grid-cols-2 gap-2 mb-2",children:s.options.map((y,I)=>e.jsxs("div",{className:`text-sm p-2 rounded ${y===s.correctAnswer?"bg-green-100 text-green-800 font-medium":"bg-gray-100 text-gray-700"}`,children:[String.fromCharCode(65+I),". ",y]},I))}),e.jsxs("p",{className:"text-sm text-green-600 font-medium",children:["Correct Answer: ",s.correctAnswer]}),s.explanation&&e.jsx("p",{className:"text-xs text-gray-500 line-clamp-2",children:s.explanation})]}),e.jsxs("div",{className:"flex gap-2 ml-4",children:[e.jsx(f,{onClick:()=>oe(s),variant:"ghost",size:"sm","data-testid":`button-edit-${d}`,children:e.jsx(tt,{className:"h-4 w-4"})}),e.jsx(f,{onClick:()=>{confirm("Are you sure you want to delete this question?")&&Ht.mutate(s.id)},variant:"ghost",size:"sm",className:"text-red-600 hover:text-red-700 hover:bg-red-50","data-testid":`button-delete-${d}`,children:e.jsx(Ss,{className:"h-4 w-4"})})]})]})})},s.id))})})]}),e.jsx(ea,{open:!!L,onOpenChange:s=>{s||oe(null)},children:e.jsx(Tt,{className:"max-w-3xl","data-testid":"dialog-edit-question",children:L&&e.jsxs(e.Fragment,{children:[e.jsxs(At,{children:[e.jsx(Rt,{children:"Edit Question"}),e.jsx(Mt,{children:"Modify question content, scoring, ordering, and optional background image."})]}),e.jsx(Gt,{question:L,onSave:s=>Ge.mutate(s),onCancel:()=>oe(null),isLoading:Ge.isPending})]})})})]})}),e.jsx(Q,{value:"status",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(b,{className:"trivia-card","data-testid":"card-status-control",children:[e.jsx(w,{children:e.jsx(C,{className:"wine-text",children:"Event Status"})}),e.jsxs(N,{className:"space-y-4",children:[e.jsx("div",{className:"text-center",children:e.jsx(A,{variant:i.status==="active"?"default":"secondary",className:`text-lg px-4 py-2 ${i.status==="active"?"bg-emerald-100 text-emerald-800":""}`,"data-testid":"badge-current-status",children:(i.status||"draft").toUpperCase()})}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(f,{onClick:()=>ue("draft"),disabled:i.status==="draft"||ne.isPending,variant:i.status==="draft"?"default":"outline","data-testid":"button-set-draft",children:"Draft"}),e.jsx(f,{onClick:()=>ue("active"),disabled:i.status==="active"||ne.isPending,variant:i.status==="active"?"default":"outline","data-testid":"button-set-active",children:"Active"}),e.jsx(f,{onClick:()=>ue("completed"),disabled:i.status==="completed"||ne.isPending,variant:i.status==="completed"?"default":"outline","data-testid":"button-set-completed",children:"Completed"}),e.jsx(f,{onClick:()=>ue("cancelled"),disabled:i.status==="cancelled"||ne.isPending,variant:i.status==="cancelled"?"destructive":"outline","data-testid":"button-set-cancelled",children:"Cancelled"})]})]})]}),e.jsxs(b,{className:"trivia-card","data-testid":"card-event-info",children:[e.jsx(w,{children:e.jsx(C,{className:"wine-text",children:"Event Information"})}),e.jsx(N,{className:"space-y-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsx(Fs,{className:"mr-3 h-4 w-4 text-wine-600"}),e.jsx("span",{className:"font-medium",children:"Date:"}),e.jsx("span",{className:"ml-2","data-testid":"text-info-date",children:i.eventDate?ps(i.eventDate):"Not set"})]}),e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsx(Pe,{className:"mr-3 h-4 w-4 text-wine-600"}),e.jsx("span",{className:"font-medium",children:"Time:"}),e.jsx("span",{className:"ml-2","data-testid":"text-info-time",children:i.eventTime||"Not set"})]}),e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsx(Is,{className:"mr-3 h-4 w-4 text-wine-600"}),e.jsx("span",{className:"font-medium",children:"Location:"}),e.jsx("span",{className:"ml-2","data-testid":"text-info-location",children:i.location||"Not set"})]}),e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsx(rt,{className:"mr-3 h-4 w-4 text-wine-600"}),e.jsx("span",{className:"font-medium",children:"Organization:"}),e.jsx("span",{className:"ml-2","data-testid":"text-info-organization",children:i.sponsoringOrganization||"Not set"})]}),e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsx(ct,{className:"mr-3 h-4 w-4 text-wine-600"}),e.jsx("span",{className:"font-medium",children:"Max Participants:"}),e.jsx("span",{className:"ml-2","data-testid":"text-info-max-participants",children:i.maxParticipants})]})]})})]})]})}),e.jsx(Q,{value:"funfacts",children:e.jsxs(b,{className:"trivia-card","data-testid":"card-fun-facts",children:[e.jsx(w,{children:e.jsxs(C,{className:"wine-text flex items-center justify-between",children:[e.jsx("span",{children:"Fun Facts Management"}),e.jsxs(f,{onClick:()=>_t(!qe),variant:"outline","data-testid":"button-edit-fun-facts",children:[e.jsx(tt,{className:"mr-2 h-4 w-4"}),qe?"Cancel":"Edit"]})]})}),e.jsx(N,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-gray-600",children:"Add fun facts about your organization that will be shown between questions during the trivia event."}),$t?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-wine-600"})}):e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsxs("h4",{className:"font-medium mb-2",children:["Current Fun Facts (",fe.length,"):"]}),fe.length>0?e.jsx("div",{className:"space-y-3",children:fe.map((s,d)=>e.jsxs("div",{className:"border-l-4 border-wine-600 pl-3",children:[e.jsxs("h5",{className:"font-medium text-wine-700",children:[d+1,". ",s.title]}),e.jsx("p",{className:"text-gray-700 mt-1",children:s.content})]},s.id))}):e.jsx("p",{className:"text-gray-500",children:"No fun facts available for this event yet."})]})]})})]})}),e.jsx(Q,{value:"dryrun",children:e.jsx("div",{className:"space-y-4",children:e.jsxs(b,{className:"trivia-card",children:[e.jsx(w,{children:e.jsxs(C,{className:"wine-text flex items-center justify-between",children:[e.jsx("span",{children:"Dry Run - Test Your Trivia"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(f,{variant:q==="both"?"default":"outline",size:"sm",onClick:()=>je("both"),"data-testid":"button-view-both",children:"Split View"}),e.jsx(f,{variant:q==="presenter"?"default":"outline",size:"sm",onClick:()=>je("presenter"),"data-testid":"button-view-presenter",children:"Presenter"}),e.jsx(f,{variant:q==="participant"?"default":"outline",size:"sm",onClick:()=>je("participant"),"data-testid":"button-view-participant",children:"Participant"})]})]})}),e.jsx(N,{children:l?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(A,{variant:"default",className:"bg-blue-100 text-blue-800","data-testid":"badge-dry-run",children:["Dry Run Active - ",q==="both"?"Split View":q==="presenter"?"Presenter View":"Participant View"]}),e.jsxs("div",{className:"text-sm text-gray-600","data-testid":"text-question-progress",children:["Question ",r+1," of ",F.length]})]}),q==="both"&&W&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"text-lg font-semibold text-wine-700",children:" Presenter View"}),e.jsx(st,{question:W,timeLeft:_,finalCountdown:J,showAnswer:v,answersLocked:R})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"text-lg font-semibold text-wine-700",children:" Participants View"}),e.jsx("div",{className:"space-y-6",children:$.map(s=>e.jsxs("div",{className:"space-y-2",children:[e.jsxs("h5",{className:"text-md font-semibold text-wine-700",children:[s.name," (Score: ",s.score,")"]}),e.jsx(at,{question:W,timeLeft:_,finalCountdown:J,showAnswer:v,answersLocked:R,selectedAnswer:s.selectedAnswer,answerLocked:s.answerLocked,onAnswerSelect:d=>Ue(s.id,d),onLockAnswer:()=>Qe(s.id)})]},s.id))})]})]}),q!=="both"&&W&&(q==="presenter"?e.jsx(st,{question:W,timeLeft:_,finalCountdown:J,showAnswer:v,answersLocked:R}):e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"text-center",children:e.jsx("div",{className:"space-y-2",children:$.map(s=>e.jsxs(A,{variant:"outline",className:"text-lg px-4 py-2 mr-2",children:[s.name,": ",s.score," points"]},s.id))})}),e.jsx("div",{className:"space-y-6",children:$.map(s=>e.jsxs("div",{className:"space-y-2",children:[e.jsx("h5",{className:"text-md font-semibold text-wine-700",children:s.name}),e.jsx(at,{question:W,timeLeft:_,finalCountdown:J,showAnswer:v,answersLocked:R,selectedAnswer:s.selectedAnswer,answerLocked:s.answerLocked,onAnswerSelect:d=>Ue(s.id,d),onLockAnswer:()=>Qe(s.id)})]},s.id))})]})),Lt&&e.jsx(aa,{participants:$,currentQuestionIndex:r,totalQuestions:F.length,funFacts:["West Wichita Rotary Club has been serving the community since 1985 and has raised over $2 million for local charities! ","Did you know? The Pacific Northwest produces over 99% of American wine grapes, with Washington state being the second-largest wine producer in the US! ","Our trivia nights have helped fund 15 local scholarships, 3 community gardens, and countless meals for families in need. Every question answered makes a difference! ","This is our 12th annual Coast to Cascades event! Together, we've welcomed over 600 guests and created lasting memories while supporting worthy causes. "]}),Ot&&e.jsx(sa,{participants:$,totalQuestions:F.length,onFinish:Kt}),W&&e.jsxs("div",{className:"flex items-center justify-between bg-gray-50 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(f,{onClick:Vt,variant:"outline",disabled:R,"data-testid":"button-show-answer",children:v?"Hide Answer":"Show Answer"}),R&&e.jsx("div",{className:"text-sm text-gray-600",children:"Time's up! Answer revealed automatically."})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(f,{onClick:Yt,variant:"outline","data-testid":"button-stop-dry-run",children:[e.jsx(Ps,{className:"mr-2 h-4 w-4"}),"Stop"]}),e.jsx(f,{onClick:Wt,className:"trivia-button-primary","data-testid":"button-next-question",children:r<F.length-1?e.jsxs(e.Fragment,{children:[e.jsx(Os,{className:"mr-2 h-4 w-4"}),"Next Question"]}):"Finish Dry Run"})]})]})]}):e.jsxs("div",{className:"text-center space-y-4",children:[e.jsxs("p",{className:"text-gray-600",children:["Preview your trivia questions as participants would see them.",F.length===0&&" Add some questions first!"]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium mb-2",children:"Questions in this event:"}),e.jsx("p",{className:"text-2xl font-bold text-wine-700","data-testid":"text-question-count",children:F.length})]}),e.jsxs(f,{onClick:Bt,disabled:F.length===0,className:"trivia-button-primary","data-testid":"button-start-dry-run",children:[e.jsx(et,{className:"mr-2 h-4 w-4"}),"Start Dry Run"]})]})})]})})})]})})]})}function st({question:t,timeLeft:a,finalCountdown:c,showAnswer:n,answersLocked:o}){return e.jsxs("div",{className:"relative bg-white p-6 rounded-lg border-2 border-wine-200 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx(A,{variant:"secondary","data-testid":"badge-presenter-category",children:t.category}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:`flex items-center text-sm ${a<=10?"text-red-600 font-bold":"text-gray-600"}`,children:[e.jsx(Pe,{className:"mr-1 h-3 w-3"}),a,"s"]}),o&&e.jsx(A,{variant:"destructive",className:"bg-red-100 text-red-800",children:" Locked"})]})]}),c>0&&e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center z-10 rounded-lg",children:e.jsx("div",{className:"text-6xl font-bold text-white animate-pulse","data-testid":`presenter-countdown-${c}`,children:c})}),e.jsx("h3",{className:"text-lg font-semibold text-wine-800 mb-4","data-testid":"presenter-question",children:t.question}),e.jsx("div",{className:"space-y-2",children:t.options.map((r,m)=>e.jsxs("div",{className:`p-3 rounded-lg border text-sm transition-colors ${n&&r===t.correctAnswer?"bg-green-100 border-green-300 font-medium":"bg-gray-50 border-gray-200"}`,"data-testid":`presenter-option-${m}`,children:[e.jsxs("span",{className:"font-medium mr-2",children:[String.fromCharCode(65+m),"."]}),r,n&&r===t.correctAnswer&&e.jsx("span",{className:"ml-2 text-green-600 font-semibold",children:" Correct Answer"})]},m))}),n&&e.jsx("div",{className:"mt-4 p-3 bg-green-50 border border-green-200 rounded-lg",children:e.jsx("div",{className:"text-sm font-medium text-green-800",children:" Answer is now visible to participants"})})]})}function at({question:t,timeLeft:a,finalCountdown:c,showAnswer:n,answersLocked:o,selectedAnswer:r,answerLocked:m,onAnswerSelect:l,onLockAnswer:x}){return e.jsxs("div",{className:"relative bg-gradient-to-br from-wine-50 to-champagne-50 p-6 rounded-lg border-2 border-wine-200 shadow-sm",children:[e.jsx("div",{className:"text-center mb-4",children:e.jsxs("div",{className:"flex items-center justify-center gap-4 mb-2",children:[e.jsx(A,{variant:"outline",className:"border-wine-300 text-wine-700",children:t.category}),e.jsxs("div",{className:`text-lg font-bold ${a<=10?"text-red-600":"text-wine-600"}`,children:[" ",a,"s"]})]})}),c>0&&e.jsx("div",{className:"absolute top-4 right-4 bg-black bg-opacity-75 rounded-full w-16 h-16 flex items-center justify-center z-10",children:e.jsx("div",{className:"text-2xl font-bold text-white animate-pulse","data-testid":`participant-countdown-${c}`,children:c})}),e.jsx("div",{className:"text-center mb-6",children:e.jsx("h3",{className:"text-lg font-semibold text-wine-800","data-testid":"participant-question",children:t.question})}),e.jsx("div",{className:"space-y-3",children:t.options.map((v,D)=>e.jsxs("button",{disabled:m||o,onClick:()=>l(v),className:`w-full p-4 rounded-lg border-2 text-left transition-all duration-200 ${r===v&&!m&&!o?"bg-wine-100 border-wine-400 ring-2 ring-wine-300":o||m?n&&v===t.correctAnswer?"bg-green-100 border-green-400 text-green-800 font-medium":r===v?"bg-wine-50 border-wine-300 text-wine-800":"bg-gray-100 border-gray-300 text-gray-600":"bg-white border-wine-200 hover:border-wine-300 hover:bg-wine-50 cursor-pointer"}`,"data-testid":`participant-option-${D}`,children:[e.jsx("span",{className:`inline-block w-8 h-8 rounded-full font-bold text-center leading-8 mr-3 ${r===v&&!m&&!o?"bg-wine-300 text-wine-800":"bg-wine-200 text-wine-800"}`,children:String.fromCharCode(65+D)}),v,n&&v===t.correctAnswer&&e.jsx("span",{className:"float-right text-green-600 font-bold text-xl",children:""}),r===v&&m&&e.jsx("span",{className:"float-right text-wine-600 font-bold text-xl",children:""})]},D))}),r&&!m&&!o&&e.jsx("div",{className:"mt-6 text-center",children:e.jsxs(f,{onClick:x,className:"bg-wine-600 hover:bg-wine-700 text-white px-8 py-3 text-lg font-semibold","data-testid":"button-lock-answer",children:[" Lock Answer (Score: ",a," pts)"]})}),m&&!o&&e.jsx("div",{className:"mt-4 text-center",children:e.jsx("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-wine-100 border border-wine-200 rounded-full text-wine-800 font-medium",children:" Answer Locked! Waiting for time to end..."})}),o&&e.jsx("div",{className:"mt-4 text-center",children:e.jsx("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-red-100 border border-red-200 rounded-full text-red-800 font-medium",children:" Time's Up! Answers Revealed"})})]})}function sa({participants:t,totalQuestions:a,onFinish:c}){const n=[...t].sort((m,l)=>l.score-m.score),o=n[0],r=a*30;return e.jsxs("div",{className:"space-y-8 text-center",children:[e.jsxs("div",{className:"bg-gradient-to-r from-yellow-100 to-yellow-200 p-8 rounded-lg border-2 border-yellow-300",children:[e.jsx("h2",{className:"text-4xl font-bold text-yellow-800 mb-2",children:" Trivia Complete! "}),e.jsxs("p",{className:"text-yellow-700 text-lg",children:["All ",a," questions have been answered"]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-champagne-100 to-wine-100 p-8 rounded-lg border-2 border-wine-200",children:[e.jsxs("h3",{className:"text-3xl font-bold text-wine-800 mb-4",children:[" Winner: ",o.name,"! "]}),e.jsxs("div",{className:"text-5xl font-bold text-wine-800 mb-2",children:[o.score," points"]}),e.jsxs("p",{className:"text-wine-600 text-lg",children:["Out of ",r," possible points (",Math.round(o.score/r*100),"% accuracy)"]})]}),e.jsxs("div",{className:"bg-white p-8 rounded-lg border-2 border-gray-200 shadow-lg",children:[e.jsx("h4",{className:"text-2xl font-bold text-gray-800 mb-6",children:" Final Leaderboard"}),e.jsx("div",{className:"space-y-4",children:n.map((m,l)=>e.jsxs("div",{className:`flex items-center justify-between p-4 rounded-lg ${l===0?"bg-yellow-50 border-2 border-yellow-300":l===1?"bg-gray-50 border-2 border-gray-300":"bg-amber-50 border-2 border-amber-300"}`,children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center font-bold text-white text-xl ${l===0?"bg-yellow-500":l===1?"bg-gray-400":"bg-amber-600"}`,children:l===0?"":l===1?"":""}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"text-xl font-bold text-gray-800",children:m.name}),e.jsxs("div",{className:"text-gray-600",children:[Math.round(m.score/r*100),"% accuracy"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-800",children:m.score}),e.jsx("div",{className:"text-gray-600",children:"points"})]})]},m.id))})]}),e.jsxs("div",{className:"bg-blue-50 p-6 rounded-lg border-2 border-blue-200",children:[e.jsx("h4",{className:"text-lg font-semibold text-blue-700 mb-3",children:" Event Statistics"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-blue-800",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold",children:a}),e.jsx("div",{className:"text-sm",children:"Questions Asked"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold",children:Math.round(t.reduce((m,l)=>m+l.score,0)/t.length)}),e.jsx("div",{className:"text-sm",children:"Average Score"})]})]})]}),e.jsx("div",{className:"pt-4",children:e.jsx(f,{onClick:c,className:"bg-wine-600 hover:bg-wine-700 text-white px-8 py-3 text-lg font-semibold","data-testid":"button-finish-dry-run",children:" Finish Dry Run"})})]})}function aa({participants:t,currentQuestionIndex:a,totalQuestions:c,funFacts:n}){const o=[...t].sort((m,l)=>l.score-m.score),r=n[Math.floor(Math.random()*n.length)];return e.jsxs("div",{className:"space-y-6 text-center",children:[e.jsxs("div",{className:"bg-wine-50 p-6 rounded-lg border-2 border-wine-200",children:[e.jsxs("h3",{className:"text-2xl font-bold text-wine-800 mb-2",children:["Question ",a+1," Complete!"]}),e.jsxs("p",{className:"text-wine-600",children:[c-a-1," questions remaining"]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-champagne-100 to-wine-100 p-8 rounded-lg border-2 border-wine-200",children:[e.jsx("h4",{className:"text-lg font-semibold text-wine-700 mb-4",children:" Leaderboard"}),e.jsx("div",{className:"space-y-3",children:o.map((m,l)=>e.jsxs("div",{className:"flex items-center justify-between bg-white/50 p-3 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center font-bold text-white ${l===0?"bg-yellow-500":l===1?"bg-gray-400":"bg-amber-600"}`,children:l+1}),e.jsx("span",{className:"font-semibold text-wine-800",children:m.name})]}),e.jsxs("div",{className:"text-xl font-bold text-wine-800",children:[m.score," pts"]})]},m.id))}),e.jsx("p",{className:"text-wine-600 text-center mt-4",children:"Keep it up! More points for faster answers!"})]}),e.jsxs("div",{className:"bg-blue-50 p-6 rounded-lg border-2 border-blue-200",children:[e.jsx("h4",{className:"text-lg font-semibold text-blue-700 mb-3",children:" Did You Know?"}),e.jsx("p",{className:"text-blue-800 text-lg leading-relaxed",children:r})]}),e.jsxs("div",{className:"text-wine-600",children:[e.jsx("p",{children:"Next question starting soon..."}),e.jsx("div",{className:"flex justify-center mt-2",children:e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-wine-600"})})]})]})}export{qa as default};
