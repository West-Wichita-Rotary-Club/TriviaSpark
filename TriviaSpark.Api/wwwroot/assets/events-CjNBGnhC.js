import{g as fe,a as he,u as ge,b as me,r as X,j as l}from"./index-l74yJ-DA.js";import{u as we}from"./useQuery-CM9bS8sK.js";import{u as pe}from"./useMutation-D6DsXwTc.js";import{C as J,a as At,b as Mt,c as O}from"./card-BV_NaFVl.js";import{B as V}from"./button-BSjZ02wq.js";import{B as ye}from"./badge-gpSvq71q.js";import{B as Q}from"./brain-BgI3KZUA.js";import{C as jt}from"./calendar-Csrzevq2.js";import{M as Ce}from"./map-pin-D-XKymbI.js";import{B as Ee}from"./building-2-DOUiPVSF.js";import{U as Pt}from"./users-CUVHXaVv.js";import{P as Ne}from"./play-B99f42Gi.js";import{Q as Be}from"./qr-code-cN9e3cLx.js";var k={},tt,Tt;function xe(){return Tt||(Tt=1,tt=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then}),tt}var et={},D={},St;function F(){if(St)return D;St=1;let r;const i=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];return D.getSymbolSize=function(e){if(!e)throw new Error('"version" cannot be null or undefined');if(e<1||e>40)throw new Error('"version" should be in range from 1 to 40');return e*4+17},D.getSymbolTotalCodewords=function(e){return i[e]},D.getBCHDigit=function(o){let e=0;for(;o!==0;)e++,o>>>=1;return e},D.setToSJISFunction=function(e){if(typeof e!="function")throw new Error('"toSJISFunc" is not a valid function.');r=e},D.isKanjiModeEnabled=function(){return typeof r<"u"},D.toSJIS=function(e){return r(e)},D}var nt={},It;function xt(){return It||(It=1,(function(r){r.L={bit:1},r.M={bit:0},r.Q={bit:3},r.H={bit:2};function i(o){if(typeof o!="string")throw new Error("Param is not a string");switch(o.toLowerCase()){case"l":case"low":return r.L;case"m":case"medium":return r.M;case"q":case"quartile":return r.Q;case"h":case"high":return r.H;default:throw new Error("Unknown EC Level: "+o)}}r.isValid=function(e){return e&&typeof e.bit<"u"&&e.bit>=0&&e.bit<4},r.from=function(e,t){if(r.isValid(e))return e;try{return i(e)}catch{return t}}})(nt)),nt}var rt,Lt;function be(){if(Lt)return rt;Lt=1;function r(){this.buffer=[],this.length=0}return r.prototype={get:function(i){const o=Math.floor(i/8);return(this.buffer[o]>>>7-i%8&1)===1},put:function(i,o){for(let e=0;e<o;e++)this.putBit((i>>>o-e-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(i){const o=Math.floor(this.length/8);this.buffer.length<=o&&this.buffer.push(0),i&&(this.buffer[o]|=128>>>this.length%8),this.length++}},rt=r,rt}var it,qt;function ve(){if(qt)return it;qt=1;function r(i){if(!i||i<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=i,this.data=new Uint8Array(i*i),this.reservedBit=new Uint8Array(i*i)}return r.prototype.set=function(i,o,e,t){const n=i*this.size+o;this.data[n]=e,t&&(this.reservedBit[n]=!0)},r.prototype.get=function(i,o){return this.data[i*this.size+o]},r.prototype.xor=function(i,o,e){this.data[i*this.size+o]^=e},r.prototype.isReserved=function(i,o){return this.reservedBit[i*this.size+o]},it=r,it}var ot={},Dt;function Re(){return Dt||(Dt=1,(function(r){const i=F().getSymbolSize;r.getRowColCoords=function(e){if(e===1)return[];const t=Math.floor(e/7)+2,n=i(e),s=n===145?26:Math.ceil((n-13)/(2*t-2))*2,c=[n-7];for(let a=1;a<t-1;a++)c[a]=c[a-1]-s;return c.push(6),c.reverse()},r.getPositions=function(e){const t=[],n=r.getRowColCoords(e),s=n.length;for(let c=0;c<s;c++)for(let a=0;a<s;a++)c===0&&a===0||c===0&&a===s-1||c===s-1&&a===0||t.push([n[c],n[a]]);return t}})(ot)),ot}var st={},Ft;function Ae(){if(Ft)return st;Ft=1;const r=F().getSymbolSize,i=7;return st.getPositions=function(e){const t=r(e);return[[0,0],[t-i,0],[0,t-i]]},st}var at={},Ut;function Me(){return Ut||(Ut=1,(function(r){r.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const i={N1:3,N2:3,N3:40,N4:10};r.isValid=function(t){return t!=null&&t!==""&&!isNaN(t)&&t>=0&&t<=7},r.from=function(t){return r.isValid(t)?parseInt(t,10):void 0},r.getPenaltyN1=function(t){const n=t.size;let s=0,c=0,a=0,d=null,u=null;for(let w=0;w<n;w++){c=a=0,d=u=null;for(let m=0;m<n;m++){let f=t.get(w,m);f===d?c++:(c>=5&&(s+=i.N1+(c-5)),d=f,c=1),f=t.get(m,w),f===u?a++:(a>=5&&(s+=i.N1+(a-5)),u=f,a=1)}c>=5&&(s+=i.N1+(c-5)),a>=5&&(s+=i.N1+(a-5))}return s},r.getPenaltyN2=function(t){const n=t.size;let s=0;for(let c=0;c<n-1;c++)for(let a=0;a<n-1;a++){const d=t.get(c,a)+t.get(c,a+1)+t.get(c+1,a)+t.get(c+1,a+1);(d===4||d===0)&&s++}return s*i.N2},r.getPenaltyN3=function(t){const n=t.size;let s=0,c=0,a=0;for(let d=0;d<n;d++){c=a=0;for(let u=0;u<n;u++)c=c<<1&2047|t.get(d,u),u>=10&&(c===1488||c===93)&&s++,a=a<<1&2047|t.get(u,d),u>=10&&(a===1488||a===93)&&s++}return s*i.N3},r.getPenaltyN4=function(t){let n=0;const s=t.data.length;for(let a=0;a<s;a++)n+=t.data[a];return Math.abs(Math.ceil(n*100/s/5)-10)*i.N4};function o(e,t,n){switch(e){case r.Patterns.PATTERN000:return(t+n)%2===0;case r.Patterns.PATTERN001:return t%2===0;case r.Patterns.PATTERN010:return n%3===0;case r.Patterns.PATTERN011:return(t+n)%3===0;case r.Patterns.PATTERN100:return(Math.floor(t/2)+Math.floor(n/3))%2===0;case r.Patterns.PATTERN101:return t*n%2+t*n%3===0;case r.Patterns.PATTERN110:return(t*n%2+t*n%3)%2===0;case r.Patterns.PATTERN111:return(t*n%3+(t+n)%2)%2===0;default:throw new Error("bad maskPattern:"+e)}}r.applyMask=function(t,n){const s=n.size;for(let c=0;c<s;c++)for(let a=0;a<s;a++)n.isReserved(a,c)||n.xor(a,c,o(t,a,c))},r.getBestMask=function(t,n){const s=Object.keys(r.Patterns).length;let c=0,a=1/0;for(let d=0;d<s;d++){n(d),r.applyMask(d,t);const u=r.getPenaltyN1(t)+r.getPenaltyN2(t)+r.getPenaltyN3(t)+r.getPenaltyN4(t);r.applyMask(d,t),u<a&&(a=u,c=d)}return c}})(at)),at}var Y={},_t;function oe(){if(_t)return Y;_t=1;const r=xt(),i=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],o=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];return Y.getBlocksCount=function(t,n){switch(n){case r.L:return i[(t-1)*4+0];case r.M:return i[(t-1)*4+1];case r.Q:return i[(t-1)*4+2];case r.H:return i[(t-1)*4+3];default:return}},Y.getTotalCodewordsCount=function(t,n){switch(n){case r.L:return o[(t-1)*4+0];case r.M:return o[(t-1)*4+1];case r.Q:return o[(t-1)*4+2];case r.H:return o[(t-1)*4+3];default:return}},Y}var ct={},K={},kt;function je(){if(kt)return K;kt=1;const r=new Uint8Array(512),i=new Uint8Array(256);return(function(){let e=1;for(let t=0;t<255;t++)r[t]=e,i[e]=t,e<<=1,e&256&&(e^=285);for(let t=255;t<512;t++)r[t]=r[t-255]})(),K.log=function(e){if(e<1)throw new Error("log("+e+")");return i[e]},K.exp=function(e){return r[e]},K.mul=function(e,t){return e===0||t===0?0:r[i[e]+i[t]]},K}var zt;function Pe(){return zt||(zt=1,(function(r){const i=je();r.mul=function(e,t){const n=new Uint8Array(e.length+t.length-1);for(let s=0;s<e.length;s++)for(let c=0;c<t.length;c++)n[s+c]^=i.mul(e[s],t[c]);return n},r.mod=function(e,t){let n=new Uint8Array(e);for(;n.length-t.length>=0;){const s=n[0];for(let a=0;a<t.length;a++)n[a]^=i.mul(t[a],s);let c=0;for(;c<n.length&&n[c]===0;)c++;n=n.slice(c)}return n},r.generateECPolynomial=function(e){let t=new Uint8Array([1]);for(let n=0;n<e;n++)t=r.mul(t,new Uint8Array([1,i.exp(n)]));return t}})(ct)),ct}var ut,Vt;function Te(){if(Vt)return ut;Vt=1;const r=Pe();function i(o){this.genPoly=void 0,this.degree=o,this.degree&&this.initialize(this.degree)}return i.prototype.initialize=function(e){this.degree=e,this.genPoly=r.generateECPolynomial(this.degree)},i.prototype.encode=function(e){if(!this.genPoly)throw new Error("Encoder not initialized");const t=new Uint8Array(e.length+this.degree);t.set(e);const n=r.mod(t,this.genPoly),s=this.degree-n.length;if(s>0){const c=new Uint8Array(this.degree);return c.set(n,s),c}return n},ut=i,ut}var lt={},dt={},ft={},Kt;function se(){return Kt||(Kt=1,ft.isValid=function(i){return!isNaN(i)&&i>=1&&i<=40}),ft}var S={},Ht;function ae(){if(Ht)return S;Ht=1;const r="[0-9]+",i="[A-Z $%*+\\-./:]+";let o="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";o=o.replace(/u/g,"\\u");const e="(?:(?![A-Z0-9 $%*+\\-./:]|"+o+`)(?:.|[\r
]))+`;S.KANJI=new RegExp(o,"g"),S.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),S.BYTE=new RegExp(e,"g"),S.NUMERIC=new RegExp(r,"g"),S.ALPHANUMERIC=new RegExp(i,"g");const t=new RegExp("^"+o+"$"),n=new RegExp("^"+r+"$"),s=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");return S.testKanji=function(a){return t.test(a)},S.testNumeric=function(a){return n.test(a)},S.testAlphanumeric=function(a){return s.test(a)},S}var Jt;function U(){return Jt||(Jt=1,(function(r){const i=se(),o=ae();r.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},r.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},r.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},r.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},r.MIXED={bit:-1},r.getCharCountIndicator=function(n,s){if(!n.ccBits)throw new Error("Invalid mode: "+n);if(!i.isValid(s))throw new Error("Invalid version: "+s);return s>=1&&s<10?n.ccBits[0]:s<27?n.ccBits[1]:n.ccBits[2]},r.getBestModeForData=function(n){return o.testNumeric(n)?r.NUMERIC:o.testAlphanumeric(n)?r.ALPHANUMERIC:o.testKanji(n)?r.KANJI:r.BYTE},r.toString=function(n){if(n&&n.id)return n.id;throw new Error("Invalid mode")},r.isValid=function(n){return n&&n.bit&&n.ccBits};function e(t){if(typeof t!="string")throw new Error("Param is not a string");switch(t.toLowerCase()){case"numeric":return r.NUMERIC;case"alphanumeric":return r.ALPHANUMERIC;case"kanji":return r.KANJI;case"byte":return r.BYTE;default:throw new Error("Unknown mode: "+t)}}r.from=function(n,s){if(r.isValid(n))return n;try{return e(n)}catch{return s}}})(dt)),dt}var Ot;function Se(){return Ot||(Ot=1,(function(r){const i=F(),o=oe(),e=xt(),t=U(),n=se(),s=7973,c=i.getBCHDigit(s);function a(m,f,A){for(let M=1;M<=40;M++)if(f<=r.getCapacity(M,A,m))return M}function d(m,f){return t.getCharCountIndicator(m,f)+4}function u(m,f){let A=0;return m.forEach(function(M){const P=d(M.mode,f);A+=P+M.getBitsLength()}),A}function w(m,f){for(let A=1;A<=40;A++)if(u(m,A)<=r.getCapacity(A,f,t.MIXED))return A}r.from=function(f,A){return n.isValid(f)?parseInt(f,10):A},r.getCapacity=function(f,A,M){if(!n.isValid(f))throw new Error("Invalid QR Code version");typeof M>"u"&&(M=t.BYTE);const P=i.getSymbolTotalCodewords(f),b=o.getTotalCodewordsCount(f,A),j=(P-b)*8;if(M===t.MIXED)return j;const v=j-d(M,f);switch(M){case t.NUMERIC:return Math.floor(v/10*3);case t.ALPHANUMERIC:return Math.floor(v/11*2);case t.KANJI:return Math.floor(v/13);case t.BYTE:default:return Math.floor(v/8)}},r.getBestVersionForData=function(f,A){let M;const P=e.from(A,e.M);if(Array.isArray(f)){if(f.length>1)return w(f,P);if(f.length===0)return 1;M=f[0]}else M=f;return a(M.mode,M.getLength(),P)},r.getEncodedBits=function(f){if(!n.isValid(f)||f<7)throw new Error("Invalid QR Code version");let A=f<<12;for(;i.getBCHDigit(A)-c>=0;)A^=s<<i.getBCHDigit(A)-c;return f<<12|A}})(lt)),lt}var ht={},Qt;function Ie(){if(Qt)return ht;Qt=1;const r=F(),i=1335,o=21522,e=r.getBCHDigit(i);return ht.getEncodedBits=function(n,s){const c=n.bit<<3|s;let a=c<<10;for(;r.getBCHDigit(a)-e>=0;)a^=i<<r.getBCHDigit(a)-e;return(c<<10|a)^o},ht}var gt={},mt,Yt;function Le(){if(Yt)return mt;Yt=1;const r=U();function i(o){this.mode=r.NUMERIC,this.data=o.toString()}return i.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)},i.prototype.getLength=function(){return this.data.length},i.prototype.getBitsLength=function(){return i.getBitsLength(this.data.length)},i.prototype.write=function(e){let t,n,s;for(t=0;t+3<=this.data.length;t+=3)n=this.data.substr(t,3),s=parseInt(n,10),e.put(s,10);const c=this.data.length-t;c>0&&(n=this.data.substr(t),s=parseInt(n,10),e.put(s,c*3+1))},mt=i,mt}var wt,$t;function qe(){if($t)return wt;$t=1;const r=U(),i=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function o(e){this.mode=r.ALPHANUMERIC,this.data=e}return o.getBitsLength=function(t){return 11*Math.floor(t/2)+6*(t%2)},o.prototype.getLength=function(){return this.data.length},o.prototype.getBitsLength=function(){return o.getBitsLength(this.data.length)},o.prototype.write=function(t){let n;for(n=0;n+2<=this.data.length;n+=2){let s=i.indexOf(this.data[n])*45;s+=i.indexOf(this.data[n+1]),t.put(s,11)}this.data.length%2&&t.put(i.indexOf(this.data[n]),6)},wt=o,wt}var pt,Gt;function De(){if(Gt)return pt;Gt=1;const r=U();function i(o){this.mode=r.BYTE,typeof o=="string"?this.data=new TextEncoder().encode(o):this.data=new Uint8Array(o)}return i.getBitsLength=function(e){return e*8},i.prototype.getLength=function(){return this.data.length},i.prototype.getBitsLength=function(){return i.getBitsLength(this.data.length)},i.prototype.write=function(o){for(let e=0,t=this.data.length;e<t;e++)o.put(this.data[e],8)},pt=i,pt}var yt,Wt;function Fe(){if(Wt)return yt;Wt=1;const r=U(),i=F();function o(e){this.mode=r.KANJI,this.data=e}return o.getBitsLength=function(t){return t*13},o.prototype.getLength=function(){return this.data.length},o.prototype.getBitsLength=function(){return o.getBitsLength(this.data.length)},o.prototype.write=function(e){let t;for(t=0;t<this.data.length;t++){let n=i.toSJIS(this.data[t]);if(n>=33088&&n<=40956)n-=33088;else if(n>=57408&&n<=60351)n-=49472;else throw new Error("Invalid SJIS character: "+this.data[t]+`
Make sure your charset is UTF-8`);n=(n>>>8&255)*192+(n&255),e.put(n,13)}},yt=o,yt}var Ct={exports:{}},Zt;function Ue(){return Zt||(Zt=1,(function(r){var i={single_source_shortest_paths:function(o,e,t){var n={},s={};s[e]=0;var c=i.PriorityQueue.make();c.push(e,0);for(var a,d,u,w,m,f,A,M,P;!c.empty();){a=c.pop(),d=a.value,w=a.cost,m=o[d]||{};for(u in m)m.hasOwnProperty(u)&&(f=m[u],A=w+f,M=s[u],P=typeof s[u]>"u",(P||M>A)&&(s[u]=A,c.push(u,A),n[u]=d))}if(typeof t<"u"&&typeof s[t]>"u"){var b=["Could not find a path from ",e," to ",t,"."].join("");throw new Error(b)}return n},extract_shortest_path_from_predecessor_list:function(o,e){for(var t=[],n=e;n;)t.push(n),o[n],n=o[n];return t.reverse(),t},find_path:function(o,e,t){var n=i.single_source_shortest_paths(o,e,t);return i.extract_shortest_path_from_predecessor_list(n,t)},PriorityQueue:{make:function(o){var e=i.PriorityQueue,t={},n;o=o||{};for(n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t.queue=[],t.sorter=o.sorter||e.default_sorter,t},default_sorter:function(o,e){return o.cost-e.cost},push:function(o,e){var t={value:o,cost:e};this.queue.push(t),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};r.exports=i})(Ct)),Ct.exports}var Xt;function _e(){return Xt||(Xt=1,(function(r){const i=U(),o=Le(),e=qe(),t=De(),n=Fe(),s=ae(),c=F(),a=Ue();function d(b){return unescape(encodeURIComponent(b)).length}function u(b,j,v){const B=[];let T;for(;(T=b.exec(v))!==null;)B.push({data:T[0],index:T.index,mode:j,length:T[0].length});return B}function w(b){const j=u(s.NUMERIC,i.NUMERIC,b),v=u(s.ALPHANUMERIC,i.ALPHANUMERIC,b);let B,T;return c.isKanjiModeEnabled()?(B=u(s.BYTE,i.BYTE,b),T=u(s.KANJI,i.KANJI,b)):(B=u(s.BYTE_KANJI,i.BYTE,b),T=[]),j.concat(v,B,T).sort(function(E,C){return E.index-C.index}).map(function(E){return{data:E.data,mode:E.mode,length:E.length}})}function m(b,j){switch(j){case i.NUMERIC:return o.getBitsLength(b);case i.ALPHANUMERIC:return e.getBitsLength(b);case i.KANJI:return n.getBitsLength(b);case i.BYTE:return t.getBitsLength(b)}}function f(b){return b.reduce(function(j,v){const B=j.length-1>=0?j[j.length-1]:null;return B&&B.mode===v.mode?(j[j.length-1].data+=v.data,j):(j.push(v),j)},[])}function A(b){const j=[];for(let v=0;v<b.length;v++){const B=b[v];switch(B.mode){case i.NUMERIC:j.push([B,{data:B.data,mode:i.ALPHANUMERIC,length:B.length},{data:B.data,mode:i.BYTE,length:B.length}]);break;case i.ALPHANUMERIC:j.push([B,{data:B.data,mode:i.BYTE,length:B.length}]);break;case i.KANJI:j.push([B,{data:B.data,mode:i.BYTE,length:d(B.data)}]);break;case i.BYTE:j.push([{data:B.data,mode:i.BYTE,length:d(B.data)}])}}return j}function M(b,j){const v={},B={start:{}};let T=["start"];for(let g=0;g<b.length;g++){const E=b[g],C=[];for(let h=0;h<E.length;h++){const x=E[h],p=""+g+h;C.push(p),v[p]={node:x,lastCount:0},B[p]={};for(let N=0;N<T.length;N++){const y=T[N];v[y]&&v[y].node.mode===x.mode?(B[y][p]=m(v[y].lastCount+x.length,x.mode)-m(v[y].lastCount,x.mode),v[y].lastCount+=x.length):(v[y]&&(v[y].lastCount=x.length),B[y][p]=m(x.length,x.mode)+4+i.getCharCountIndicator(x.mode,j))}}T=C}for(let g=0;g<T.length;g++)B[T[g]].end=0;return{map:B,table:v}}function P(b,j){let v;const B=i.getBestModeForData(b);if(v=i.from(j,B),v!==i.BYTE&&v.bit<B.bit)throw new Error('"'+b+'" cannot be encoded with mode '+i.toString(v)+`.
 Suggested mode is: `+i.toString(B));switch(v===i.KANJI&&!c.isKanjiModeEnabled()&&(v=i.BYTE),v){case i.NUMERIC:return new o(b);case i.ALPHANUMERIC:return new e(b);case i.KANJI:return new n(b);case i.BYTE:return new t(b)}}r.fromArray=function(j){return j.reduce(function(v,B){return typeof B=="string"?v.push(P(B,null)):B.data&&v.push(P(B.data,B.mode)),v},[])},r.fromString=function(j,v){const B=w(j,c.isKanjiModeEnabled()),T=A(B),g=M(T,v),E=a.find_path(g.map,"start","end"),C=[];for(let h=1;h<E.length-1;h++)C.push(g.table[E[h]].node);return r.fromArray(f(C))},r.rawSplit=function(j){return r.fromArray(w(j,c.isKanjiModeEnabled()))}})(gt)),gt}var te;function ke(){if(te)return et;te=1;const r=F(),i=xt(),o=be(),e=ve(),t=Re(),n=Ae(),s=Me(),c=oe(),a=Te(),d=Se(),u=Ie(),w=U(),m=_e();function f(g,E){const C=g.size,h=n.getPositions(E);for(let x=0;x<h.length;x++){const p=h[x][0],N=h[x][1];for(let y=-1;y<=7;y++)if(!(p+y<=-1||C<=p+y))for(let R=-1;R<=7;R++)N+R<=-1||C<=N+R||(y>=0&&y<=6&&(R===0||R===6)||R>=0&&R<=6&&(y===0||y===6)||y>=2&&y<=4&&R>=2&&R<=4?g.set(p+y,N+R,!0,!0):g.set(p+y,N+R,!1,!0))}}function A(g){const E=g.size;for(let C=8;C<E-8;C++){const h=C%2===0;g.set(C,6,h,!0),g.set(6,C,h,!0)}}function M(g,E){const C=t.getPositions(E);for(let h=0;h<C.length;h++){const x=C[h][0],p=C[h][1];for(let N=-2;N<=2;N++)for(let y=-2;y<=2;y++)N===-2||N===2||y===-2||y===2||N===0&&y===0?g.set(x+N,p+y,!0,!0):g.set(x+N,p+y,!1,!0)}}function P(g,E){const C=g.size,h=d.getEncodedBits(E);let x,p,N;for(let y=0;y<18;y++)x=Math.floor(y/3),p=y%3+C-8-3,N=(h>>y&1)===1,g.set(x,p,N,!0),g.set(p,x,N,!0)}function b(g,E,C){const h=g.size,x=u.getEncodedBits(E,C);let p,N;for(p=0;p<15;p++)N=(x>>p&1)===1,p<6?g.set(p,8,N,!0):p<8?g.set(p+1,8,N,!0):g.set(h-15+p,8,N,!0),p<8?g.set(8,h-p-1,N,!0):p<9?g.set(8,15-p-1+1,N,!0):g.set(8,15-p-1,N,!0);g.set(h-8,8,1,!0)}function j(g,E){const C=g.size;let h=-1,x=C-1,p=7,N=0;for(let y=C-1;y>0;y-=2)for(y===6&&y--;;){for(let R=0;R<2;R++)if(!g.isReserved(x,y-R)){let q=!1;N<E.length&&(q=(E[N]>>>p&1)===1),g.set(x,y-R,q),p--,p===-1&&(N++,p=7)}if(x+=h,x<0||C<=x){x-=h,h=-h;break}}}function v(g,E,C){const h=new o;C.forEach(function(R){h.put(R.mode.bit,4),h.put(R.getLength(),w.getCharCountIndicator(R.mode,g)),R.write(h)});const x=r.getSymbolTotalCodewords(g),p=c.getTotalCodewordsCount(g,E),N=(x-p)*8;for(h.getLengthInBits()+4<=N&&h.put(0,4);h.getLengthInBits()%8!==0;)h.putBit(0);const y=(N-h.getLengthInBits())/8;for(let R=0;R<y;R++)h.put(R%2?17:236,8);return B(h,g,E)}function B(g,E,C){const h=r.getSymbolTotalCodewords(E),x=c.getTotalCodewordsCount(E,C),p=h-x,N=c.getBlocksCount(E,C),y=h%N,R=N-y,q=Math.floor(h/N),z=Math.floor(p/N),ue=z+1,bt=q-z,le=new a(bt);let $=0;const H=new Array(N),vt=new Array(N);let G=0;const de=new Uint8Array(g.buffer);for(let _=0;_<N;_++){const Z=_<R?z:ue;H[_]=de.slice($,$+Z),vt[_]=le.encode(H[_]),$+=Z,G=Math.max(G,Z)}const W=new Uint8Array(h);let Rt=0,I,L;for(I=0;I<G;I++)for(L=0;L<N;L++)I<H[L].length&&(W[Rt++]=H[L][I]);for(I=0;I<bt;I++)for(L=0;L<N;L++)W[Rt++]=vt[L][I];return W}function T(g,E,C,h){let x;if(Array.isArray(g))x=m.fromArray(g);else if(typeof g=="string"){let q=E;if(!q){const z=m.rawSplit(g);q=d.getBestVersionForData(z,C)}x=m.fromString(g,q||40)}else throw new Error("Invalid data");const p=d.getBestVersionForData(x,C);if(!p)throw new Error("The amount of data is too big to be stored in a QR Code");if(!E)E=p;else if(E<p)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+p+`.
`);const N=v(E,C,x),y=r.getSymbolSize(E),R=new e(y);return f(R,E),A(R),M(R,E),b(R,C,0),E>=7&&P(R,E),j(R,N),isNaN(h)&&(h=s.getBestMask(R,b.bind(null,R,C))),s.applyMask(h,R),b(R,C,h),{modules:R,version:E,errorCorrectionLevel:C,maskPattern:h,segments:x}}return et.create=function(E,C){if(typeof E>"u"||E==="")throw new Error("No input text");let h=i.M,x,p;return typeof C<"u"&&(h=i.from(C.errorCorrectionLevel,i.M),x=d.from(C.version),p=s.from(C.maskPattern),C.toSJISFunc&&r.setToSJISFunction(C.toSJISFunc)),T(E,x,h,p)},et}var Et={},Nt={},ee;function ce(){return ee||(ee=1,(function(r){function i(o){if(typeof o=="number"&&(o=o.toString()),typeof o!="string")throw new Error("Color should be defined as hex string");let e=o.slice().replace("#","").split("");if(e.length<3||e.length===5||e.length>8)throw new Error("Invalid hex color: "+o);(e.length===3||e.length===4)&&(e=Array.prototype.concat.apply([],e.map(function(n){return[n,n]}))),e.length===6&&e.push("F","F");const t=parseInt(e.join(""),16);return{r:t>>24&255,g:t>>16&255,b:t>>8&255,a:t&255,hex:"#"+e.slice(0,6).join("")}}r.getOptions=function(e){e||(e={}),e.color||(e.color={});const t=typeof e.margin>"u"||e.margin===null||e.margin<0?4:e.margin,n=e.width&&e.width>=21?e.width:void 0,s=e.scale||4;return{width:n,scale:n?4:s,margin:t,color:{dark:i(e.color.dark||"#000000ff"),light:i(e.color.light||"#ffffffff")},type:e.type,rendererOpts:e.rendererOpts||{}}},r.getScale=function(e,t){return t.width&&t.width>=e+t.margin*2?t.width/(e+t.margin*2):t.scale},r.getImageWidth=function(e,t){const n=r.getScale(e,t);return Math.floor((e+t.margin*2)*n)},r.qrToImageData=function(e,t,n){const s=t.modules.size,c=t.modules.data,a=r.getScale(s,n),d=Math.floor((s+n.margin*2)*a),u=n.margin*a,w=[n.color.light,n.color.dark];for(let m=0;m<d;m++)for(let f=0;f<d;f++){let A=(m*d+f)*4,M=n.color.light;if(m>=u&&f>=u&&m<d-u&&f<d-u){const P=Math.floor((m-u)/a),b=Math.floor((f-u)/a);M=w[c[P*s+b]?1:0]}e[A++]=M.r,e[A++]=M.g,e[A++]=M.b,e[A]=M.a}}})(Nt)),Nt}var ne;function ze(){return ne||(ne=1,(function(r){const i=ce();function o(t,n,s){t.clearRect(0,0,n.width,n.height),n.style||(n.style={}),n.height=s,n.width=s,n.style.height=s+"px",n.style.width=s+"px"}function e(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}r.render=function(n,s,c){let a=c,d=s;typeof a>"u"&&(!s||!s.getContext)&&(a=s,s=void 0),s||(d=e()),a=i.getOptions(a);const u=i.getImageWidth(n.modules.size,a),w=d.getContext("2d"),m=w.createImageData(u,u);return i.qrToImageData(m.data,n,a),o(w,d,u),w.putImageData(m,0,0),d},r.renderToDataURL=function(n,s,c){let a=c;typeof a>"u"&&(!s||!s.getContext)&&(a=s,s=void 0),a||(a={});const d=r.render(n,s,a),u=a.type||"image/png",w=a.rendererOpts||{};return d.toDataURL(u,w.quality)}})(Et)),Et}var Bt={},re;function Ve(){if(re)return Bt;re=1;const r=ce();function i(t,n){const s=t.a/255,c=n+'="'+t.hex+'"';return s<1?c+" "+n+'-opacity="'+s.toFixed(2).slice(1)+'"':c}function o(t,n,s){let c=t+n;return typeof s<"u"&&(c+=" "+s),c}function e(t,n,s){let c="",a=0,d=!1,u=0;for(let w=0;w<t.length;w++){const m=Math.floor(w%n),f=Math.floor(w/n);!m&&!d&&(d=!0),t[w]?(u++,w>0&&m>0&&t[w-1]||(c+=d?o("M",m+s,.5+f+s):o("m",a,0),a=0,d=!1),m+1<n&&t[w+1]||(c+=o("h",u),u=0)):a++}return c}return Bt.render=function(n,s,c){const a=r.getOptions(s),d=n.modules.size,u=n.modules.data,w=d+a.margin*2,m=a.color.light.a?"<path "+i(a.color.light,"fill")+' d="M0 0h'+w+"v"+w+'H0z"/>':"",f="<path "+i(a.color.dark,"stroke")+' d="'+e(u,d,a.margin)+'"/>',A='viewBox="0 0 '+w+" "+w+'"',P='<svg xmlns="http://www.w3.org/2000/svg" '+(a.width?'width="'+a.width+'" height="'+a.width+'" ':"")+A+' shape-rendering="crispEdges">'+m+f+`</svg>
`;return typeof c=="function"&&c(null,P),P},Bt}var ie;function Ke(){if(ie)return k;ie=1;const r=xe(),i=ke(),o=ze(),e=Ve();function t(n,s,c,a,d){const u=[].slice.call(arguments,1),w=u.length,m=typeof u[w-1]=="function";if(!m&&!r())throw new Error("Callback required as last argument");if(m){if(w<2)throw new Error("Too few arguments provided");w===2?(d=c,c=s,s=a=void 0):w===3&&(s.getContext&&typeof d>"u"?(d=a,a=void 0):(d=a,a=c,c=s,s=void 0))}else{if(w<1)throw new Error("Too few arguments provided");return w===1?(c=s,s=a=void 0):w===2&&!s.getContext&&(a=c,c=s,s=void 0),new Promise(function(f,A){try{const M=i.create(c,a);f(n(M,s,a))}catch(M){A(M)}})}try{const f=i.create(c,a);d(null,n(f,s,a))}catch(f){d(f)}}return k.create=i.create,k.toCanvas=t.bind(null,o.render),k.toDataURL=t.bind(null,o.renderToDataURL),k.toString=t.bind(null,function(n,s,c){return e.render(n,c)}),k}var He=Ke();const Je=fe(He);function sn(){const{toast:r}=he(),[,i]=ge(),o=me(),[e,t]=X.useState(null),[n,s]=X.useState(""),{data:c,isLoading:a}=we({queryKey:["/api/events"],retry:!1}),d=pe({mutationFn:async u=>{const w=await fetch(`/api/events/${u}/start`,{method:"POST",credentials:"include"});if(!w.ok){const m=await w.json();throw new Error(m.error||"Failed to start event")}return w.json()},onSuccess:u=>{o.invalidateQueries({queryKey:["/api/events"]}),r({title:"Event Started!",description:`${u.title} is now live and accepting participants.`})},onError:u=>{r({title:"Failed to start event",description:u.message,variant:"destructive"})}});return X.useEffect(()=>{if(e){const u=`${window.location.origin}/join/${e.qrCode}`;Je.toDataURL(u,{width:300,margin:2,color:{dark:"#7C2D12",light:"#FFFFFF"}}).then(s)}},[e]),a?l.jsx("div",{className:"min-h-screen bg-gradient-to-br from-wine-50 to-champagne-50 flex items-center justify-center",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"w-16 h-16 wine-gradient rounded-2xl flex items-center justify-center mx-auto mb-4",children:l.jsx(Q,{className:"text-champagne-400 h-8 w-8 animate-pulse"})}),l.jsx("p",{className:"text-wine-700",children:"Loading..."})]})}):l.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-wine-50 to-champagne-50",children:[l.jsx("div",{className:"wine-gradient shadow-lg",children:l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:l.jsx("div",{className:"flex items-center justify-between",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center backdrop-blur-sm border border-white/30 mr-4",children:l.jsx(Q,{className:"text-champagne-400 h-6 w-6"})}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold text-white","data-testid":"text-page-title",children:"Event Management"}),l.jsx("p",{className:"text-champagne-200","data-testid":"text-welcome",children:"Manage your trivia events"})]})]})})})}),l.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[l.jsx("div",{className:"lg:col-span-2",children:l.jsxs(J,{className:"trivia-card","data-testid":"card-events-list",children:[l.jsx(At,{children:l.jsxs(Mt,{className:"flex items-center wine-text",children:[l.jsx(jt,{className:"mr-2 h-5 w-5"}),"Your Events"]})}),l.jsx(O,{children:a?l.jsx("div",{className:"text-center py-8",children:l.jsx("p",{className:"text-gray-600",children:"Loading events..."})}):c&&c.length>0?l.jsx("div",{className:"space-y-4",children:c.map(u=>l.jsx(J,{className:`cursor-pointer transition-all hover:shadow-md ${e?.id===u.id?"ring-2 ring-wine-500 bg-wine-50":""}`,onClick:()=>t(u),"data-testid":`event-card-${u.id}`,children:l.jsxs(O,{className:"p-4",children:[l.jsxs("div",{className:"flex items-start justify-between mb-2",children:[l.jsx("div",{className:"flex-1",children:l.jsx("h3",{className:"font-semibold text-wine-800 text-lg","data-testid":`text-event-title-${u.id}`,children:u.title})}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(ye,{variant:u.status==="active"?"default":"secondary",className:u.status==="active"?"bg-emerald-100 text-emerald-800":"","data-testid":`badge-status-${u.id}`,children:u.status}),l.jsx(V,{size:"sm",variant:"outline",onClick:w=>{w.stopPropagation(),i(`/events/${u.id}/manage`)},className:"text-xs","data-testid":`button-manage-${u.id}`,children:"Manage"})]})]}),l.jsx("p",{className:"text-gray-600 text-sm mb-3","data-testid":`text-event-description-${u.id}`,children:u.description}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 text-sm text-gray-500",children:[u.eventTime&&l.jsxs("div",{className:"flex items-center",children:[l.jsx(jt,{className:"mr-1 h-3 w-3"}),u.eventTime]}),u.location&&l.jsxs("div",{className:"flex items-center",children:[l.jsx(Ce,{className:"mr-1 h-3 w-3"}),u.location]}),u.sponsoringOrganization&&l.jsxs("div",{className:"flex items-center",children:[l.jsx(Ee,{className:"mr-1 h-3 w-3"}),u.sponsoringOrganization]}),l.jsxs("div",{className:"flex items-center",children:[l.jsx(Pt,{className:"mr-1 h-3 w-3"}),"Max ",u.maxParticipants," participants"]})]})]})},u.id))}):l.jsxs("div",{className:"text-center py-8",children:[l.jsx(Q,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),l.jsx("p",{className:"text-gray-600 mb-4",children:"No events found"}),l.jsx(V,{onClick:()=>i("/dashboard"),"data-testid":"button-create-event",children:"Create Your First Event"})]})})]})}),l.jsx("div",{children:e?l.jsxs("div",{className:"space-y-6",children:[l.jsxs(J,{className:"trivia-card","data-testid":"card-event-details",children:[l.jsx(At,{children:l.jsx(Mt,{className:"wine-text text-lg",children:e.title})}),l.jsx(O,{children:l.jsxs("div",{className:"space-y-4",children:[e.status!=="active"&&l.jsx(V,{onClick:()=>d.mutate(e.id),disabled:d.isPending,className:"w-full trivia-button-primary","data-testid":"button-start-event",children:d.isPending?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"animate-spin mr-2 h-4 w-4 border-2 border-white border-t-transparent rounded-full"}),"Starting..."]}):l.jsxs(l.Fragment,{children:[l.jsx(Ne,{className:"mr-2 h-4 w-4"}),"Start Event"]})}),e.status==="active"&&l.jsxs("div",{className:"text-center space-y-4",children:[l.jsx("div",{className:"w-full max-w-sm mx-auto",children:n&&l.jsx("img",{src:n,alt:"Join Event QR Code",className:"w-full h-auto rounded-lg shadow-md","data-testid":"image-qr-code"})}),l.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[l.jsx("p",{className:"text-sm font-medium text-gray-700 mb-1",children:"Join Code:"}),l.jsx("p",{className:"text-lg font-mono text-wine-800","data-testid":"text-join-code",children:e.qrCode})]}),l.jsxs("p",{className:"text-sm text-gray-600",children:["Participants can scan the QR code or visit:",l.jsx("br",{}),l.jsxs("span",{className:"font-mono text-wine-800",children:["/join/",e.qrCode]})]})]})]})})]}),e.status==="active"&&l.jsxs(V,{onClick:()=>i(`/event/${e.id}`),className:"w-full trivia-button-secondary","data-testid":"button-manage-event",children:[l.jsx(Pt,{className:"mr-2 h-4 w-4"}),"Manage Event"]})]}):l.jsx(J,{className:"trivia-card","data-testid":"card-select-event",children:l.jsxs(O,{className:"text-center py-12",children:[l.jsx(Be,{className:"mx-auto h-16 w-16 text-gray-400 mb-4"}),l.jsx("p",{className:"text-gray-600",children:"Select an event to view QR code and controls"})]})})})]}),l.jsx("div",{className:"mt-8 text-center",children:l.jsxs(V,{variant:"outline",onClick:()=>i("/dashboard"),className:"border-wine-200 text-wine-700 hover:bg-wine-50","data-testid":"button-dashboard",children:[l.jsx(Q,{className:"mr-2 h-4 w-4"}),"Go to Dashboard"]})})]})]})}export{sn as default};
