import{c as R,Q as C,r as n,j as t,m as M,P as m,t as P,x as f,i as x,L as g,T as F}from"./index-B3kiAkw1.js";import{B as H}from"./button-Vc9A3Hwj.js";import{u as B}from"./useQuery-DiAfy7Pa.js";import{B as T}from"./brain-Bs-mDy7J.js";/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],q=R("bell",$);function z(){return C.useSyncExternalStore(O,()=>!0,()=>!1)}function O(){return()=>{}}var h="Avatar",[Q,Z]=M(h),[K,w]=Q(h),y=n.forwardRef((e,a)=>{const{__scopeAvatar:s,...o}=e,[l,r]=n.useState("idle");return t.jsx(K,{scope:s,imageLoadingStatus:l,onImageLoadingStatusChange:r,children:t.jsx(m.span,{...o,ref:a})})});y.displayName=h;var j="AvatarImage",N=n.forwardRef((e,a)=>{const{__scopeAvatar:s,src:o,onLoadingStatusChange:l=()=>{},...r}=e,d=w(j,s),i=W(o,r),c=P(u=>{l(u),d.onImageLoadingStatusChange(u)});return f(()=>{i!=="idle"&&c(i)},[i,c]),i==="loaded"?t.jsx(m.img,{...r,ref:a,src:o}):null});N.displayName=j;var b="AvatarFallback",A=n.forwardRef((e,a)=>{const{__scopeAvatar:s,delayMs:o,...l}=e,r=w(b,s),[d,i]=n.useState(o===void 0);return n.useEffect(()=>{if(o!==void 0){const c=window.setTimeout(()=>i(!0),o);return()=>window.clearTimeout(c)}},[o]),d&&r.imageLoadingStatus!=="loaded"?t.jsx(m.span,{...l,ref:a}):null});A.displayName=b;function p(e,a){return e?a?(e.src!==a&&(e.src=a),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}function W(e,{referrerPolicy:a,crossOrigin:s}){const o=z(),l=n.useRef(null),r=o?(l.current||(l.current=new window.Image),l.current):null,[d,i]=n.useState(()=>p(r,e));return f(()=>{i(p(r,e))},[r,e]),f(()=>{const c=_=>()=>{i(_)};if(!r)return;const u=c("loaded"),v=c("error");return r.addEventListener("load",u),r.addEventListener("error",v),a&&(r.referrerPolicy=a),typeof s=="string"&&(r.crossOrigin=s),()=>{r.removeEventListener("load",u),r.removeEventListener("error",v)}},[r,s,a]),d}var S=y,k=N,L=A;const I=n.forwardRef(({className:e,...a},s)=>t.jsx(S,{ref:s,className:x("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...a}));I.displayName=S.displayName;const G=n.forwardRef(({className:e,...a},s)=>t.jsx(k,{ref:s,className:x("aspect-square h-full w-full",e),...a}));G.displayName=k.displayName;const E=n.forwardRef(({className:e,...a},s)=>t.jsx(L,{ref:s,className:x("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...a}));E.displayName=L.displayName;function V(e=3e4){const[a,s]=n.useState({ok:!1}),[o,l]=n.useState(!0);async function r(){try{const d=await fetch("/api/health",{credentials:"include"}),i=d.ok,c=i?await d.json():null;s({ok:i,time:c?.time})}catch{s({ok:!1})}finally{l(!1)}}return n.useEffect(()=>{r();const d=setInterval(r,e);return()=>clearInterval(d)},[e]),{status:a,loading:o,refresh:r}}function D(){const{status:e}=V(3e4),{data:a}=B({queryKey:["/api/auth/me"],queryFn:F({on401:"returnNull"}),retry:!1}),s=a?.user?"/dashboard":"/";return t.jsx("nav",{className:"bg-white shadow-sm border-b border-gray-200 sticky top-0 z-50",children:t.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:t.jsxs("div",{className:"flex justify-between items-center h-16",children:[t.jsx(g,{href:s,children:t.jsx("div",{className:"flex items-center space-x-4 cursor-pointer","data-testid":"link-home",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"w-10 h-10 wine-gradient rounded-lg flex items-center justify-center mr-3",children:t.jsx(T,{className:"text-champagne-400 h-5 w-5"})}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-xl font-bold wine-text","data-testid":"text-logo-title",children:"TriviaSpark"}),t.jsx("p",{className:"text-xs text-gray-500","data-testid":"text-logo-tagline",children:"A WebSpark Solution"})]})]})})}),t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsxs("span",{className:`text-xs px-2 py-1 rounded-full border inline-flex items-center gap-1 ${e.ok?"text-green-700 border-green-300 bg-green-50":"text-red-700 border-red-300 bg-red-50"}`,title:e.ok?`API healthy â€¢ ${e.time??"now"}`:"API unreachable","data-testid":"badge-health","aria-live":"polite",children:[t.jsx("span",{className:`h-2 w-2 rounded-full ${e.ok?"bg-green-500":"bg-red-500"}`}),e.ok?"Online":"Offline"]}),t.jsx(H,{variant:"ghost",size:"sm",className:"text-gray-600 hover:text-wine-700 transition-colors","data-testid":"button-notifications",children:t.jsx(q,{className:"h-5 w-5"})}),t.jsx(g,{href:"/profile",children:t.jsx(I,{className:"w-8 h-8 cursor-pointer hover:ring-2 hover:ring-wine-300 transition-all","data-testid":"avatar-user",children:t.jsx(E,{className:"wine-gradient text-white text-sm font-medium",children:"MH"})})})]})]})})})}const ee=Object.freeze(Object.defineProperty({__proto__:null,default:D},Symbol.toStringTag,{value:"Module"}));export{I as A,D as H,E as a,ee as h};
